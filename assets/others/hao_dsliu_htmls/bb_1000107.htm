<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf8"><title>163 blogs的博客：[转] Can ARM desktop programs be built using visual studio 2012?</title>
<style type="text/css">
a{color: #000000;text-decoration : none;font-size: 10pt;}
a:hover {color: red;text-decoration : underline;}
.replyBox{padding:4px;border:1px solid #D8D8D8;}
</style></head><body><h2>[转] Can ARM desktop programs be built using visual studio 2012?</h2>
<p align="right">发布时间：2012-11-15 11:34
<br>分类名称：windows</p><br>
  <P>From：<A rel="nofollow" href="http://stackoverflow.com/questions/11151474/can-arm-desktop-programs-be-built-using-visual-studio-2012" >http://stackoverflow.com/questions/11151474/can-arm-desktop-programs-be-built-using-visual-studio-2012</A></P>  <P style="TEXT-INDENT: 2em;"  >================================================================================</P>  <P style="TEXT-INDENT: 2em;"  ><STRONG>Question：</STRONG></P>  <P style="TEXT-INDENT: 2em;"  >I was working with visual studio 2012 beta and my desktop (win32) program compiled fine in ARM architecture.</P>  <P style="TEXT-INDENT: 2em;"  >After upgrading to visual studio 2012 RC, the compiler would not work and spews out the following error:</P>  <P style="TEXT-INDENT: 2em;"  >"Compiling Desktop applications for the ARM platform is not supported"</P>  <P style="TEXT-INDENT: 2em;"  >I found a forum post on this <A rel="nofollow" href="http://connect.microsoft.com/VisualStudio/feedback/details/745580/arm-configuration-doesnt-work" >http://connect.microsoft.com/VisualStudio/feedback/details/745580/arm-configuration-doesnt-work</A></P>  <P style="TEXT-INDENT: 2em;"  >Is it correct that Microsoft is really cutting off win32 development on ARM? And that compiling in VS2012 beta was just a fluke?</P>  <P style="TEXT-INDENT: 2em;"  >================================================================================</P>  <P style="TEXT-INDENT: 2em;"  >Yes, you read that connect posting correctly. Windows RT (windows 8 for ARM) does not support third party desktop applications. </P>  <P style="TEXT-INDENT: 2em;"  >As such, there's no support for developing them in visual studio. –&nbsp;<A title="1709 reputation" rel="nofollow" href="http://stackoverflow.com/users/497924/jon" >Jon</A> <A rel="nofollow" href="http://stackoverflow.com/questions/11151474/can-arm-desktop-programs-be-built-using-visual-studio-2012#comment14785032_11151474" >Jun 28 at 17:58</A></P>  <P style="TEXT-INDENT: 2em;"  >================================================================================</P>  <P style="TEXT-INDENT: 2em;"  >You can edit the file:</P>  <P style="TEXT-INDENT: 2em;"  >C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Platforms\ARM\Microsoft.Cpp.ARM.Common.props<BR></P>  <P style="TEXT-INDENT: 2em;"  >In the section add the line&nbsp;</P>  <P style="TEXT-INDENT: 2em;"  >&nbsp;&lt;WindowsSDKDesktopARMSupport&gt;true&lt;/WindowsSDKDesktopARMSupport&gt;</P>  <P style="TEXT-INDENT: 2em;"  >before &lt;/PropertyGroup&gt;</P>  <P style="TEXT-INDENT: 2em;"  >And that's all, you can build ARM desktop apps with VS2012.</P>  <P style="TEXT-INDENT: 2em;"  >注释：</P>  <P style="TEXT-INDENT: 2em;"  >我试了下，的确可以，如果编译的是MFC能编译几个文件，连接的时候找不见mfc lib库而报错。编译win32示例，可以编译连接过</P>  <P style="TEXT-INDENT: 2em;"  >到了surface 测试运行的时候，提示无效签名，看来只能有微软的签名的程序才能够运行。就印证了微软那句话，只能从windows</P>  <P style="TEXT-INDENT: 2em;"  >商店里面安装。显然微软不想让你使用Desktop programs。</P>  <P style="TEXT-INDENT: 2em;"  >================================================================================</P>  <P style="TEXT-INDENT: 2em;"  >yes of course. i practised with VS2012 RC. </P>  <P style="TEXT-INDENT: 2em;"  >now i'll explain how to avoid "Compiling Desktop applications for the ARM platform is not supported" and build win32 application.</P>  <P style="TEXT-INDENT: 2em;"  >1st way: fix build tools - the goal is to patch (or try to substitute it with beta's one) MSBuild's lib: </P>  <P style="TEXT-INDENT: 2em;"  >Microsoft.Build.CPPTasks.Common.v110.dll </P>  <P style="TEXT-INDENT: 2em;"  >2nd way: run the "VS2012 ARM Cross Tools Command Prompt" from Visual Studio Tools start menu, </P>  <P style="TEXT-INDENT: 2em;"  >then execute cl [cl params] myfile1.cpp myfile2.cpp myres.res ... /link [linkparams]</P>  <P style="TEXT-INDENT: 2em;"  >for both this cases you also need to commentout an #error directive in crtdefs.h on line 332. (Microsoft Visual Studio 11.0\VC\include)</P>  <P style="TEXT-INDENT: 2em;"  >================================================================================</P>  <P>I was able to get around that error and compile a little "hello world" cpp file for ARM by adding the "/D _ARM_WINAPI_PARTITION_DESKTOP_SDK_AVAILABLE" command-line argument to the ARM version of cl at C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\x86_arm. I found that #define from sn0w's answer on this question in the crtdefs.h file, without having to modify that file. Now, I can't guarantee that anything more complex will actually work, or that Microsoft hasn't instituted some sort of whitelisting or digital signature verification for Windows RT desktop apps, so even though it may compile, it may not be allowed to run when Windows RT is finally available.</P>  <P>Note that before you can run the ARM version of cl.exe from the command line, you must set the environment variables using this batch file: "C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\x86_arm\vcvarsx86_arm.bat"</P>  <P style="TEXT-INDENT: 2em;"  >================================================================================</P>  <P style="TEXT-INDENT: 2em;"  >Even if you compile the app, you won't be able to run it on Windows 8 RT as unsigned apps will not start.</P>  <P style="TEXT-INDENT: 2em;"  >I just tested this, and unfortunately it is the case.</P>  <P style="TEXT-INDENT: 2em;"  >You receive the following message:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Windows cannot verify the digital signature of this file<BR></P>  <P style="TEXT-INDENT: 2em;"  >I imagine there is probably a work around for this, but it will never be officially supported.</P>  <P style="TEXT-INDENT: 2em;"  >================================================================================</P>  <P><WBR></P>
</body></html>