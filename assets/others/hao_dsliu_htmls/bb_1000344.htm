<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf8"><title>163 blogs的博客：[转] PKI常见证书格式和转换</title>
<style type="text/css">
a{color: #000000;text-decoration : none;font-size: 10pt;}
a:hover {color: red;text-decoration : underline;}
.replyBox{padding:4px;border:1px solid #D8D8D8;}
</style></head><body><h2>[转] PKI常见证书格式和转换</h2>
<p align="right">发布时间：2010-2-11 15:10
<br>分类名称：PKI</p><br>
<p>PKCS 全称是 Public-Key Cryptography Standards ，是由 RSA  实验室与其它安全系统开发商为促进公钥密码的发展而制订的一系列标准，PKCS 目前共发布过 15 个标准。 常用的有：<br>PKCS#7  Cryptographic Message Syntax Standard<br>PKCS#10 Certification Request  Standard<br>PKCS#12 Personal Information Exchange Syntax Standard</p> <p>X.509是常见通用的证书格式。所有的证书都符合为Public Key Infrastructure (PKI) 制定的 ITU-T X509  国际标准。</p> <p>PKCS#7 常用的后缀是： .P7B .P7C .SPC<br>PKCS#12 常用的后缀有： .P12 .PFX<br>X.509 DER  编码(ASCII)的后缀是： .DER .CER .CRT<br>X.509 PAM 编码(Base64)的后缀是： .PEM .CER  .CRT<br>.cer/.crt是用于存放证书，它是2进制形式存放的，不含私钥。<br>.pem跟crt/cer的区别是它以Ascii来表示。<br>pfx/p12用于存放个人证书/私钥，他通常包含保护密码，2进制方式<br>p10是证书请求<br>p7r是CA对证书请求的回复，只用于导入<br>p7b以树状展示证书链(certificate  chain)，同时也支持单个证书，不含私钥。<br><br>一 用openssl创建CA证书的RSA密钥(PEM格式)：<br>openssl genrsa  -des3 -out ca.key 1024</p> <p>二用openssl创建CA证书(PEM格式,假如有效期为一年)：<br>openssl req -new -x509 -days 365 -key  ca.key -out ca.crt -config  openssl.cnf<br>openssl是可以生成DER格式的CA证书的，最好用IE将PEM格式的CA证书转换成DER格式的CA证书。</p> <p>三 x509到pfx<br>pkcs12 -export –in keys/client1.crt -inkey keys/client1.key  -out keys/client1.pfx</p> <p>四 PEM格式的ca.key转换为Microsoft可以识别的pvk格式。<br>pvk -in ca.key -out ca.pvk -nocrypt  -topvk<br>五 PKCS#12 到 PEM 的转换<br>openssl pkcs12 -nocerts -nodes -in cert.p12  -out private.pem<br>验证 openssl pkcs12 -clcerts -nokeys -in cert.p12 -out  cert.pem<br>六 从 PFX 格式文件中提取私钥格式文件 (.key)<br>openssl pkcs12 -in mycert.pfx  -nocerts -nodes -out mycert.key<br>七 转换 pem 到到 spc<br>openssl crl2pkcs7 -nocrl  -certfile venus.pem&nbsp; -outform DER -out venus.spc<br>用 -outform -inform 指定 DER 还是  PAM 格式。例如：<br>openssl x509 -in Cert.pem -inform PEM -out cert.der -outform  DER<br>八 PEM 到 PKCS#12 的转换，<br>openssl pkcs12 -export -in Cert.pem -out Cert.p12  -inkey key.pem</p> <p><span style="color: rgb(0, 0, 255);"  ><strong>密钥库文件格式【Keystore】</strong></span></p> <p>&nbsp;<span style="color: rgb(255, 0, 0);"  >格式&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp; JKS</span><br>扩展名&nbsp; :  .jks/.ks<br>描述&nbsp;&nbsp;&nbsp;&nbsp; : 【Java Keystore】密钥库的Java实现版本，provider为SUN<br>特点&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp;  密钥库和私钥用不同的密码进行保护<br><br><span style="color: rgb(255, 0, 0);"  >&nbsp;格式&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp;  JCEKS</span><br>扩展名&nbsp; :&nbsp; .jce<br>描述&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp;【JCE Keystore】密钥库的JCE实现版本，provider为SUN  JCE<br>特点&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp; 相对于JKS安全级别更高，保护Keystore私钥时采用TripleDES<br><br><span style="color: rgb(255, 0, 0);"  >&nbsp;格式&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp; PKCS12<br></span>&nbsp;扩展名&nbsp; :&nbsp;  .p12/.pfx<br>描述&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp;【PKCS #12】个人信息交换语法标准<br>特点&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp;  1、包含私钥、公钥及其证书<br>2、密钥库和私钥用相同密码进行保护<br><br><span style="color: rgb(255, 0, 0);"  >&nbsp;格式&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp; BKS</span><br>扩展名&nbsp; : .bks<br>描述&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp;  Bouncycastle Keystore】密钥库的BC实现版本，provider为BC<br>特点&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp; 基于JCE实现<br><br><span style="color: rgb(255, 0, 0);"  >&nbsp;格式&nbsp;&nbsp;&nbsp;&nbsp; : UBER<br></span>&nbsp;扩展名&nbsp; : .ubr<br>描述&nbsp;&nbsp;&nbsp;&nbsp; :  【Bouncycastle UBER Keystore】密钥库的BC更安全实现版本，provider为BC<br><br></p> <p><br><span style="color: rgb(0, 0, 255);"  ><strong>证书文件格式【Certificate】</strong></span><br><span style="color: rgb(255, 0, 0);"  >格式&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp; DER</span> <br>扩展名&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;  .cer/.crt/.rsa</p> <p>描述&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 【ASN .1 DER】用于存放证书 <br>特点&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp; 不含私钥、二进制</p> <p><span style="color: rgb(255, 0, 0);"  >格式&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp; PKCS7 <br></span>扩展名&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:  .p7b/.p7r <br>描述&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 【PKCS #7】加密信息语法标准</p> <p>特点&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 1、p7b以树状展示证书链，不含私钥<br>2、p7r为CA对证书请求签名的回复，只能用于导入</p> <p><span style="color: rgb(255, 0, 0);"  >格式&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp; CMS</span> <br>扩展名&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;  .p7c/.p7m/.p7s <br>描述&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 【Cryptographic Message Syntax】  <br>特点&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 1、p7c只保存证书<br>2、p7m：signature with enveloped  da<wbr>ta<br>3、p7s：时间戳签名文件<br><br><span style="color: rgb(255, 0, 0);"  >格式&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;  PEM</span> <br>扩展名&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: .pem <br>描述&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 【Printable Encoded Message】  <br>特点&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1、该编码格式在RFC1421中定义，其实PEM是【Privacy-Enhanced  Mail】的简写，但他也同样广泛运用于密钥管理<br>2、ASCII文件<br>3、一般基于base 64编码</p> <p><span style="color: rgb(255, 0, 0);"  >格式&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: &nbsp;PKCS10</span>  <br>扩展名&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;.p10/.csr <br>描述&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 【PKCS #10】公钥加密标准【Certificate Signing  Request】<br>特点&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp; 1、证书签名请求文件<br>2、ASCII文件<br>3、CA签名后以p7r文件回复</p> <p><span style="color: rgb(255, 0, 0);"  >格式&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp; SPC</span> <br>扩展名&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  :&nbsp;.pvk/.spc <br>描述&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 【Software Publishing Certificate】 <br>特点&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :&nbsp;  微软公司特有的双证书文件格式，经常用于代码签名，其中<br>1、pvk用于保存私钥<br>2、spc用于保存公钥</p>
</body></html>