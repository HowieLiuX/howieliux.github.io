<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf8"><title>163 blogs的博客：五.任务状态段和控制门</title>
<style type="text/css">
a{color: #000000;text-decoration : none;font-size: 10pt;}
a:hover {color: red;text-decoration : underline;}
.replyBox{padding:4px;border:1px solid #D8D8D8;}
</style></head><body><h2>五.任务状态段和控制门</h2>
<p align="right">发布时间：2012-5-20 16:54
<br>分类名称：80x86保护模式</p><br>
<p><span style="color:black;"  ><span style="font-family:宋体;"  >每个任务有一个任务状态段</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >，用于保存任务的有关信息，在任务内变换特权级和任务切换时，</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >要用到这些信息。为了控制任务内发生特权级变换的转移，为了控制任务切换，一般要通过控制</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >门进行这些转移。本文将介绍任务状态段和控制门。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:24pt;"  ><strong>&lt;一&gt;系统段描述符 </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >系统段是为了实现存储管理机制所使用的一种特别的段。在</span><span style="font-family:Times New Roman;"  >80386</span><span style="font-family:宋体;"  >中，有两种系统段：任务状态</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >段</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >和局部描述符表</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >段。用于描述系统段的描述符称为系统段描述符。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:18pt;"  ><strong>1.系统段描述符的格式 </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >系统段描述符的一般格式如下表所示。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p> &nbsp;</p><div style="text-align: center;"  ><table style="border-collapse:collapse; background: #0099cc;"  border="0"  ><colgroup><col style="width:60px;"  /><col style="width:103px;"  /><col style="width:39px;"  /><col style="width:39px;"  /><col style="width:54px;"  /><col style="width:54px;"  /><col style="width:54px;"  /><col style="width:88px;"  /><col style="width:88px;"  /><tbody valign="top"  ><tr><td rowspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white;"  ><span style="font-family:宋体;"  >系统段</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >描述符</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+7</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+6</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+5</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+4</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+3</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+2</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+0</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >Base(31...24)</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >Attributes</span></p></td><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >Segment Base(23...0)</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >Segment Limite(15...0)</span></p></td></tr></table></div><p> &nbsp;</p><div style="text-align: center;"  ><table style="border-collapse:collapse; background: #cc9933;"  border="0"  ><colgroup><col style="width:20px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><tbody valign="top"  ><tr><td rowspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #ffcc66 0.75pt; border-left:  solid #ffcc66 0.75pt; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue;"  ><span style="font-family:宋体;"  >系统段</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >描述符</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >的属性</span></span></p></td><td colspan="8"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #ffcc66 0.75pt; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >Byte m+6</span></p></td><td colspan="8"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #ffcc66 0.75pt; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >Byte m+5</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #ffcc66 0.75pt; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT7</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT6</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT5</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT4</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT3</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT2</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT7</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT6</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT5</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT4</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT3</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT2</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT0</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #ffcc66 0.75pt; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >G</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >X</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >AVL</span></p></td><td colspan="4"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >Limit(19...16)</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >P</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >DPL</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >DT0</span></p></td><td colspan="4"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >TYPE</span></p></td></tr></table></div><p> &nbsp;</p><p><span style="color:black;"  ><span style="font-family:宋体;"  >与存储段描述符相比，它们很相似，区分的标志是属性字节中的描述符类型位</span><span style="font-family:Times New Roman;"  >DT</span><span style="font-family:宋体;"  >的值。</span><span style="font-family:Times New Roman;"  >DT=1</span><span style="font-family:宋体;"  >表示</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >存储段，</span><span style="font-family:Times New Roman;"  >DT=0</span><span style="font-family:宋体;"  >表示系统段。系统段描述符中的段基地址和段界限字段与存储段描述符中的意义完</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >全相同；属性中的</span><span style="font-family:Times New Roman;"  >G</span><span style="font-family:宋体;"  >位、</span><span style="font-family:Times New Roman;"  >AVL</span><span style="font-family:宋体;"  >位、</span><span style="font-family:Times New Roman;"  >P</span><span style="font-family:宋体;"  >位和</span><span style="font-family:Times New Roman;"  >DPL</span><span style="font-family:宋体;"  >字段的作用也完全相同。存储段描述符属性中的</span><span style="font-family:Times New Roman;"  >D</span><span style="font-family:宋体;"  >位在</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >系统段描述符中不使用，现用符号</span><span style="font-family:Times New Roman;"  >X</span><span style="font-family:宋体;"  >表示。系统段描述符的类型字段</span><span style="font-family:Times New Roman;"  >TYPE</span><span style="font-family:宋体;"  >仍是</span><span style="font-family:Times New Roman;"  >4</span><span style="font-family:宋体;"  >位，其编码及表示</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >的类型列于下表，其含义与存储段描述符的类型却完全不同。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p> &nbsp;</p><div><table style="border-collapse:collapse;"  border="0"  ><colgroup><col style="width:283px;"  /><col style="width:12px;"  /><col style="width:283px;"  /><tbody valign="top"  ><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  none; border-right:  none;"  ><p> &nbsp;</p><div style="text-align: center;"  ><table style="border-collapse:collapse; background: #0099cc;"  border="0"  ><colgroup><col style="width:69px;"  /><col style="width:90px;"  /><col style="width:121px;"  /><tbody valign="top"  ><tr><td rowspan="9"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white;"  ><span style="font-family:宋体;"  >系统段</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >类</span><span style="font-family:Times New Roman;"  >              </span><span style="font-family:宋体;"  >型</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体;"  >类型编码</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white;"  ><span style="font-family:宋体;"  >说</span><span style="font-family:Times New Roman;"  >              </span><span style="font-family:宋体;"  >明</span></span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white; font-family:宋体;"  >未定义</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white;"  ><span style="font-family:宋体;"  >可用</span><span style="font-family:Times New Roman;"  >286TSS</span></span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >2</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white; font-family:Times New Roman;"  >LDT</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >3</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white;"  ><span style="font-family:宋体;"  >忙的</span><span style="font-family:Times New Roman;"  >286TSS</span></span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >4</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white;"  ><span style="font-family:Times New Roman;"  >286</span><span style="font-family:宋体;"  >调用门</span></span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >5</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white; font-family:宋体;"  >任务门</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >6</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white;"  ><span style="font-family:Times New Roman;"  >286</span><span style="font-family:宋体;"  >中断门</span></span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >7</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white;"  ><span style="font-family:Times New Roman;"  >286</span><span style="font-family:宋体;"  >陷阱门</span></span></p></td></tr></table></div></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  none; border-right:  none;"  >&nbsp;</td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  none; border-right:  none;"  ><div style="text-align: center;"  ><table style="border-collapse:collapse; background: #0099cc;"  border="0"  ><colgroup><col style="width:69px;"  /><col style="width:90px;"  /><col style="width:121px;"  /><tbody valign="top"  ><tr><td rowspan="9"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white;"  ><span style="font-family:宋体;"  >系统段</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >类</span><span style="font-family:Times New Roman;"  >              </span><span style="font-family:宋体;"  >型</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体;"  >类型编码</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white;"  ><span style="font-family:宋体;"  >说</span><span style="font-family:Times New Roman;"  >              </span><span style="font-family:宋体;"  >明</span></span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >8</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white; font-family:宋体;"  >未定义</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >9</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white;"  ><span style="font-family:宋体;"  >可用</span><span style="font-family:Times New Roman;"  >386TSS</span></span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >A</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white; font-family:宋体;"  >未定义</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >B</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white;"  ><span style="font-family:宋体;"  >忙的</span><span style="font-family:Times New Roman;"  >386TSS</span></span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >C</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white;"  ><span style="font-family:Times New Roman;"  >386</span><span style="font-family:宋体;"  >调用门</span></span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >D</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white; font-family:宋体;"  >未定义</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >E</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white;"  ><span style="font-family:Times New Roman;"  >386</span><span style="font-family:宋体;"  >中断门</span></span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >F</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white;"  ><span style="font-family:Times New Roman;"  >386</span><span style="font-family:宋体;"  >陷阱门</span></span></p></td></tr></table></div></td></tr></table></div><p> &nbsp;</p><p><span style="color:black;"  ><span style="font-family:宋体;"  >从上表可见，只有类型编码为</span><span style="font-family:Times New Roman;"  >2</span><span style="font-family:宋体;"  >、</span><span style="font-family:Times New Roman;"  >1</span><span style="font-family:宋体;"  >、</span><span style="font-family:Times New Roman;"  >3</span><span style="font-family:宋体;"  >、</span><span style="font-family:Times New Roman;"  >9</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >B</span><span style="font-family:宋体;"  >的描述符才是真正的系统段描述符，它们用于描述</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >系统段</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >和任务状态段</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >，其它类型的描述符是门描述符。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >利用前文定义的存储段描述符结构类型</span><span style="font-family:Times New Roman;"  >DESC</span><span style="font-family:宋体;"  >仍能方便地在程序中说明系统段描述符。需要注意</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >的是，系统段描述符的选择子不能用来读写系统段，要想读写系统段，必须使用别名技术。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:18pt;"  ><strong>2.LDT段描述符 </strong></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >段描述符描述任务的局部描述符表段。例如：下面的描述符</span><span style="font-family:Times New Roman;"  >LDTABLE</span><span style="font-family:宋体;"  >描述一个局部描述符表</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >段，基地址是</span><span style="font-family:Times New Roman;"  >654321H</span><span style="font-family:宋体;"  >，以字节为单位的界限是</span><span style="font-family:Times New Roman;"  >1FH</span><span style="font-family:宋体;"  >，描述符特权级是</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman;"  >    LDTABLE  DESC  &lt;1FH,4321H,65H,82H,,&gt; </span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >段描述符必须安排在全局描述符表中才有效。在装载</span><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >寄存器时，描述符中的</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >段基地</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >址和段界限等信息被装入</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >段描述符高速缓冲寄存器中。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:18pt;"  ><strong>3.任务状态段描述符 </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >任务状态段</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >用于保存任务的各种状态信息。任务状态段描述符描述某个任务状态段</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >描述符</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >分为</span><span style="font-family:Times New Roman;"  >286TSS</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >386TSS</span><span style="font-family:宋体;"  >两类。</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >描述符规定了任务状态段的基地址和任务状态段的大小等信息。</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >例如，下面的描述符</span><span style="font-family:Times New Roman;"  >TempTask</span><span style="font-family:宋体;"  >描述一个可用的</span><span style="font-family:Times New Roman;"  >386</span><span style="font-family:宋体;"  >任务状态段，基地址是</span><span style="font-family:Times New Roman;"  >123456H</span><span style="font-family:宋体;"  >，以字节为单位</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >的界限是</span><span style="font-family:Times New Roman;"  >104</span><span style="font-family:宋体;"  >，描述符特权级是</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman;"  >    TempTask  DESC  &lt;104,3456H,12H,89H,,&gt; </span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >在装载任务状态段寄存器</span><span style="font-family:Times New Roman;"  >TR</span><span style="font-family:宋体;"  >时，描述符中的段基地址和段界限等信息被装入到</span><span style="font-family:Times New Roman;"  >TR</span><span style="font-family:宋体;"  >的高速缓冲寄存</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >器中。在任务切换或执行</span><span style="font-family:Times New Roman;"  >LTR</span><span style="font-family:宋体;"  >指令时，要装载</span><span style="font-family:Times New Roman;"  >TR</span><span style="font-family:宋体;"  >寄存器。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >描述符中的类型规定：</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >要么为</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >忙</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >，要么为</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >可用</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >。如果一个任务是当前正执行的任</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >务，或者是用</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >中的链接字段沿挂起任务链接到当前任务上的任务，那么该任务是</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >忙</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >的任</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >务；否则该任务为</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >可用</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >任务。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >利用段间转移指令</span><span style="font-family:Times New Roman;"  >JMP</span><span style="font-family:宋体;"  >和段间调用指令</span><span style="font-family:Times New Roman;"  >CALL</span><span style="font-family:宋体;"  >，直接通过</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >描述符或通过任务门可实现任务切换。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:24pt;"  ><strong>&lt;二&gt;门描述符 </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >除存储段描述符和系统段描述符外，还有一类门描述符。门描述符并不描述某种内存段，而是描</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >述控制转移的入口点。这种描述符好比一个同向另一代码段的门。通过这种门，可实现任务内特</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >权级的变换和任务间的切换。所以，这种门描述符也称为控制门。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:18pt;"  ><strong>1.门描述符的一般格式 </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >门描述符的一般格式如下图所示。门描述符只有位于描述符内偏移</span><span style="font-family:Times New Roman;"  >5</span><span style="font-family:宋体;"  >的类型字节与系统段保持一</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >致，也由该字节标示门描述符和系统段描述符。该字节内的</span><span style="font-family:Times New Roman;"  >P</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >DPL</span><span style="font-family:宋体;"  >的意义与其它描述符种中的</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >意义相同。其它字节主要用于存放一个</span><span style="font-family:Times New Roman;"  >48</span><span style="font-family:宋体;"  >位的全指针</span><span style="font-family:Times New Roman;"  >(16</span><span style="font-family:宋体;"  >位的选择子和</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位的偏移量</span><span style="font-family:Times New Roman;"  >)</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p> &nbsp;</p><div style="text-align: center;"  ><table style="border-collapse:collapse; background: #0099cc;"  border="0"  ><colgroup><col style="width:100px;"  /><col style="width:73px;"  /><col style="width:73px;"  /><col style="width:50px;"  /><col style="width:50px;"  /><col style="width:50px;"  /><col style="width:50px;"  /><col style="width:67px;"  /><col style="width:67px;"  /><tbody valign="top"  ><tr><td rowspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体;"  >门描述符</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+7</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+6</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+5</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+4</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+3</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+2</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >m+0</span></p></td></tr><tr><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >Offset(31...16)</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >Attributes</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >Selector</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >Offset(15...0)</span></p></td></tr></table></div><p> &nbsp;</p><div style="text-align: center;"  ><table style="border-collapse:collapse; background: #cc9933;"  border="0"  ><colgroup><col style="width:20px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><tbody valign="top"  ><tr><td rowspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #ffcc66 0.75pt; border-left:  solid #ffcc66 0.75pt; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue;"  ><span style="font-family:宋体;"  >门描述</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >符属性</span></span></p></td><td colspan="8"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #ffcc66 0.75pt; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >Byte m+5</span></p></td><td colspan="8"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #ffcc66 0.75pt; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >Byte m+4</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #ffcc66 0.75pt; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT7</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT6</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT5</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT4</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT3</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT2</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT7</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT6</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT5</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT4</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT3</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT2</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >BIT0</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #ffcc66 0.75pt; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >P</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >DPL</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >DT0</span></p></td><td colspan="4"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >TYPE</span></p></td><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >000</span></p></td><td colspan="5"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman;"  >Dword Count</span></p></td></tr></table></div><p> &nbsp;</p><p><span style="color:black;"  ><span style="font-family:宋体;"  >根据上图给出的门描述符的结构，可定义如下的门描述符结构类型：</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >    GATE     STRUC      ;</span><span style="font-family:宋体;"  >门结构类型定义</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >    OFFSETL  DW      0  ;32</span><span style="font-family:宋体;"  >位偏移的低</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >    SELECTOR DW      0  ;</span><span style="font-family:宋体;"  >选择子</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >    DCOUNT   DB      0  ;</span><span style="font-family:宋体;"  >双字计数字段</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >    GTYPE    DB      0  ;</span><span style="font-family:宋体;"  >类型</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >    OFFSETH  DW      0  ;32</span><span style="font-family:宋体;"  >位偏移的高</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman;"  >    GATE     ENDS </span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >利用门描述符结构类型</span><span style="font-family:Times New Roman;"  >GATE</span><span style="font-family:宋体;"  >能方便地在程序中说明门描述符。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >例如，下面的门描述符</span><span style="font-family:Times New Roman;"  >SUBRG</span><span style="font-family:宋体;"  >描述一个</span><span style="font-family:Times New Roman;"  >386</span><span style="font-family:宋体;"  >调用门，门内的选择子是</span><span style="font-family:Times New Roman;"  >10H</span><span style="font-family:宋体;"  >，入口偏移是</span><span style="font-family:Times New Roman;"  >123456H</span><span style="font-family:宋体;"  >，门</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >描述符特权级是</span><span style="font-family:Times New Roman;"  >3</span><span style="font-family:宋体;"  >，双字计数是</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman;"  >    SUBRG    GATE  &lt;3456,10H,,8CH+60H,12H&gt; </span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >从上述描述符类型的列表中可见，门描述符又可分为：任务门、调用门、中断门和陷阱门，并且</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >除任务门外，其它描述符还各分成</span><span style="font-family:Times New Roman;"  >286</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >386</span><span style="font-family:宋体;"  >两种。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:18pt;"  ><strong>2.调用门 </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >调用门描述某个子程序的入口。调用门内的选择子必须实现代码段描述符，调用门内的偏移是对</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >应代码段内的偏移。利用段间调用指令</span><span style="font-family:Times New Roman;"  >CALL</span><span style="font-family:宋体;"  >，通过调用门可实现任务内从外层特权级变换到内层</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >特权级。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >在上图所示的门描述符内偏移</span><span style="font-family:Times New Roman;"  >4</span><span style="font-family:宋体;"  >字节的位</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >至位</span><span style="font-family:Times New Roman;"  >4</span><span style="font-family:宋体;"  >是双字计数字段，该字段只在调用门描述符中有</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >效，在其它门描述符中无效。主程序通过堆栈把入口参数传递给子程序，如果在利用调用门调用</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >子程序时引起特权级的转换和堆栈的改变，那么就需要将外层堆栈中的参数复制到内层堆栈。该</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >双字计数字段就是用于说明这种情况发生时，要复制的双字参数的数量。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:18pt;"  ><strong>3.任务门 </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >任务门指示任务。任务门内的选择子必须指示</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >中的任务状态段</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >描述符，门中的偏移无意</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >义。任务的入口点保存在</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >中。利用段间转移指令</span><span style="font-family:Times New Roman;"  >JMP</span><span style="font-family:宋体;"  >和段间调用指令</span><span style="font-family:Times New Roman;"  >CALL</span><span style="font-family:宋体;"  >，通过任务门可实</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >现任务切换。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:18pt;"  ><strong>4.中断门和陷阱门 </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >中断门和陷阱门描述中断</span><span style="font-family:Times New Roman;"  >/</span><span style="font-family:宋体;"  >异常处理程序的人口点。中断门和陷阱门内的选择子必须指向代码段</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >描述符，门内的偏移就是对应代码段的人口点的偏移。中断门和陷阱门只有在中断描述符表</span><span style="font-family:Times New Roman;"  >IDT</span><span style="font-family:宋体;"  >中</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >才有效。关于中断门和陷阱门的区别将在以后的文章中论述。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:24pt;"  ><strong>&lt;三&gt;任务状态段 </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >任务状态段</span><span style="font-family:Times New Roman;"  >(Task State Segment)</span><span style="font-family:宋体;"  >是保存一个任务重要信息的特殊段。任务状态段描述符用于</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >描述这样的系统段。任务状态段寄存器</span><span style="font-family:Times New Roman;"  >TR</span><span style="font-family:宋体;"  >的可见部分含有当前任务的任务状态段描述符的选择</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >子，</span><span style="font-family:Times New Roman;"  >TR</span><span style="font-family:宋体;"  >的不可见的高速缓冲寄存器部分含有当前任务状态段的段基地址和段界限等信息。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >在任务切换过程中起着重要作用，通过它实现任务的挂起和恢复。所谓任务切换是指，挂起</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >当前正在执行的任务，恢复或启动另一任务的执行。在任务切换过程中，首先，处理器中各寄</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >存器的当前值被自动保存到</span><span style="font-family:Times New Roman;"  >TR</span><span style="font-family:宋体;"  >所指定的</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >中；然后，下一任务的</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >的选择子被装入</span><span style="font-family:Times New Roman;"  >TR</span><span style="font-family:宋体;"  >；最后，</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >从</span><span style="font-family:Times New Roman;"  >TR</span><span style="font-family:宋体;"  >所指定的</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >中取出各寄存器的值送到处理器的各寄存器中。由此可见，通过在</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >中保存</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >任务现场各寄存器状态的完整映象，实现任务的切换。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >任务状态段</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >的基本格式如下图所示。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p> &nbsp;</p><div style="text-align: center;"  ><table style="border-collapse:collapse; background: #0099cc;"  border="0"  ><colgroup><col style="width:19px;"  /><col style="width:121px;"  /><col style="width:114px;"  /><col style="width:35px;"  /><col style="width:41px;"  /><tbody valign="top"  ><tr><td rowspan="27"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white;"  ><span style="font-family:宋体;"  >任</span><span style="font-family:Times New Roman;"  ><br><br></span><span style="font-family:宋体;"  >务</span><span style="font-family:Times New Roman;"  ><br><br></span><span style="font-family:宋体;"  >状</span><span style="font-family:Times New Roman;"  ><br><br></span><span style="font-family:宋体;"  >态</span><span style="font-family:Times New Roman;"  ><br><br></span><span style="font-family:宋体;"  >段</span><span style="font-family:Times New Roman;"  ><br><br></span><span style="font-family:宋体;"  >基</span><span style="font-family:Times New Roman;"  ><br><br></span><span style="font-family:宋体;"  >本</span><span style="font-family:Times New Roman;"  ><br><br></span><span style="font-family:宋体;"  >部</span><span style="font-family:Times New Roman;"  ><br><br></span><span style="font-family:宋体;"  >分</span><span style="font-family:Times New Roman;"  ><br><br></span><span style="font-family:宋体;"  >的</span><span style="font-family:Times New Roman;"  ><br><br></span><span style="font-family:宋体;"  >格</span><span style="font-family:Times New Roman;"  ><br><br></span><span style="font-family:宋体;"  >式</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >BIT31—BIT16</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >BIT15—BIT1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >BIT0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >Offset</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >0000000000000000</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体;"  >链接字段</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >0</span></p></td></tr><tr><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >ESP0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >4</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >0000000000000000</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >SS0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >8</span></p></td></tr><tr><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >ESP1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >0CH</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >0000000000000000</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >SS1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >10H</span></p></td></tr><tr><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >ESP2</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >14H</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >0000000000000000</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >SS2</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >18H</span></p></td></tr><tr><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >CR3</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >1CH</span></p></td></tr><tr><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >EIP</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >20H</span></p></td></tr><tr><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >EFLAGS</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >24H</span></p></td></tr><tr><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >EAX</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >28H</span></p></td></tr><tr><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >ECX</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >2CH</span></p></td></tr><tr><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >EDX</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >30H</span></p></td></tr><tr><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >EBX</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >34H</span></p></td></tr><tr><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >ESP</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >38H</span></p></td></tr><tr><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >EBP</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >3CH</span></p></td></tr><tr><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >ESI</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >40H</span></p></td></tr><tr><td colspan="3"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >EDI</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >44H</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >0000000000000000</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >ES</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >48H</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >0000000000000000</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >CS</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >4CH</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >0000000000000000</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >SS</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >50H</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >0000000000000000</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >DS</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >54H</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >0000000000000000</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >FS</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >58H</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >0000000000000000</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >GS</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >5CH</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >0000000000000000</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >LDTR</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >60H</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white;"  ><span style="font-family:Times New Roman;"  >I/O</span><span style="font-family:宋体;"  >许可位图偏移</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >000000000000000</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >T</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman;"  >64H</span></p></td></tr></table></div><p> &nbsp;</p><p><span style="color:black;"  ><span style="font-family:宋体;"  >从图中可见，</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >的基本格式由</span><span style="font-family:Times New Roman;"  >104</span><span style="font-family:宋体;"  >字节组成。这</span><span style="font-family:Times New Roman;"  >104</span><span style="font-family:宋体;"  >字节的基本格式是不可改变的，但在此之外</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >系统软件还可定义若干附加信息。基本的</span><span style="font-family:Times New Roman;"  >104</span><span style="font-family:宋体;"  >字节可分为链接字段区域、内层堆栈指针区域、地</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >址映射寄存器区域、寄存器保存区域和其它字段等五个区域。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:18pt;"  ><strong>1.寄存器保存区域 </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >寄存器保存区域位于</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >内偏移</span><span style="font-family:Times New Roman;"  >20H</span><span style="font-family:宋体;"  >至</span><span style="font-family:Times New Roman;"  >5FH</span><span style="font-family:宋体;"  >处，用于保存通用寄存器、段寄存器、指令指针和标志</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >寄存器。当</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >对应的任务正在执行时，保存区域是未定义的；在当前任务被切换出时，这些寄</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >存器的当前值就保存在该区域。当下次切换回原任务时，再从保存区域恢复出这些寄存器的值，</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >从而，使处理器恢复成该任务换出前的状态，最终使任务能够恢复执行。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >从上图可见，各通用寄存器对应一个</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位的双字，指令指针和标志寄存器各对应一个</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位的双</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >字；各段寄存器也对应一个</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位的双字，段寄存器中的选择子只有</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位，安排再双字的低</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位，</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >高</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位未用，一般应填为</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:18pt;"  ><strong>2.内层堆栈指针区域 </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >为了有效地实现保护，同一个任务在不同的特权级下使用不同的堆栈。例如，当从外层特权</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >级</span><span style="font-family:Times New Roman;"  >3</span><span style="font-family:宋体;"  >变换到内层特权级</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >时，任务使用的堆栈也同时从</span><span style="font-family:Times New Roman;"  >3</span><span style="font-family:宋体;"  >级变换到</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >级堆栈；当从内层特权级</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >变</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >换到外层特权级</span><span style="font-family:Times New Roman;"  >3</span><span style="font-family:宋体;"  >时，任务使用的堆栈也同时从</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >级堆栈变换到</span><span style="font-family:Times New Roman;"  >3</span><span style="font-family:宋体;"  >级堆栈。所以，一个任务可能</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >具有四个堆栈，对应四个特权级。四个堆栈需要四个堆栈指针。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >的内层堆栈指针区域中有三个堆栈指针，它们都是</span><span style="font-family:Times New Roman;"  >48</span><span style="font-family:宋体;"  >位的全指针</span><span style="font-family:Times New Roman;"  >(16</span><span style="font-family:宋体;"  >位的选择子和</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位的</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >偏移</span><span style="font-family:Times New Roman;"  >)</span><span style="font-family:宋体;"  >，分别指向</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >级、</span><span style="font-family:Times New Roman;"  >1</span><span style="font-family:宋体;"  >级和</span><span style="font-family:Times New Roman;"  >2</span><span style="font-family:宋体;"  >级堆栈的栈顶，依次存放在</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >中偏移为</span><span style="font-family:Times New Roman;"  >4</span><span style="font-family:宋体;"  >、</span><span style="font-family:Times New Roman;"  >12</span><span style="font-family:宋体;"  >及</span><span style="font-family:Times New Roman;"  >20</span><span style="font-family:宋体;"  >开始的位置。</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >当发生向内层转移时，把适当的堆栈指针装入</span><span style="font-family:Times New Roman;"  >SS</span><span style="font-family:宋体;"  >及</span><span style="font-family:Times New Roman;"  >ESP</span><span style="font-family:宋体;"  >寄存器以变换到内层堆栈，外层堆栈的</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >指针保存在内层堆栈中。没有指向</span><span style="font-family:Times New Roman;"  >3</span><span style="font-family:宋体;"  >级堆栈的指针，因为</span><span style="font-family:Times New Roman;"  >3</span><span style="font-family:宋体;"  >级是最外层，所以任何一个向内层</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >的转移都不可能转移到</span><span style="font-family:Times New Roman;"  >3</span><span style="font-family:宋体;"  >级。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >但是，当特权级由内层向外层变换时，并不把内层堆栈的指针保存到</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >的内层堆栈指针区域。</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >实际上，处理器从不向该区域进行写入，除非程序设计者认为改变该区域的值。这表明向内层</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >转移时，总是把内层堆栈认为是一个空栈。因此，不允许发生同级内层转移的递归，一旦发生</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >向某级内层的转移，那么返回到外层的正常途径是相匹配的向外层返回。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:18pt;"  ><strong>3.地址映射寄存器区域 </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >从虚拟地址空间到线性地址空间的映射由</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >确定，与特定任务相关的部分由</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >确定，</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >而</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >又由</span><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >确定。如果采用分页机制，那么由线性地址空间到物理地址空间的映射由包含</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >页目录表起始物理地址的控制寄存器</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >确定。所以，与特定任务相关的虚拟地址空间到物理</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >地址空间的映射由</span><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >确定。显然，随着任务的切换，地址映射关系也要切换。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >的地址映射寄存器区域由位于偏移</span><span style="font-family:Times New Roman;"  >1CH</span><span style="font-family:宋体;"  >处的双字字段</span><span style="font-family:Times New Roman;"  >(CR3)</span><span style="font-family:宋体;"  >和位于偏移</span><span style="font-family:Times New Roman;"  >60H</span><span style="font-family:宋体;"  >处的字</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >字段</span><span style="font-family:Times New Roman;"  >(LDTR)</span><span style="font-family:宋体;"  >组成。在任务切换时，处理器自动从要执行任务的</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >中取出这两个字段，分别</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >装入到寄存器</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >。这样就改变了虚拟地址空间到物理地址空间的映射。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >但是，在任务切换时，处理器并不把换出任务但是的寄存器</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >的内容保存到</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >中的</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >地址映射寄存器区域。事实上，处理器也从来不向该区域自动写入。因此，如果程序改变</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >了</span><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >或</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >，那么必须把新值人为地保存到</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >中的地址映射寄存器区域相应字段中。可以</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >通过别名技术实现此功能。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:18pt;"  ><strong>4.链接字段 </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >链接字段安排在</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >内偏移</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >开始的双字中，其高</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位未用。在起链接作用时，地</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位保存前</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >一任务的</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >描述符的选择子。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >如果当前的任务由段间调用指令</span><span style="font-family:Times New Roman;"  >CALL</span><span style="font-family:宋体;"  >或中断</span><span style="font-family:Times New Roman;"  >/</span><span style="font-family:宋体;"  >异常而激活，那么链接字段保存被挂起任务的</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >的选择子，并且标志寄存器</span><span style="font-family:Times New Roman;"  >EFLAGS</span><span style="font-family:宋体;"  >中的</span><span style="font-family:Times New Roman;"  >NT</span><span style="font-family:宋体;"  >位被置</span><span style="font-family:Times New Roman;"  >1</span><span style="font-family:宋体;"  >，使链接字段有效。在返回时，由</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >于</span><span style="font-family:Times New Roman;"  >NT</span><span style="font-family:宋体;"  >标志位为</span><span style="font-family:Times New Roman;"  >1</span><span style="font-family:宋体;"  >，返回指令</span><span style="font-family:Times New Roman;"  >RET</span><span style="font-family:宋体;"  >或中断返回指令</span><span style="font-family:Times New Roman;"  >IRET</span><span style="font-family:宋体;"  >将使得控制沿链接字段所指恢复到链上的</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >前一个任务。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:18pt;"  ><strong>5.其它字段 </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >为了实现输入</span><span style="font-family:Times New Roman;"  >/</span><span style="font-family:宋体;"  >输出保护，要使用</span><span style="font-family:Times New Roman;"  >I/O</span><span style="font-family:宋体;"  >许可位图。任务使用的</span><span style="font-family:Times New Roman;"  >I/O</span><span style="font-family:宋体;"  >许可位图也存放在</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >中，作</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >为</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >的扩展部分。在</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >内偏移</span><span style="font-family:Times New Roman;"  >66H</span><span style="font-family:宋体;"  >处的字用于存放</span><span style="font-family:Times New Roman;"  >I/O</span><span style="font-family:宋体;"  >许可位图在</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >内的偏移</span><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >从</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >开头</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >开始计算</span><span style="font-family:Times New Roman;"  >)</span><span style="font-family:宋体;"  >。关于</span><span style="font-family:Times New Roman;"  >I/O</span><span style="font-family:宋体;"  >许可位图的作用，以后的文章中将会详细介绍。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >在</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >内偏移</span><span style="font-family:Times New Roman;"  >64H</span><span style="font-family:宋体;"  >处的字是为任务提供的特别属性。在</span><span style="font-family:Times New Roman;"  >80386</span><span style="font-family:宋体;"  >中，只定义了一种属性，即调试</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >陷阱。该属性是字的最低位，用</span><span style="font-family:Times New Roman;"  >T</span><span style="font-family:宋体;"  >表示。该字的其它位置被保留，必须被置为</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >。在发生任务</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >切换时，如果进入任务的</span><span style="font-family:Times New Roman;"  >T</span><span style="font-family:宋体;"  >位为</span><span style="font-family:Times New Roman;"  >1</span><span style="font-family:宋体;"  >，那么在任务切换完成之后，新任务的第一条指令执行之前</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >产生调试陷阱。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:18pt;"  ><strong>6.用结构类型定义TSS </strong></span></p><p><span style="color:black;"  ><span style="font-family:宋体;"  >根据上图给出的任务状态段</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >的结构，可定义如下的</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >结构类型：</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman;"  >;---------------------------------------------------------------------------- </span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >任务状态段结构类型定义</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman;"  >;---------------------------------------------------------------------------- </span></p><p><span style="color:black; font-family:Times New Roman;"  >TSS             STRUC </span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >TRLink          DW      0      ;</span><span style="font-family:宋体;"  >链接字段</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >                DW      0      ;</span><span style="font-family:宋体;"  >不使用</span><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span><span style="font-family:Times New Roman;"  >0 </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >TRESP0          DD      0      ;0</span><span style="font-family:宋体;"  >级堆栈指针</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >TRSS0           DW      0      ;0</span><span style="font-family:宋体;"  >级堆栈段寄存器</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >                DW      0      ;</span><span style="font-family:宋体;"  >不使用</span><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span><span style="font-family:Times New Roman;"  >0 </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >TRESP1          DD      0      ;1</span><span style="font-family:宋体;"  >级堆栈指针</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >TRSS1           DW      0      ;1</span><span style="font-family:宋体;"  >级堆栈段寄存器</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >                DW      0      ;</span><span style="font-family:宋体;"  >不使用</span><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span><span style="font-family:Times New Roman;"  >0 </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >TRESP2          DD      0      ;2</span><span style="font-family:宋体;"  >级堆栈指针</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >TRSS2           DW      0      ;2</span><span style="font-family:宋体;"  >级堆栈段寄存器</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >                DW      0      ;</span><span style="font-family:宋体;"  >不使用</span><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span><span style="font-family:Times New Roman;"  >0 </span></span></p><p><span style="color:black; font-family:Times New Roman;"  >TRCR3           DD      0      ;CR3 </span></p><p><span style="color:black; font-family:Times New Roman;"  >TREIP           DD      0      ;EIP </span></p><p><span style="color:black; font-family:Times New Roman;"  >TREFlag         DD      0      ;EFLAGS </span></p><p><span style="color:black; font-family:Times New Roman;"  >TREAX           DD      0      ;EAX </span></p><p><span style="color:black; font-family:Times New Roman;"  >TRECX           DD      0      ;ECX </span></p><p><span style="color:black; font-family:Times New Roman;"  >TREDX           DD      0      ;EDX </span></p><p><span style="color:black; font-family:Times New Roman;"  >TREBX           DD      0      ;EBX </span></p><p><span style="color:black; font-family:Times New Roman;"  >TRESP           DD      0      ;ESP </span></p><p><span style="color:black; font-family:Times New Roman;"  >TREBP           DD      0      ;EBP </span></p><p><span style="color:black; font-family:Times New Roman;"  >TRESI           DD      0      ;ESI </span></p><p><span style="color:black; font-family:Times New Roman;"  >TREDI           DD      0      ;EDI </span></p><p><span style="color:black; font-family:Times New Roman;"  >TRES            DW      0      ;ES </span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >                DW      0      ;</span><span style="font-family:宋体;"  >不使用</span><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span><span style="font-family:Times New Roman;"  >0 </span></span></p><p><span style="color:black; font-family:Times New Roman;"  >TRCS            DW      0      ;CS </span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >                DW      0      ;</span><span style="font-family:宋体;"  >不使用</span><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span><span style="font-family:Times New Roman;"  >0 </span></span></p><p><span style="color:black; font-family:Times New Roman;"  >TRSS            DW      0      ;SS </span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >                DW      0      ;</span><span style="font-family:宋体;"  >不使用</span><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span><span style="font-family:Times New Roman;"  >0 </span></span></p><p><span style="color:black; font-family:Times New Roman;"  >TRDS            DW      0      ;DS </span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >                DW      0      ;</span><span style="font-family:宋体;"  >不使用</span><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span><span style="font-family:Times New Roman;"  >0 </span></span></p><p><span style="color:black; font-family:Times New Roman;"  >TRFS            DW      0      ;FS </span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >                DW      0      ;</span><span style="font-family:宋体;"  >不使用</span><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span><span style="font-family:Times New Roman;"  >0 </span></span></p><p><span style="color:black; font-family:Times New Roman;"  >TRGS            DW      0      ;GS </span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >                DW      0      ;</span><span style="font-family:宋体;"  >不使用</span><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span><span style="font-family:Times New Roman;"  >0 </span></span></p><p><span style="color:black; font-family:Times New Roman;"  >TRLDTR          DW      0      ;LDTR </span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >                DW      0      ;</span><span style="font-family:宋体;"  >不使用</span><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span><span style="font-family:Times New Roman;"  >0 </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >TRTrip          DW      0      ;</span><span style="font-family:宋体;"  >调试陷阱标志</span><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >只用位</span><span style="font-family:Times New Roman;"  >0) </span></span></p><p><span style="color:black;"  ><span style="font-family:Times New Roman;"  >TRIOMap         DW      $+2    ;</span><span style="font-family:宋体;"  >指向</span><span style="font-family:Times New Roman;"  >I/O</span><span style="font-family:宋体;"  >许可位图区的段内偏移</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman;"  >TSS             ENDS </span></p>
</body></html>