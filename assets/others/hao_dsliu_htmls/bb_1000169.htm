<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf8"><title>163 blogs的博客：【引用】获取Android的Java源代码并在Eclipse中关联查看的最新方法</title>
<style type="text/css">
a{color: #000000;text-decoration : none;font-size: 10pt;}
a:hover {color: red;text-decoration : underline;}
.replyBox{padding:4px;border:1px solid #D8D8D8;}
</style></head><body><h2>【引用】获取Android的Java源代码并在Eclipse中关联查看的最新方法</h2>
<p align="right">发布时间：2012-4-10 13:58
<br>分类名称：Android</p><br>
   <p style="TEXT-INDENT: 2em;"  >在Google搜索“<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a> Eclipse 源代码”得到的结果并不合适，因为Google的Eclipse <a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>开发插件已经更新到了ADT 8.0.1.相应的lib关联<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >java</a>源代码的方式也变了。<br>以下是获取<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>的<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >Java</a>源代码并在Eclipse中关联的最新操作方法和步骤：<br>1.首先下载<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>的<a title="Posts tagged with SDK" rel="nofollow" href="http://618119.com/tag/sdk"  >SDK</a>安装文件：<a rel="nofollow" href="http://dl.google.com/android/android-sdk_r08-windows.zip"  >http://dl.google.com/android/android-sdk_r08-windows.zip</a><br>然后解压到：E:\<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >Java</a>\<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>\<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>-<a title="Posts tagged with SDK" rel="nofollow" href="http://618119.com/tag/sdk"  >sdk</a>-windows，运行目录中的<a title="Posts tagged with SDK" rel="nofollow" href="http://618119.com/tag/sdk"  >SDK</a> Manager.exe,下载好<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>不同版本的API包。</p>  <p style="TEXT-INDENT: 2em;"  >2.然后下载或在线安装Eclipse插件ADT,<br>安装包地址为：<a rel="nofollow" href="http://dl.google.com/android/ADT-8.0.1.zip"  >http://dl.google.com/android/ADT-8.0.1.zip</a><br>在线安装地址：<a rel="nofollow" href="https://dl-ssl.google.com/android/eclipse/"  >https://dl-ssl.google.com/android/eclipse/</a><br>来源：<a rel="nofollow" href="http://blog.163.com/"  >ttp://developer.android.com/sdk/eclipse-adt.html</a></p>  <p style="TEXT-INDENT: 2em;"  >2.ADT插件安装好之后，下载我已经打包好的<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a> 2.3（gingerbread）的<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >java</a>源代码压缩包：<br>下载地址：<a rel="nofollow" href="http://lizongbo.googlecode.com/files/android_gingerbread_javasrc.zip"  >http://lizongbo.googlecode.com/files/android_gingerbread_javasrc.zip</a><br>来源：<a rel="nofollow" href="http://code.google.com/p/lizongbo/downloads/list"  ><font color="#ff0000"  >http://code.google.com/p/lizongbo/downloads/list</font></a><br>下载后复制到E:\<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >Java</a>\<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>\javasrc。</p>  <p style="TEXT-INDENT: 2em;"  >3.<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>的<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >Java</a>源代码压缩包下载好之后，在Eclipse中设置好<a title="Posts tagged with SDK" rel="nofollow" href="http://618119.com/tag/sdk"  >SDK</a>配置：<br>操作步骤为：主菜单-&gt;Window–&gt;Preferences–&gt;选择<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>，<a title="Posts tagged with SDK" rel="nofollow" href="http://618119.com/tag/sdk"  >SDK</a> Location设置为：E:\<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >Java</a>\<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>\<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>-<a title="Posts tagged with SDK" rel="nofollow" href="http://618119.com/tag/sdk"  >sdk</a>-windows,然后点右下角的Apply来生效。</p>  <p style="TEXT-INDENT: 2em;"  >4.开始进行关联<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>的源代码，在Eclipse中新建一个<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>工程，选中工程，主菜单 –&gt;Project–&gt;Properties–&gt;选择<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>，Project Build Target选中<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a> 2.3。<br>然后再点左边的“<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >Java</a> Build Path”，切换到 Libraries 面板，展开 Android2.3 这个lib，点击<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>.jar的<a title="Posts tagged with Source" rel="nofollow" href="http://618119.com/tag/source"  >Source</a> attachment，再点Edit.在对话框中点“External File”,选择E:/<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >Java</a>/<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>/javasrc/android_gingerbread_javasrc.zip,点OK进行确认。这样就把<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>的<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >java</a>代码关联好了。</p>  <p style="TEXT-INDENT: 2em;"  >5.在同一个工程中，选中工程，主菜单–&gt;Project–&gt;Properties–&gt;选择 <a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>，Project Build Target分别选择Android1.5，Android1.6，Android2.01,Android2.1- update1，Android2.2，按上面第四步的操作重复设置关联。<br>以后在任何<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>工程里按住Ctrl用鼠标点击<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >Java</a>类名都可以浏览到对应的<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >java</a>源代码。<br><a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>各个版本对应的源代码为：<br>Android1.5对应android_cupcake_javasrc.zip<br>Android1.6对应android_donut_javasrc.zip<br>Android2.01和Android2.1-update1对应的是android_eclair_javasrc.zip<br>Android2.2对应android_froyo_javasrc.zip<br>Android2.3对应android_gingerbread_javasrc.zip</p>  <p style="TEXT-INDENT: 2em;"  >6.在Eclipse配置好源代码关联之后之后的信息会存储在：<br>E:\lizongbo\workspacenew\.metadata\.plugins\org.eclipse.core.resources\.root\.indexes\properties.index<br>E:\lizongbo\workspacenew\.metadata\.plugins\org.eclipse.jdt.core\variablesAndContainers.dat</p>  <p style="TEXT-INDENT: 2em;"  >同时记录<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>的<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >java</a>源代码压缩包制作方法如下：<br>1.先在远程的Ubuntu Linux服务器(是Linode VPS)上安装以下组件(JDK1.6已经安装好了)：<br>sudo apt-get install <a title="Posts tagged with git" rel="nofollow" href="http://618119.com/tag/git"  >git</a>-core gnupg flex bison gperf libsdl-dev libesd0-dev libwxgtk2.6-dev build-essential zip curl libncurses5-dev zlib1g-dev<br>信息来自<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>官方：<a rel="nofollow" href="http://source.android.com/source/download.html"  >http://source.android.com/source/download.html</a><br>2.运行 sudo apt-get install lib32readline5-dev<br>3.安装Repo脚本：<br>我懒得配PATH了，于是直接安装到了/usr/local/bin。<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:~/bin# cd /usr/local/bin<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:/usr/local/bin# ls<br>geoip-lookup<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:/usr/local/bin# curl <a rel="nofollow" href="http://android.git.kernel.org/repo"  >http://android.git.kernel.org/repo</a> &gt;/usr/local/bin/repo<br>% Total&nbsp;&nbsp;&nbsp; % Received % Xferd&nbsp; Average Speed&nbsp;&nbsp; Time&nbsp;&nbsp;&nbsp; Time&nbsp;&nbsp;&nbsp;&nbsp; Time&nbsp; Current<br>Dload&nbsp; Upload&nbsp;&nbsp; Total&nbsp;&nbsp; Spent&nbsp;&nbsp;&nbsp; Left&nbsp; Speed<br>100 17412&nbsp; 100 17412&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 27517&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 –:–:– –:–:– –:–:– 31148<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:/usr/local/bin# chmod a+x /usr/local/bin/repo<br>注意在下载该脚本的时候，可能会遇到服务器出错，下载的内容不对，运行命令的时候会提示错误“syntax error near unexpected token `newline’”。<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:/usr/local/bin# repo init -u <a rel="nofollow" href="http://blog.163.com/"  >git://android.git.kernel.org/platform/manifest.git</a> -b cupcake<br>/usr/local/bin/repo: line 1: syntax error near unexpected token `newline’<br>/usr/local/bin/repo: line 1: `&lt;!DOCTYPE HTML PUBLIC “-//IETF//DTD HTML 2.0//EN”&gt;’<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:/usr/local/bin# more repo<br>&lt;!DOCTYPE HTML PUBLIC “-//IETF//DTD HTML 2.0//EN”&gt;<br>&lt;html&gt;&lt;head&gt;<br>&lt;title&gt;500 Internal Server Error&lt;/title&gt;<br>&lt;/head&gt;&lt;body&gt;<br>&lt;h1&gt;Internal Server Error&lt;/h1&gt;<br>&lt;p&gt;The server encountered an internal error or<br>misconfiguration and was unable to complete<br>your request.&lt;/p&gt;<br>&lt;p&gt;Please contact the server administrator,<br><a rel="nofollow" href="mailto:webmaster@kernel.org"  >webmaster@kernel.org</a> and inform them of the time the error occurred,<br>and anything you might have done that may have<br>caused the error.&lt;/p&gt;<br>&lt;p&gt;More information about this error may be available<br>in the server error log.&lt;/p&gt;<br>&lt;/body&gt;&lt;/html&gt;<br>从内容看是服务器出错了，因此需要重新下载脚本.<br>4.建立mydroid目录，按代码分支下载对应版本的<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>完整的源代码，比如下载Android2.3的代码：<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:~/mydroid# mkdir gingerbread<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:~/mydroid# cd gingerbread/<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:~/mydroid/gingerbread# repo init -u <a rel="nofollow" href="http://blog.163.com/"  >git://android.git.kernel.org/platform/manifest.git</a> -b gingerbread<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:~/mydroid/gingerbread# repo sync<br>Android1.5的代码分支：<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:~/mydroid/cupcake# repo init -u <a rel="nofollow" href="http://blog.163.com/"  >git://android.git.kernel.org/platform/manifest.git</a> -b cupcake<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:~/mydroid/cupcake# repo sync<br>Android1.6的代码分支：<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:~/mydroid/donut# repo init -u <a rel="nofollow" href="http://blog.163.com/"  >git://android.git.kernel.org/platform/manifest.git</a> -b donut<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:~/mydroid/donut# repo sync<br>Android2.0.1和2.1的代码分支：<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:~/mydroid/eclair# repo init -u <a rel="nofollow" href="http://blog.163.com/"  >git://android.git.kernel.org/platform/manifest.git</a> -b eclair<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:~/mydroid/eclair# repo sync<br>Android2.2的代码分支：<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:~/mydroid/froyo# repo init -u <a rel="nofollow" href="http://blog.163.com/"  >git://android.git.kernel.org/platform/manifest.git</a> -b froyo<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:~/mydroid/froyo# repo sync</p>  <p style="TEXT-INDENT: 2em;"  >如果遇到代码下载速度太慢，可以指定hosts，hosts配置不住为：<br><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:~/mydroid/gingerbread/.repo/projects# nslookup<br>&gt; <a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>.<a title="Posts tagged with git" rel="nofollow" href="http://618119.com/tag/git"  >git</a>.kernel.org<br>Server:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 72.14.188.5<br>Address:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 72.14.188.5#53<br>Non-authoritative answer:<br><a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>.<a title="Posts tagged with git" rel="nofollow" href="http://618119.com/tag/git"  >git</a>.kernel.org&nbsp; canonical name = <a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>.<a title="Posts tagged with git" rel="nofollow" href="http://618119.com/tag/git"  >git</a>.geo.kernel.org.<br><a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>.<a title="Posts tagged with git" rel="nofollow" href="http://618119.com/tag/git"  >git</a>.geo.kernel.org&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; canonical name = <a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>.<a title="Posts tagged with git" rel="nofollow" href="http://618119.com/tag/git"  >git</a>.us.kernel.org.<br>Name:&nbsp;&nbsp; <a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>.<a title="Posts tagged with git" rel="nofollow" href="http://618119.com/tag/git"  >git</a>.us.kernel.org<br>Address: 149.20.20.141<br>Name:&nbsp;&nbsp; <a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>.<a title="Posts tagged with git" rel="nofollow" href="http://618119.com/tag/git"  >git</a>.us.kernel.org<br>Address: 204.152.191.45<br>&gt; exit</p>  <p style="TEXT-INDENT: 2em;"  ><a rel="nofollow" href="mailto:root@lizongbo.com"  >root@lizongbo.com</a>:/etc# vi hosts<br>204.152.191.45 <a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>.<a title="Posts tagged with git" rel="nofollow" href="http://618119.com/tag/git"  >git</a>.us.kernel.org<br>204.152.191.45 <a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>.<a title="Posts tagged with git" rel="nofollow" href="http://618119.com/tag/git"  >git</a>.kernel.org</p>  <p style="TEXT-INDENT: 2em;"  >网上有文章介绍使用提取<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >java</a>文件并打包的pytho脚本可以生成源代码包，参考：</p>  <p style="TEXT-INDENT: 2em;"  ><a rel="nofollow" href="http://android.opensourceror.org/2010/01/18/android-source/"  >http://android.opensourceror.org/2010/01/18/android-source/</a></p>  <p style="TEXT-INDENT: 2em;"  >和 <a rel="nofollow" href="http://blog.michael-forster.de/2008/12/view-android-source-code-in-eclipse.html"  >http://blog.michael-forster.de/2008/12/view-android-source-code-in-eclipse.html</a><br>Python下载地址：<a rel="nofollow" href="http://www.python.org/ftp/python/2.6.6/python-2.6.6.msi"  >http://www.python.org/ftp/python/2.6.6/python-2.6.6.msi</a><br>但是在Android2.2和Android2.3的代码里，<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a>写一了一些mock的类，比如<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >android</a>.webkit.WebView，使用python脚本打包的话，会把mock的源代码打进去，而不是真正的源代码，<br>因此我根据python脚本写了个<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >java</a>程序来提取<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >java</a>文件过滤冗余的<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >java</a>代码并打包。<br>生成的<a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >java</a>源代码压缩：android_cupcake_javasrc.zip，android_donut_javasrc.zip，android_eclair_javasrc.zip，android_froyo_javasrc.zip，android_gingerbread_javasrc.zip<br>目前在code.google.com上传了android_gingerbread_javasrc.zip，欢迎下载。</p>  <p style="TEXT-INDENT: 2em;"  >以下是各版本的<a title="Posts tagged with Android" rel="nofollow" href="http://618119.com/tag/android"  >Android</a> <a title="Posts tagged with Java" rel="nofollow" href="http://618119.com/tag/java"  >java</a> <a title="Posts tagged with Source" rel="nofollow" href="http://618119.com/tag/source"  >source</a> 下载地址：</p>  <p style="TEXT-INDENT: 2em;"  >Android2.3: <a rel="nofollow" href="http://lizongbo.googlecode.com/files/android_gingerbread_javasrc.zip"  >http://lizongbo.googlecode.com/files/android_gingerbread_javasrc.zip</a></p>  <p style="TEXT-INDENT: 2em;"  >Android1.5: <a rel="nofollow" href="http://lizongbo.googlecode.com/files/android_cupcake_javasrc.zip"  >http://lizongbo.googlecode.com/files/android_cupcake_javasrc.zip</a><br>Android1.6: <a rel="nofollow" href="http://lizongbo.googlecode.com/files/android_donut_javasrc.zip"  >http://lizongbo.googlecode.com/files/android_donut_javasrc.zip</a><br>Android2.1: <a rel="nofollow" href="http://lizongbo.googlecode.com/files/android_eclair_javasrc.zip"  >http://lizongbo.googlecode.com/files/android_eclair_javasrc.zip</a><br>Android2.2: <a rel="nofollow" href="http://lizongbo.googlecode.com/files/android_froyo_javasrc.zip"  >http://lizongbo.googlecode.com/files/android_froyo_javasrc.zip</a></p>  <p style="TEXT-INDENT: 2em;"  >新年快乐！</p>
</body></html>