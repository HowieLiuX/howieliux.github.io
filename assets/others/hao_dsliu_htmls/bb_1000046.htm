<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf8"><title>163 blogs的博客：Boost – is_same</title>
<style type="text/css">
a{color: #000000;text-decoration : none;font-size: 10pt;}
a:hover {color: red;text-decoration : underline;}
.replyBox{padding:4px;border:1px solid #D8D8D8;}
</style></head><body><h2>Boost – is_same</h2>
<p align="right">发布时间：2014-5-30 17:59
<br>分类名称：Boost</p><br>
<p><span style="color:#8000ff;"   ><span style="font-size:10pt;"   ><span style="font-family:Courier New; background-color:white;"   >struct<span style="color:black;"   > integral_c_tag<br><span style="color:navy;"   ><strong>{</strong><span style="color:black;"   >
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#8000ff;"   >static<span style="color:black;"   >
<span style="color:#8000ff;"   >const<span style="color:black;"   >
<span style="color:#8000ff;"   >int<span style="color:black;"   > value <span style="color:navy;"   ><strong>=</strong><span style="color:black;"   >
<span style="color:#ff8000;"   >0<span style="color:navy;"   ><strong>;</strong><span style="color:black;"   >
<br><span style="color:navy;"   ><strong>};</strong><span style="color:black;"   ><br><br><span style="color:green;"   >// </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体; background-color:white;"   >常量基类</span></span><span style="color:green;"   ><span style="font-size:10pt;"   ><span style="font-family:Courier New; background-color:white;"   ><br><span style="color:#8000ff;"   >template<span style="color:navy;"   ><strong>&lt;</strong><span style="color:black;"   >
<span style="color:#8000ff;"   >typename<span style="color:black;"   > T<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   > T N <span style="color:navy;"   ><strong>&gt;</strong><span style="color:black;"   ><br><span style="color:#8000ff;"   >struct<span style="color:black;"   > integral_c<br><span style="color:navy;"   ><strong>{</strong><span style="color:black;"   ><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#8000ff;"   >static<span style="color:black;"   >
<span style="color:#8000ff;"   >const<span style="color:black;"   > T value <span style="color:navy;"   ><strong>=</strong><span style="color:black;"   > N<span style="color:navy;"   ><strong>;</strong><span style="color:black;"   >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:green;"   >// XXX::value </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体; background-color:white;"   >等于</span><span style="font-family:Courier New; background-color:white;"   >   N<br><span style="color:black;"   >&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;"   ><strong>typedef</strong><span style="color:black;"   > integral_c type<span style="color:navy;"   ><strong>;</strong><span style="color:black;"   >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:green;"   >// XXX::type  </span></span></span></span></span></span></span><span style="font-family:宋体; background-color:white;"   >自身的</span><span style="font-family:Courier New; background-color:white;"   > type<br><span style="color:black;"   >&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;"   ><strong>typedef</strong><span style="color:black;"   > T value_type<span style="color:navy;"   ><strong>;</strong><span style="color:black;"   >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:green;"   >// XXX::value </span></span></span></span></span></span></span><span style="font-family:宋体; background-color:white;"   >的类型，一般可表示为：</span><span style="font-family:Courier New; background-color:white;"   >XXX::value_type var = XXX::value;<br><span style="color:black;"   >&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;"   ><strong>typedef</strong><span style="color:black;"   > integral_c_tag tag<span style="color:navy;"   ><strong>;</strong><span style="color:black;"   >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:green;"   >// </span></span></span></span></span></span></span><span style="font-family:宋体; background-color:white;"   >目前未知</span><span style="font-family:Courier New; background-color:white;"   >   XXX::tag::value <br><span style="color:black;"   ><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;"   ><strong>typedef</strong><span style="color:black;"   > integral_c<span style="color:navy;"   ><strong>&lt;</strong><span style="color:black;"   > T<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   >
<span style="color:blue;"   ><strong>static_cast<span style="color:navy;"   >&lt;</span></strong><span style="color:black;"   >T<span style="color:navy;"   ><strong>&gt;((</strong><span style="color:black;"   >value <span style="color:navy;"   ><strong>+</strong><span style="color:black;"   >
<span style="color:#ff8000;"   >1<span style="color:navy;"   ><strong>))</strong><span style="color:black;"   >
<span style="color:navy;"   ><strong>&gt;</strong><span style="color:black;"   > next<span style="color:navy;"   ><strong>;</strong><span style="color:black;"   >
<span style="color:green;"   >// </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体; background-color:white;"   >类型为：</span><span style="font-family:Courier New; background-color:white;"   >next,  next::value </span><span style="font-family:宋体; background-color:white;"   >比</span><span style="font-family:Courier New; background-color:white;"   >integral_c::value</span><span style="font-family:宋体; background-color:white;"   >大</span><span style="font-family:Courier New; background-color:white;"   >1;<br><span style="color:black;"   >&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;"   ><strong>typedef</strong><span style="color:black;"   > integral_c<span style="color:navy;"   ><strong>&lt;</strong><span style="color:black;"   > T<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   >
<span style="color:blue;"   ><strong>static_cast<span style="color:navy;"   >&lt;</span></strong><span style="color:black;"   >T<span style="color:navy;"   ><strong>&gt;((</strong><span style="color:black;"   >value <span style="color:navy;"   ><strong>-</strong><span style="color:black;"   >
<span style="color:#ff8000;"   >1<span style="color:navy;"   ><strong>))</strong><span style="color:black;"   >
<span style="color:navy;"   ><strong>&gt;</strong><span style="color:black;"   > prior<span style="color:navy;"   ><strong>;</strong><span style="color:black;"   >
<span style="color:green;"   >// </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体; background-color:white;"   >类型为：</span><span style="font-family:Courier New; background-color:white;"   >prior, prior::value</span><span style="font-family:宋体; background-color:white;"   >比</span><span style="font-family:Courier New; background-color:white;"   >integral_c::value</span><span style="font-family:宋体; background-color:white;"   >小</span><span style="font-family:Courier New; background-color:white;"   >1;<br><span style="color:black;"   >&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;"   ><strong>operator</strong><span style="color:black;"   > T<span style="color:navy;"   ><strong>()</strong><span style="color:black;"   >
<span style="color:#8000ff;"   >const<span style="color:black;"   >
<span style="color:navy;"   ><strong>{</strong><span style="color:black;"   >
<span style="color:blue;"   ><strong>return</strong><span style="color:black;"   >
<span style="color:blue;"   ><strong>static_cast<span style="color:navy;"   >&lt;</span></strong><span style="color:black;"   >T<span style="color:navy;"   ><strong>&gt;(<span style="color:blue;"   >this<span style="color:navy;"   >-&gt;</span></span></strong><span style="color:black;"   >value<span style="color:navy;"   ><strong>);</strong><span style="color:black;"   >
<span style="color:navy;"   ><strong>}</strong><span style="color:black;"   >
<span style="color:green;"   >// </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体; background-color:white;"   >重载运算符</span><span style="font-family:Courier New; background-color:white;"   >(), </span><span style="font-family:宋体; background-color:white;"   >返回</span><span style="font-family:Courier New; background-color:white;"   >value</span><span style="font-family:宋体; background-color:white;"   >。</span><span style="font-family:Courier New; background-color:white;"   ><br><span style="color:navy;"   ><strong>};</strong><span style="color:black;"   ><br><br><span style="color:green;"   >// </span></span></span></span><span style="font-family:宋体; background-color:white;"   >静态变量</span><span style="font-family:Courier New; background-color:white;"   ><br><span style="color:#8000ff;"   >template<span style="color:navy;"   ><strong>&lt;</strong><span style="color:black;"   >
<span style="color:#8000ff;"   >typename<span style="color:black;"   > T<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   > T N <span style="color:navy;"   ><strong>&gt;</strong><span style="color:black;"   ><br>T <span style="color:#8000ff;"   >const<span style="color:black;"   > integral_c<span style="color:navy;"   ><strong>&lt;</strong><span style="color:black;"   > T<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   > N <span style="color:navy;"   ><strong>&gt;::</strong><span style="color:black;"   >value<span style="color:navy;"   ><strong>;</strong><span style="color:black;"   ><br><br><span style="color:green;"   >// </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体; background-color:white;"   >原函数转发，将</span><span style="font-family:Courier New; background-color:white;"   > T and val </span><span style="font-family:宋体; background-color:white;"   >转发给</span><span style="font-family:Courier New; background-color:white;"   > integral_c<br><span style="color:#8000ff;"   >template<span style="color:black;"   >
<span style="color:navy;"   ><strong>&lt;</strong><span style="color:#8000ff;"   >class<span style="color:black;"   > T<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   > T val<span style="color:navy;"   ><strong>&gt;</strong><span style="color:black;"   ><br><span style="color:#8000ff;"   >struct<span style="color:black;"   > integral_constant <span style="color:navy;"   ><strong>:</strong><span style="color:black;"   >
<span style="color:#8000ff;"   >public<span style="color:black;"   > integral_c<span style="color:navy;"   ><strong>&lt;</strong><span style="color:black;"   >T<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   > val<span style="color:navy;"   ><strong>&gt;</strong><span style="color:black;"   ><br><span style="color:navy;"   ><strong>{</strong><span style="color:black;"   ><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;"   ><strong>typedef</strong><span style="color:black;"   > integral_constant<span style="color:navy;"   ><strong>&lt;</strong><span style="color:black;"   >T<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   >val<span style="color:navy;"   ><strong>&gt;</strong><span style="color:black;"   > type<span style="color:navy;"   ><strong>;</strong><span style="color:black;"   ><br><span style="color:navy;"   ><strong>};</strong><span style="color:black;"   ><br><br><span style="color:green;"   >// </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体; background-color:white;"   >原函数转发，将</span><span style="font-family:Courier New; background-color:white;"   > bool and false </span><span style="font-family:宋体; background-color:white;"   >转发给</span><span style="font-family:Courier New; background-color:white;"   > integral_constant<br>// </span><span style="font-family:宋体; background-color:white;"   >定义</span><span style="font-family:Courier New; background-color:white;"   > T</span><span style="font-family:宋体; background-color:white;"   >，</span><span style="font-family:Courier New; background-color:white;"   >U</span><span style="font-family:宋体; background-color:white;"   >模板，如果俩个类型不同的，将匹配这个模板，最终的父类</span><span style="font-family:Courier New; background-color:white;"   >integral_c::value</span><span style="font-family:宋体; background-color:white;"   >等于</span><span style="font-family:Courier New; background-color:white;"   >false</span><span style="font-family:宋体; background-color:white;"   >。</span><span style="font-family:Courier New; background-color:white;"   ><br><span style="color:#8000ff;"   >template<span style="color:navy;"   ><strong>&lt;</strong><span style="color:black;"   >
<span style="color:#8000ff;"   >typename<span style="color:black;"   > T<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   >
<span style="color:#8000ff;"   >typename<span style="color:black;"   > U <span style="color:navy;"   ><strong>&gt;</strong><span style="color:black;"   ><br><span style="color:#8000ff;"   >struct<span style="color:black;"   > is_same <span style="color:navy;"   ><strong>:</strong><span style="color:black;"   >
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#8000ff;"   >public<span style="color:black;"   > integral_constant<span style="color:navy;"   ><strong>&lt;</strong><span style="color:#8000ff;"   >bool<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   >
<span style="color:blue;"   ><strong>false<span style="color:navy;"   >&gt;</span></strong><span style="color:black;"   >
<br><span style="color:navy;"   ><strong>{</strong><span style="color:black;"   >
<br><br><span style="color:navy;"   ><strong>};</strong><span style="color:black;"   ><br><br><span style="color:green;"   >// </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体; background-color:white;"   >偏特化</span><span style="font-family:Courier New; background-color:white;"   ><br>// U</span><span style="font-family:宋体; background-color:white;"   >被偏特化为</span><span style="font-family:Courier New; background-color:white;"   >T</span><span style="font-family:宋体; background-color:white;"   >，如果俩个相同，则匹配到这个模板，最终的父类</span><span style="font-family:Courier New; background-color:white;"   >integral_c::value</span><span style="font-family:宋体; background-color:white;"   >等于</span><span style="font-family:Courier New; background-color:white;"   >true</span><span style="font-family:宋体; background-color:white;"   >。</span><span style="font-family:Courier New; background-color:white;"   ><br><span style="color:#8000ff;"   >template<span style="color:navy;"   ><strong>&lt;</strong><span style="color:black;"   >
<span style="color:#8000ff;"   >typename<span style="color:black;"   > T <span style="color:navy;"   ><strong>&gt;</strong><span style="color:black;"   >
<br><span style="color:#8000ff;"   >struct<span style="color:black;"   > is_same<span style="color:navy;"   ><strong>&lt;</strong><span style="color:black;"   > T<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   >T <span style="color:navy;"   ><strong>&gt;</strong><span style="color:black;"   >
<span style="color:navy;"   ><strong>:</strong><span style="color:black;"   >
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#8000ff;"   >public<span style="color:black;"   > integral_constant<span style="color:navy;"   ><strong>&lt;</strong><span style="color:#8000ff;"   >bool<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   >
<span style="color:blue;"   ><strong>true<span style="color:navy;"   >&gt;</span></strong><span style="color:black;"   >
<br><span style="color:navy;"   ><strong>{</strong><span style="color:black;"   ><br><br><span style="color:navy;"   ><strong>};</strong><span style="color:black;"   ><br><br><span style="color:#8000ff;"   >int<span style="color:black;"   > main<span style="color:navy;"   ><strong>(</strong><span style="color:#8000ff;"   >int<span style="color:black;"   > argc<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   >
<span style="color:#8000ff;"   >char<span style="color:navy;"   ><strong>*</strong><span style="color:black;"   > argv<span style="color:navy;"   ><strong>[])</strong><span style="color:black;"   ><br><span style="color:navy;"   ><strong>{</strong><span style="color:black;"   ><br>&nbsp;&nbsp;&nbsp;&nbsp;is_same<span style="color:navy;"   ><strong>&lt;</strong><span style="color:#8000ff;"   >int<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   >
<span style="color:#8000ff;"   >int<span style="color:navy;"   ><strong>*&gt;::</strong><span style="color:black;"   >value_type bS<span style="color:navy;"   ><strong>;</strong><span style="color:black;"   >
<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;bS <span style="color:navy;"   ><strong>=</strong><span style="color:black;"   > is_same<span style="color:navy;"   ><strong>&lt;</strong><span style="color:#8000ff;"   >int<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   >
<span style="color:#8000ff;"   >int<span style="color:navy;"   ><strong>*&gt;::</strong><span style="color:black;"   >value<span style="color:navy;"   ><strong>;</strong><span style="color:black;"   ><br>&nbsp;&nbsp;&nbsp;&nbsp;bS <span style="color:navy;"   ><strong>=</strong><span style="color:black;"   > is_same<span style="color:navy;"   ><strong>&lt;</strong><span style="color:#8000ff;"   >int<span style="color:navy;"   ><strong>,</strong><span style="color:black;"   >
<span style="color:#8000ff;"   >int<span style="color:navy;"   ><strong>&gt;::</strong><span style="color:black;"   >value<span style="color:navy;"   ><strong>;</strong><span style="color:black;"   ><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;"   ><strong>return</strong><span style="color:black;"   >
<span style="color:#ff8000;"   >0<span style="color:navy;"   ><strong>;</strong><span style="color:black;"   ><br><span style="color:navy;"   ><strong>}</strong></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-size:12pt;"   ><br></span></span></span></p>
</body></html>