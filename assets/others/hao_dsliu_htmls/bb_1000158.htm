<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf8"><title>163 blogs的博客：四.实模式与保护模式切换实例</title>
<style type="text/css">
a{color: #000000;text-decoration : none;font-size: 10pt;}
a:hover {color: red;text-decoration : underline;}
.replyBox{padding:4px;border:1px solid #D8D8D8;}
</style></head><body><h2>四.实模式与保护模式切换实例</h2>
<p align="right">发布时间：2012-5-20 16:53
<br>分类名称：80x86保护模式</p><br>
<p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >本文介绍两个实现实模式与保护模式切换的实例，通过他们说明如何实现实模式与保护模式的切换，</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >也说明保护模式下的</span><span style="font-family:Times New Roman;"  >80386</span><span style="font-family:宋体;"  >及其编程。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:22pt;"  ><strong>&lt;一&gt;演示实模式和保护模式切换的实例(实例一) </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >实例一的逻辑功能是，以十六进制数的形式显示从内存地址</span><span style="font-family:Times New Roman;"  >110000H</span><span style="font-family:宋体;"  >开始的</span><span style="font-family:Times New Roman;"  >256</span><span style="font-family:宋体;"  >个字节的值。本实例指</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >定该内存区域的目的仅仅是想说明切换到保护模式的必要性，因为在实模式下不能访问该指定内存区</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >域，只有在保护模式下才能访问到该指定区域。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >本实例的具体实现步骤是：</span><span style="font-family:Times New Roman;"  >(1)</span><span style="font-family:宋体;"  >作切换到保护方式的准备；</span><span style="font-family:Times New Roman;"  >(2)</span><span style="font-family:宋体;"  >切换到保护方式；</span><span style="font-family:Times New Roman;"  >(3)</span><span style="font-family:宋体;"  >把指定内存区域</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >的内容传送到位于常规内存的缓冲区中；</span><span style="font-family:Times New Roman;"  >(4)</span><span style="font-family:宋体;"  >切换回实模式；</span><span style="font-family:Times New Roman;"  >(5)</span><span style="font-family:宋体;"  >显示缓冲区内容。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>1.包含文件 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >386</span><span style="font-family:宋体;"  >保护模式汇编语言程序用到的包含文件如下所示，该包含文件在后面的程序中还要用到。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >名称</span></em><span style="font-family:Times New Roman;"  ><em>:386SCD.INC</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >功能</span><span style="font-family:Times New Roman;"  >:</span><span style="font-family:宋体;"  >符号常量等的定义</span></em><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;IFNDEF         __386SCD_INC</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;__386SCD_INC   EQU     1</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:red; font-family:Times New Roman; font-size:10pt;"  >.<span style="color:#009999;"  >386P<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >打开</span><span style="font-family:Times New Roman;"  >A20</span><span style="font-family:宋体;"  >地址线</span></em><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#009900; font-family:Times New Roman; font-size:10pt;"  >EnableA20<span style="color:black;"  >     <span style="color:#009999;"  >MACRO<span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >push<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >in<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >92h<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >or<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >00000010b<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >out<span style="color:black;"  >      <span style="color:#000099;"  >92h<span style="color:red;"  >,<span style="color:fuchsia;"  >al<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >pop<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >ENDM<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >关闭</span><span style="font-family:Times New Roman;"  >A20</span><span style="font-family:宋体;"  >地址线</span></em><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#009900; font-family:Times New Roman; font-size:10pt;"  >DisableA20<span style="color:black;"  >     <span style="color:#009999;"  >MACRO<span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >push<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >in<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >92h<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >and<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >11111101b<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >out<span style="color:black;"  >      <span style="color:#000099;"  >92h<span style="color:red;"  >,<span style="color:fuchsia;"  >al<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >pop<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >ENDM<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;16</span><span style="font-family:宋体;"  >位偏移的段间直接转移指令的宏定义</span><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >在</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位代码段中使用</span></em><span style="font-family:Times New Roman;"  ><em>)</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#009900; font-family:Times New Roman; font-size:10pt;"  >JUMP16<span style="color:black;"  >     <span style="color:#009999;"  >MACRO<span style="color:black;"  >   Selector<span style="color:red;"  >,<span style="color:#009999;"  >Offset<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DB<span style="color:black;"  >       <span style="color:#000099;"  >0eah<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>操作码</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#009999;"  >Offset<span style="color:black;"  >         <span style="color:#999999;"  ><em>;16</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位偏移量</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >      Selector <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>段值或段选择子</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >ENDM<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;32</span><span style="font-family:宋体;"  >位偏移的段间直接转移指令的宏定义</span><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >在</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位代码段中使用</span></em><span style="font-family:Times New Roman;"  ><em>)</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>COMMENT &lt;JUMP32&gt; </em></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>JUMP32          MACRO   Selector,Offset </em></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >                DB      0eah     ;</span><span style="font-family:宋体;"  >操作码</span><span style="font-family:Times New Roman;"  >     </span></em></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>                DD      OFFSET </em></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >                DW      Selector ;</span><span style="font-family:宋体;"  >段值或段选择子</span><span style="font-family:Times New Roman;"  >     </span></em></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>                ENDM </em></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>&lt;</em><span style="color:#009900;"  >JUMP32<span style="color:red;"  >&gt;<span style="color:black;"  >      </span></span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;-------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#009900; font-family:Times New Roman; font-size:10pt;"  >JUMP32<span style="color:black;"  >     <span style="color:#009999;"  >MACRO<span style="color:black;"  >   Selector<span style="color:red;"  >,<span style="color:#009999;"  >Offset<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DB<span style="color:black;"  >       <span style="color:#000099;"  >0eah<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>操作码</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >DW<span style="color:black;"  >      <span style="color:#009999;"  >OFFSET<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >DW<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >      Selector <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>段值或段选择子</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >ENDM<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;16</span><span style="font-family:宋体;"  >位偏移的段间调用指令的宏定义</span><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >在</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位代码段中使用</span></em><span style="font-family:Times New Roman;"  ><em>)</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#009900; font-family:Times New Roman; font-size:10pt;"  >CALL16<span style="color:black;"  >     <span style="color:#009999;"  >MACRO<span style="color:black;"  >   Selector<span style="color:red;"  >,<span style="color:#009999;"  >Offset<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DB<span style="color:black;"  >       <span style="color:#000099;"  >9ah<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>操作码</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#009999;"  >Offset<span style="color:black;"  >         <span style="color:#999999;"  ><em>;16</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位偏移量</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >      Selector <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>段值或段选择子</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >ENDM<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;32</span><span style="font-family:宋体;"  >位偏移的段间调用指令的宏定义</span><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >在</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位代码段中使用</span></em><span style="font-family:Times New Roman;"  ><em>)</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>COMMENT &lt;CALL32&gt; </em></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>CALL32          MACRO   Selector,Offset </em></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >                DB      9ah      ;</span><span style="font-family:宋体;"  >操作码</span><span style="font-family:Times New Roman;"  >     </span></em></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>                DD      Offset </em></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >                DW      Selector ;</span><span style="font-family:宋体;"  >段值或段选择子</span><span style="font-family:Times New Roman;"  >     </span></em></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>                ENDM </em></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>&lt;</em><span style="color:#009900;"  >CALL32<span style="color:red;"  >&gt;<span style="color:black;"  >      </span></span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;-------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#009900; font-family:Times New Roman; font-size:10pt;"  >CALL32<span style="color:black;"  >     <span style="color:#009999;"  >MACRO<span style="color:black;"  >   Selector<span style="color:red;"  >,<span style="color:#009999;"  >Offset<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DB<span style="color:black;"  >       <span style="color:#000099;"  >9ah<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>操作码</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >DW<span style="color:black;"  >      <span style="color:#009999;"  >Offset<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >DW<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >      Selector <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>段值或段选择子</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >ENDM<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >存储段描述符结构类型定义</span></em><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >Desc            <span style="color:#009999;"  >STRUC<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >LimitL          <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>段界限</em></span><span style="color:#999999; font-family:Times New Roman;"  ><em>(BIT0-15)</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >BaseL           <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>段基地址</em></span><span style="color:#999999; font-family:Times New Roman;"  ><em>(BIT0-15)</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >BaseM           <span style="color:#009999;"  >DB<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>段基地址</em></span><span style="color:#999999; font-family:Times New Roman;"  ><em>(BIT16-23)</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Attributes      <span style="color:#009999;"  >DB<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>段属性</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >LimitH          <span style="color:#009999;"  >DB<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>段界限</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >(BIT16-19)(</span><span style="font-family:宋体;"  >含段属性的高</span><span style="font-family:Times New Roman;"  >4</span><span style="font-family:宋体;"  >位</span></em><span style="font-family:Times New Roman;"  ><em>)</em><span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >BaseH           <span style="color:#009999;"  >DB<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>段基地址</em></span><span style="color:#999999; font-family:Times New Roman;"  ><em>(BIT24-31)</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >Desc            <span style="color:#009999;"  >ENDS<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >门描述符结构类型定义</span></em><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >Gate            <span style="color:#009999;"  >STRUC<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >OffsetL         <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;32</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位偏移的低</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Selector        <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>选择子</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DCount          <span style="color:#009999;"  >DB<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>双字计数</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >GType           <span style="color:#009999;"  >DB<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>类型</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >OffsetH         <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;32</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位偏移的高</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >Gate            <span style="color:#009999;"  >ENDS<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >伪描述符结构类型定义</span><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >用于装入全局或中断描述符表寄存器</span></em><span style="font-family:Times New Roman;"  ><em>)</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >PDesc           <span style="color:#009999;"  >STRUC<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Limit           <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;16</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位界限</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Base            <span style="color:#009999;"  >DD<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;32</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位基地址</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >PDesc           <span style="color:#009999;"  >ENDS<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >任务状态段结构类型定义</span></em><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TSS             <span style="color:#009999;"  >STRUC<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >TRLink          <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>链接字段</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>不使用</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span></em><span style="font-family:Times New Roman;"  ><em>0</em><span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >TRESP0          <span style="color:#009999;"  >DD<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;0</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>级堆栈指针</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >TRSS0           <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;0</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>级堆栈段寄存器</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>不使用</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span></em><span style="font-family:Times New Roman;"  ><em>0</em><span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >TRESP1          <span style="color:#009999;"  >DD<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;1</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>级堆栈指针</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >TRSS1           <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;1</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>级堆栈段寄存器</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>不使用</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span></em><span style="font-family:Times New Roman;"  ><em>0</em><span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >TRESP2          <span style="color:#009999;"  >DD<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;2</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>级堆栈指针</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >TRSS2           <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;2</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>级堆栈段寄存器</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>不使用</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span></em><span style="font-family:Times New Roman;"  ><em>0</em><span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TRCR3           <span style="color:#009999;"  >DD<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;CR3</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TREIP           <span style="color:#009999;"  >DD<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;EIP</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TREFlag         <span style="color:#009999;"  >DD<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;EFLAGS</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TREAX           <span style="color:#009999;"  >DD<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;EAX</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TRECX           <span style="color:#009999;"  >DD<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;ECX</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TREDX           <span style="color:#009999;"  >DD<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;EDX</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TREBX           <span style="color:#009999;"  >DD<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;EBX</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TRESP           <span style="color:#009999;"  >DD<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;ESP</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TREBP           <span style="color:#009999;"  >DD<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;EBP</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TRESI           <span style="color:#009999;"  >DD<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;ESI</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TREDI           <span style="color:#009999;"  >DD<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;EDI</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TRES            <span style="color:#009999;"  >DW<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;ES</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>不使用</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span></em><span style="font-family:Times New Roman;"  ><em>0</em><span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TRCS            <span style="color:#009999;"  >DW<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;CS</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>不使用</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span></em><span style="font-family:Times New Roman;"  ><em>0</em><span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TRSS            <span style="color:#009999;"  >DW<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;SS</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>不使用</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span></em><span style="font-family:Times New Roman;"  ><em>0</em><span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TRDS            <span style="color:#009999;"  >DW<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;DS</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>不使用</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span></em><span style="font-family:Times New Roman;"  ><em>0</em><span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TRFS            <span style="color:#009999;"  >DW<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;FS</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>不使用</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span></em><span style="font-family:Times New Roman;"  ><em>0</em><span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TRGS            <span style="color:#009999;"  >DW<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;GS</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>不使用</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span></em><span style="font-family:Times New Roman;"  ><em>0</em><span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TRLDTR          <span style="color:#009999;"  >DW<span style="color:black;"  >      <span style="color:#000099;"  >0<span style="color:black;"  >        <span style="color:#999999;"  ><em>;LDTR</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>不使用</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >置为</span></em><span style="font-family:Times New Roman;"  ><em>0</em><span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >TRTrip          <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>调试陷阱标志</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >只用位</span></em><span style="font-family:Times New Roman;"  ><em>0)</em><span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >TRIOMap         <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:red;"  >$+<span style="color:#000099;"  >2<span style="color:black;"  >          <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>指向</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >I/O</span><span style="font-family:宋体;"  >许可位图区的段内偏移</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >TSS             <span style="color:#009999;"  >ENDS<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >存储段描述符类型值说明</span></em><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >ATDR            <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >90h<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>存在的只读数据段类型值</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >ATDW            <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >92h<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>存在的可读写数据段属性值</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >ATDWA           <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >93h<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>存在的已访问可读写数据段类型值</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >ATCE            <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >98h<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>存在的只执行代码<span style="color:#999999;"  >段属性值</span></em></span><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >ATCER           <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >9ah<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>存在的可执行可读代码段属性值</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >ATCCO           <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >9ch<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>存在的只执行一致代码段属性值</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >ATCCOR          <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >9eh<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>存在的可执行可读一致代码段属性值</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >系统段描述符类型值说明</span></em><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >ATLDT           <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >82h<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>局部描述符表段类型值</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >ATTaskGate      <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >85h<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>任务门类型值</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >AT386TSS        <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >89h<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>可用</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >386</span><span style="font-family:宋体;"  >任务状态段类型值</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >AT386CGate      <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >8ch<span style="color:black;"  >         <span style="color:#999999;"  ><em>;386</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>调用门类型值</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >AT386IGate      <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >8eh<span style="color:black;"  >         <span style="color:#999999;"  ><em>;386</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>中断门类型值</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >AT386TGate      <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >8fh<span style="color:black;"  >         <span style="color:#999999;"  ><em>;386</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>陷阱门类型值</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;DPL</span><span style="font-family:宋体;"  >值说明</span></em><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >DPL0            <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >00h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;DPL=0</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >DPL1            <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >20h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;DPL=1</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >DPL2            <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >40h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;DPL=2</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >DPL3            <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >60h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;DPL=3</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;RPL</span><span style="font-family:宋体;"  >值说明</span></em><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >RPL0            <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >00h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;RPL=0</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >RPL1            <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >01h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;RPL=1</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >RPL2            <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >02h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;RPL=2</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >RPL3            <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >03h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;RPL=3</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;IOPL</span><span style="font-family:宋体;"  >值说明</span></em><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >IOPL0           <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >0000h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;IOPL=0</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >IOPL1           <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >1000h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;IOPL=1</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >IOPL2           <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >2000h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;IOPL=2</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >IOPL3           <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >3000h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;IOPL=3</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >其它常量值说明</span></em><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >D32             <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >40h<span style="color:black;"  >         <span style="color:#999999;"  ><em>;32</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位代码段标志</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >GL              <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >80h<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>段界限以</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >4K</span><span style="font-family:宋体;"  >为单位标志</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >TIL             <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >04h<span style="color:black;"  >         <span style="color:#999999;"  ><em>;TI=1(</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>局部描述符表标志</em></span><span style="color:#999999; font-family:Times New Roman;"  ><em>)</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >VMFL            <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >00020000h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;VMF=1</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >VMFLW           <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >0002h<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >IFL             <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >00000200h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;IF=1</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >RFL             <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >00010000h<span style="color:black;"  >         <span style="color:#999999;"  ><em>;RF=1(</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>重启动标志</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >为</span><span style="font-family:Times New Roman;"  >1</span><span style="font-family:宋体;"  >表示忽略调试故障</span></em><span style="font-family:Times New Roman;"  ><em>)</em><span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >RFLW            <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >0001h<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >NTL             <span style="color:#009999;"  >EQU<span style="color:black;"  >      <span style="color:#000099;"  >00004000h<span style="color:black;"  >        <span style="color:#999999;"  ><em>;NT=1</em><span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >分页机制使用的常量说明</span></em><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >PL              <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >1<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>页存在属性位</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >RWR             <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;R/W</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>属性位值</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >读</span><span style="font-family:Times New Roman;"  >/</span><span style="font-family:宋体;"  >执行</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >RWW             <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >2<span style="color:black;"  >         <span style="color:#999999;"  ><em>;R/W</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>属性位值</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >读</span><span style="font-family:Times New Roman;"  >/</span><span style="font-family:宋体;"  >写</span><span style="font-family:Times New Roman;"  >/</span><span style="font-family:宋体;"  >执行</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >USS             <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >0<span style="color:black;"  >         <span style="color:#999999;"  ><em>;U/S</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>属性位值</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >系统级</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >USU             <span style="color:#009999;"  >EQU<span style="color:black;"  >       <span style="color:#000099;"  >4<span style="color:black;"  >         <span style="color:#999999;"  ><em>;U/S</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>属性位值</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >用户级</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;ENDIF</em><span style="color:black;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>2.实例源程序 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >实例一的源程序如下所示：</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >名称</span></em><span style="font-family:Times New Roman;"  ><em>:ASM1.ASM</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >功能</span><span style="font-family:Times New Roman;"  >:</span><span style="font-family:宋体;"  >演示实方式和保护方式切换</span><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >切换到</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位代码段</span></em><span style="font-family:Times New Roman;"  ><em>)</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#009999; font-family:Times New Roman; font-size:10pt;"  >INCLUDE<span style="color:black;"  >     <span style="color:#000099;"  >386<span style="color:black;"  >SCD<span style="color:red;"  >.<span style="color:blue;"  >INC<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >字符显示宏指令的定义</span></em><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >EchoCh          <span style="color:#009999;"  >MACRO<span style="color:black;"  >   ascii </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ah<span style="color:red;"  >,<span style="color:#000099;"  >2<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >dl<span style="color:red;"  >,<span style="color:black;"  >ascii </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >int<span style="color:black;"  >      <span style="color:#000099;"  >21h<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >ENDM<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DSEG            <span style="color:#009999;"  >SEGMENT<span style="color:black;"  >       <span style="color:#009999;"  >USE16<span style="color:black;"  >         <span style="color:#999999;"  ><em>;16</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位数据段</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >GDT             <span style="color:#009999;"  >LABEL<span style="color:black;"  >       <span style="color:#009999;"  >BYTE<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>全局描述符表</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DUMMY           Desc    <span style="color:red;"  >&lt;&gt;<span style="color:black;"  >       <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>空描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#009999; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Code<span style="color:black;"  >            Desc    <span style="color:red;"  >&lt;<span style="color:#000099;"  >0ffffh<span style="color:red;"  >,,,<span style="color:black;"  >ATCE<span style="color:red;"  >,,&gt;<span style="color:black;"  >            <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>代码段描述符</em></span><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DataS           Desc    <span style="color:red;"  >&lt;<span style="color:#000099;"  >0ffffh<span style="color:red;"  >,<span style="color:#000099;"  >0<span style="color:red;"  >,<span style="color:#000099;"  >11h<span style="color:red;"  >,<span style="color:black;"  >ATDW<span style="color:red;"  >,,&gt;<span style="color:black;"  >               <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>源数据段描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DataD           Desc    <span style="color:red;"  >&lt;<span style="color:#000099;"  >0ffffh<span style="color:red;"  >,,,<span style="color:black;"  >ATDW<span style="color:red;"  >,,&gt;<span style="color:black;"  >           <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>目标数据段描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >GDTLen          <span style="color:red;"  >=<span style="color:black;"  >       <span style="color:red;"  >$-<span style="color:black;"  >GDT                 <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>全局描述符表长度</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >VGDTR           PDesc   <span style="color:red;"  >&lt;<span style="color:black;"  >GDTLen<span style="color:red;"  >-<span style="color:#000099;"  >1<span style="color:red;"  >,&gt;<span style="color:black;"  >           <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>伪描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Code_Sel        <span style="color:red;"  >=<span style="color:black;"  >       <span style="color:#009999;"  >Code<span style="color:red;"  >-<span style="color:black;"  >GDT              <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>代码段选择子</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DataS_Sel       <span style="color:red;"  >=<span style="color:black;"  >       Datas<span style="color:red;"  >-<span style="color:black;"  >GDT             <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>源数据段选择子</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DataD_Sel       <span style="color:red;"  >=<span style="color:black;"  >       DataD<span style="color:red;"  >-<span style="color:black;"  >GDT             <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>目标数据段选择子</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >BufLen          <span style="color:red;"  >=<span style="color:black;"  >       <span style="color:#000099;"  >256<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>缓冲区字节长度</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Buffer          <span style="color:#009999;"  >DB<span style="color:black;"  >      BufLen <span style="color:#009999;"  >DUP<span style="color:red;"  >(<span style="color:#000099;"  >0<span style="color:red;"  >)<span style="color:black;"  >            <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>缓冲区</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DSEG            <span style="color:#009999;"  >ENDS<span style="color:black;"  >       <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>数据段定义结束</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >CSEG            <span style="color:#009999;"  >SEGMENT<span style="color:black;"  >       <span style="color:#009999;"  >USE16<span style="color:black;"  >         <span style="color:#999999;"  ><em>;16</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位代码段</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >ASSUME<span style="color:black;"  >      <span style="color:fuchsia;"  >CS<span style="color:black;"  >:CSEG<span style="color:red;"  >,<span style="color:fuchsia;"  >DS<span style="color:black;"  >:DSEG </span></span></span></span></span></span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >Start           <span style="color:#009999;"  >PROC<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:black;"  >DSEG </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ds<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>准备要加载到</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >GDTR</span><span style="font-family:宋体;"  >的伪描述符</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >bx<span style="color:red;"  >,<span style="color:#000099;"  >16<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mul<span style="color:black;"  >      <span style="color:fuchsia;"  >bx<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >add<span style="color:black;"  >       <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:#009999;"  >OFFSET<span style="color:black;"  > GDT          <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>计算并设置基地址</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >adc<span style="color:black;"  >       <span style="color:fuchsia;"  >dx<span style="color:red;"  >,<span style="color:#000099;"  >0<span style="color:black;"  >           <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>界限已在定义时设置好</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >WORD<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > VGDTR<span style="color:red;"  >.<span style="color:black;"  >Base<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >              </span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >WORD<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > VGDTR<span style="color:red;"  >.<span style="color:black;"  >Base<span style="color:red;"  >+<span style="color:#000099;"  >2<span style="color:red;"  >,<span style="color:fuchsia;"  >dx<span style="color:black;"  >                </span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>设置代码段描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:fuchsia;"  >cs<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mul<span style="color:black;"  >      <span style="color:fuchsia;"  >bx<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >mov<span style="color:black;"  >       <span style="color:#009999;"  >WORD<span style="color:black;"  >         <span style="color:#009999;"  >PTR<span style="color:black;"  >           <span style="color:#009999;"  >Code<span style="color:red;"  >.<span style="color:black;"  >BaseL<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >                 <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>代码段开始偏移为</em></span><span style="color:#999999; font-family:Times New Roman;"  ><em>0</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >mov<span style="color:black;"  >       <span style="color:#009999;"  >BYTE<span style="color:black;"  >         <span style="color:#009999;"  >PTR<span style="color:black;"  >           <span style="color:#009999;"  >Code<span style="color:red;"  >.<span style="color:black;"  >BaseM<span style="color:red;"  >,<span style="color:fuchsia;"  >dl<span style="color:black;"  >                 <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>代码段界限已在定义时设置好</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >BYTE<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  >          <span style="color:#009999;"  >Code<span style="color:red;"  >.<span style="color:black;"  >BaseH<span style="color:red;"  >,<span style="color:fuchsia;"  >dh<span style="color:black;"  >               </span></span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>设置目标数据段描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:fuchsia;"  >ds<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >mul<span style="color:black;"  >       <span style="color:fuchsia;"  >bx<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>计算并设置目标数据段基址</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >add<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:#009999;"  >OFFSET<span style="color:black;"  > Buffer </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >adc<span style="color:black;"  >      <span style="color:fuchsia;"  >dx<span style="color:red;"  >,<span style="color:#000099;"  >0<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >WORD<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > DataD<span style="color:red;"  >.<span style="color:black;"  >BaseL<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >              </span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >BYTE<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > DataD<span style="color:red;"  >.<span style="color:black;"  >BaseM<span style="color:red;"  >,<span style="color:fuchsia;"  >dl<span style="color:black;"  >              </span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >BYTE<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > DataD<span style="color:red;"  >.<span style="color:black;"  >BaseH<span style="color:red;"  >,<span style="color:fuchsia;"  >dh<span style="color:black;"  >              </span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>加载</em></span><span style="color:#999999; font-family:Times New Roman;"  ><em>GDTR</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >lgdt<span style="color:black;"  >      <span style="color:#009999;"  >QWORD<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > VGDTR </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >cli<span style="color:black;"  >       <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>关中断</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009900;"  >EnableA20<span style="color:black;"  >       <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>打开地址线</em></span><span style="color:#999999; font-family:Times New Roman;"  ><em>A20</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>切换到保护方式</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >eax<span style="color:red;"  >,<span style="color:fuchsia;"  >cr0<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >or<span style="color:black;"  >      <span style="color:fuchsia;"  >eax<span style="color:red;"  >,<span style="color:#000099;"  >1<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >cr0<span style="color:red;"  >,<span style="color:fuchsia;"  >eax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>清指令预取队列</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >并真正进入保护方式</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009900;"  >JUMP16<span style="color:black;"  >  Code_Sel<span style="color:red;"  >,&lt;<span style="color:#009999;"  >OFFSET<span style="color:black;"  > Virtual<span style="color:red;"  >&gt;<span style="color:black;"  >          </span></span></span></span></span></span></span></span></p><p><span style="color:#990000; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Virtual:<span style="color:black;"  >      <span style="color:#999999;"  ><em>;</em></span></span></span><span style="font-family:宋体;"  ><em>现在开始在保护方式下运行</em></span><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:black;"  >DataS_Sel </span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >mov<span style="color:black;"  >       <span style="color:fuchsia;"  >ds<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >           <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>加载源数据段描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:black;"  >DataD_Sel </span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >mov<span style="color:black;"  >       <span style="color:fuchsia;"  >es<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >           <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>加载<span style="color:#999999;"  >目标数据段描述符</span></em></span><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >cld<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >xor<span style="color:black;"  >      <span style="color:fuchsia;"  >si<span style="color:red;"  >,<span style="color:fuchsia;"  >si<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >xor<span style="color:black;"  >       <span style="color:fuchsia;"  >di<span style="color:red;"  >,<span style="color:fuchsia;"  >di<span style="color:black;"  >           <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>设置指针初值</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >mov<span style="color:black;"  >       <span style="color:fuchsia;"  >cx<span style="color:red;"  >,<span style="color:black;"  >BufLen<span style="color:red;"  >/<span style="color:#000099;"  >4<span style="color:black;"  >             <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>设置</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >4</span><span style="font-family:宋体;"  >字节为单位的缓冲区长度</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >repz<span style="color:black;"  >    movsd                  <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>传送</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>切换回实模式</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >eax<span style="color:red;"  >,<span style="color:fuchsia;"  >cr0<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >and<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >11111110b<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >cr0<span style="color:red;"  >,<span style="color:fuchsia;"  >eax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>清指令预取队列</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >进入实方式</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009900;"  >JUMP16<span style="color:black;"  >      <span style="color:red;"  >&lt;<span style="color:#009999;"  >SEG<span style="color:black;"  > Real<span style="color:red;"  >&gt;,&lt;<span style="color:#009999;"  >OFFSET<span style="color:black;"  > Real<span style="color:red;"  >&gt;<span style="color:black;"  >             </span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:#990000; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Real:<span style="color:black;"  >      <span style="color:#999999;"  ><em>;</em></span></span></span><span style="font-family:宋体;"  ><em>现在又回到实方式</em></span><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009900;"  >DisableA20<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >sti<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:black;"  >DSEG </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ds<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >si<span style="color:red;"  >,<span style="color:#009999;"  >OFFSET<span style="color:black;"  > Buffer </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >cld<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >bp<span style="color:red;"  >,<span style="color:black;"  >BufLen<span style="color:red;"  >/<span style="color:#000099;"  >16<span style="color:black;"  >           </span></span></span></span></span></span></span></span></span></p><p><span style="color:#990000; font-family:Times New Roman; font-size:10pt;"  >NextLine:<span style="color:black;"  >     <span style="color:blue;"  >mov<span style="color:black;"  >       <span style="color:fuchsia;"  >cx<span style="color:red;"  >,<span style="color:#000099;"  >16<span style="color:black;"  >          </span></span></span></span></span></span></span></span></p><p><span style="color:#990000; font-family:Times New Roman; font-size:10pt;"  >NextCh:<span style="color:black;"  >     <span style="color:blue;"  >lodsb<span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >push<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >shr<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >1<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >call<span style="color:black;"  >    ToASCII </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >                EchoCh  <span style="color:fuchsia;"  >al<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >pop<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >call<span style="color:black;"  >    ToASCII </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >                EchoCh  <span style="color:fuchsia;"  >al<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >                EchoCh  <span style="color:#999900;"  >' '<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >loop<span style="color:black;"  >    NextCh </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >                EchoCh  <span style="color:#000099;"  >0dh<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >                EchoCh  <span style="color:#000099;"  >0ah<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >dec<span style="color:black;"  >      <span style="color:fuchsia;"  >bp<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >jnz<span style="color:black;"  >     NextLine </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:#000099;"  >4c00h<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >int<span style="color:black;"  >      <span style="color:#000099;"  >21h<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >Start           <span style="color:#009999;"  >ENDP<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >ToASCII         <span style="color:#009999;"  >PROC<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >and<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >0fh<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >add<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >90h<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >daa<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >adc<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >40h<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >daa<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >ret<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >ToASCII         <span style="color:#009999;"  >ENDP<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >CSEG            <span style="color:#009999;"  >ENDS<span style="color:black;"  >       <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>代码段定义结束</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >END<span style="color:black;"  >     Start </span></span></span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>3.关于实例步骤的注释 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >在源程序的开头首先包含了文件</span><span style="font-family:Times New Roman;"  >"386SCD.INC"</span><span style="font-family:宋体;"  >，在此包含文件中定义了保护模式程序设计要用到的</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >一些结构、宏及常量。下面对各实现步骤作些说明。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:fuchsia; font-family:Batang; font-size:16pt;"  ><strong>(1)切换到保护方式的准备工作 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >在从实模式切换到保护模式之前，必须作必要的准备。准备工作的内容根据实际而定。最起码的准备</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >工作是建立合适的全局描述符表，并使用</span><span style="font-family:Times New Roman;"  >GDTR</span><span style="font-family:宋体;"  >指向该</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >。因为在切换到保护方式时，至少要把代码</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >段的选择子装载到</span><span style="font-family:Times New Roman;"  >CS</span><span style="font-family:宋体;"  >，所以</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >中至少含有代码段的描述符。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >从本实例源程序可见，全局描述符表</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >仅有四个描述符：第一个是空描述符；第二个是代码段描述</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >符；第三个和第四个分别为源数据段及目标数据段描述符。本实例各描述符中的段界限是在定义时设</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >置的，并且除伪描述符</span><span style="font-family:Times New Roman;"  >VGDTR</span><span style="font-family:宋体;"  >中的界限按</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >的实际长度设置外，各使用的存储段描述符的界限都规定</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >为</span><span style="font-family:Times New Roman;"  >0FFFFH</span><span style="font-family:宋体;"  >。另外，描述符中的段属性也根据所描述段的类型被预置，各属性的定义在包含文</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >件</span><span style="font-family:Times New Roman;"  >386SCD.INC</span><span style="font-family:宋体;"  >中均有说明。从属性值可知，这三个段都是</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位段。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >由于在切换到保护方式后就要引用</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >，所以在切换到保护方式前必须装载</span><span style="font-family:Times New Roman;"  >GDTR</span><span style="font-family:宋体;"  >。实例中使用如下指</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >令装载</span><span style="font-family:Times New Roman;"  >GDTR</span><span style="font-family:宋体;"  >：</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >LGDT<span style="color:black;"  >      <span style="color:#009999;"  >QWORD PTR<span style="color:black;"  > VGDTR </span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >该指令的功能是把存储器中的伪描述符</span><span style="font-family:Times New Roman;"  >VGDTR</span><span style="font-family:宋体;"  >装入到全局描述符表寄存器</span><span style="font-family:Times New Roman;"  >GDTR</span><span style="font-family:宋体;"  >中。伪描述符</span><span style="font-family:Times New Roman;"  >VGDTR</span><span style="font-family:宋体;"  >的结</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >构如前所述结构类型</span><span style="font-family:Times New Roman;"  >PDESC</span><span style="font-family:宋体;"  >所示，低字是以字节位单位的全局描述符表段的界限，高双字为描述符表</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >段的线性基地址</span><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >本实例不启用分页机制，所以线性地址等同于物理地址</span><span style="font-family:Times New Roman;"  >)</span><span style="font-family:宋体;"  >。本实例中未涉及到局部描</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >述符表及中断描述符表，后面的文章将作详细说明。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:fuchsia; font-family:Batang; font-size:16pt;"  ><strong>(2)由实模式切换到保护模式 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >在做好准备后，从实模式切换到保护模式并不难。原则上只要把控制寄存器</span><span style="font-family:Times New Roman;"  >CR0</span><span style="font-family:宋体;"  >中的</span><span style="font-family:Times New Roman;"  >PE</span><span style="font-family:宋体;"  >位置</span><span style="font-family:Times New Roman;"  >1</span><span style="font-family:宋体;"  >即可。本</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >实例采用如下三条指令设置</span><span style="font-family:Times New Roman;"  >PE</span><span style="font-family:宋体;"  >位：</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >eax<span style="color:red;"  >,<span style="color:fuchsia;"  >cr0<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >or<span style="color:black;"  >      <span style="color:fuchsia;"  >eax<span style="color:red;"  >,<span style="color:#000099;"  >1<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >cr0<span style="color:red;"  >,<span style="color:fuchsia;"  >eax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >实际情况要比这复杂些。执行上面的三条指令后，处理器转入保护模式，但</span><span style="font-family:Times New Roman;"  >CS</span><span style="font-family:宋体;"  >中的内容还是实模式下</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >代码段的段值，而不是保护模式下代码段的选择子，所以在取指令之前得把代码段的选择子装入</span><span style="font-family:Times New Roman;"  >CS</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >为此，紧接着这三条指令，安排一条如下所示的段间转移指令：</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    JUMP16  Code_Sel<span style="color:red;"  >,&lt;<span style="color:#009999;"  >OFFSET<span style="color:black;"  > Virtual<span style="color:red;"  >&gt;<span style="color:black;"  >        </span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >这条段间转移指令在实模式下被预取并在保护方式下被执行。</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >利用这条段间转移指令可把保护模式下代码段的选择子装入</span><span style="font-family:Times New Roman;"  >CS</span><span style="font-family:宋体;"  >，同时也刷新指令预取队列。从此真正</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >进入保护模式。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:fuchsia; font-family:Batang; font-size:16pt;"  ><strong>(3)由保护模式切换到实模式 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >在</span><span style="font-family:Times New Roman;"  >80386</span><span style="font-family:宋体;"  >上，从保护模式切换到实模式的过程类似于从实模式切换到保护模式。原则上只要把控制寄</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >存器</span><span style="font-family:Times New Roman;"  >CR0</span><span style="font-family:宋体;"  >中的</span><span style="font-family:Times New Roman;"  >PE</span><span style="font-family:宋体;"  >位清</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >即可。实际上，在此之后也要安排一条段间转移指令，一方面清指令预取队列，</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >另一方面把实模式下代码段的段值送</span><span style="font-family:Times New Roman;"  >CS</span><span style="font-family:宋体;"  >。这条段间转移指令在保护</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >方式下被预取并在实模式下被执行。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:fuchsia; font-family:Batang; font-size:16pt;"  ><strong>(4)保护模式下的数据传送 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >首先，把源数据段和目标数据段的选择子装入</span><span style="font-family:Times New Roman;"  >DS</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >ES</span><span style="font-family:宋体;"  >寄存器，这两个描述符已在实模式下设置好，</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >把选择子装入段寄存器就意味着把包括基地址在内的段信息装入到了段描述符高速缓冲寄存器。然</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >后设置指针寄存器</span><span style="font-family:Times New Roman;"  >SI</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >DI</span><span style="font-family:宋体;"  >的初值，也设置计数器</span><span style="font-family:Times New Roman;"  >CX</span><span style="font-family:宋体;"  >的初值。根据预置的段属性，在保护方式下，代</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >码段也仅是</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位段，串操作指令只使用</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位的</span><span style="font-family:Times New Roman;"  >SI</span><span style="font-family:宋体;"  >、</span><span style="font-family:Times New Roman;"  >DI</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >CX</span><span style="font-family:宋体;"  >等寄存器。最后利用串操作指令实施传送。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:fuchsia; font-family:Batang; font-size:16pt;"  ><strong>(5)显示缓冲区中的内容 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >由于缓冲区在常规内存中，所以在实模式下根据要求按十六进制显示其内容是很容易理解的，这里</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >就不再多说。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>4.内存映象 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >在源程序中没有把</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >作为一个单独的段对待，但在进入保护方式后，它是一个独立的段。从对代</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >码段和源数据段描述符所赋的基地址和段界限值可见，代码段和数据段有部分覆盖。尽管这样做不</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >利于代码和数据的安全，但如果需要，这样做是可行的。本实例运行时的内存映象如下图所示。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p style="text-align: center;"  ><img title="四.实模式与保护模式切换实例 - Howie - Dspace"  src="pic/img6.ph.126.net_Ed4A-UWIMMNqQwMS-W1Yng==_102175416563503056.jpg"  alt=""  /><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >   </span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>5.特别说明 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >作为第一个实模式和保护模式切换的例子，本实例作了大量的简化处理。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >通常，由实模式切换到保护模式的准备工作还应包含建立中断描述符表。但本实例没有建立中断</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >描述符表。为此，要求整个过程在关中断的情况下进行；要求不使用软中断指令；假设不发生任</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >何异常。否则会导致系统崩溃。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >本实例未使用局部描述符表，所以在进入保护模式后没有设置局部描述符表寄存器</span><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >。为此，</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >在保护模式下使用的段选择子都指定</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >中的描述符。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >本实例未定义保护模式下的堆栈段，</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >中没有堆栈段描述符，在保护模式下没有设置</span><span style="font-family:Times New Roman;"  >SS</span><span style="font-family:宋体;"  >，所以</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >在保护方式下没有涉及堆栈操作的指令。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >本实例各描述符特权级</span><span style="font-family:Times New Roman;"  >DPL</span><span style="font-family:宋体;"  >和各选择子的请求特权级</span><span style="font-family:Times New Roman;"  >RPL</span><span style="font-family:宋体;"  >均为</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >，在保护方式下运行时的当前特权</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >级</span><span style="font-family:Times New Roman;"  >CPL</span><span style="font-family:宋体;"  >也是</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >本实例没有采用分页管理机制，也即</span><span style="font-family:Times New Roman;"  >CR0</span><span style="font-family:宋体;"  >中的</span><span style="font-family:Times New Roman;"  >PG</span><span style="font-family:宋体;"  >位为</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >，线性地址就是存储单元的物理地址。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>6.打开和关闭地址线A20 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >PC</span><span style="font-family:宋体;"  >及其兼容机的第</span><span style="font-family:Times New Roman;"  >21</span><span style="font-family:宋体;"  >根地址线</span><span style="font-family:Times New Roman;"  >(A20)</span><span style="font-family:宋体;"  >较特殊，计算机系统中一般安排一个</span><span style="font-family:Times New Roman;"  > "</span><span style="font-family:宋体;"  >门</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >控制该地址线是</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >否有效。为了访问地址在</span><span style="font-family:Times New Roman;"  >1M</span><span style="font-family:宋体;"  >以上的存储单元，应先打开控制地址线</span><span style="font-family:Times New Roman;"  >A20</span><span style="font-family:宋体;"  >的</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >门</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >。这种设置与实</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >模式下只使用最低端的</span><span style="font-family:Times New Roman;"  >1M</span><span style="font-family:宋体;"  >字节存储空间有关，与处理器是否工作在实模式或保护方式无关，即使</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >在关闭地址线</span><span style="font-family:Times New Roman;"  >A20</span><span style="font-family:宋体;"  >时，也可进入保护模式。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >如何打开和关闭地址线</span><span style="font-family:Times New Roman;"  >A20</span><span style="font-family:宋体;"  >与计算机系统的具体设置有关。在本文中介绍的包含文件</span><span style="font-family:Times New Roman;"  >386SCD.INC</span><span style="font-family:宋体;"  >中</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >定义了两个宏，打开地址线</span><span style="font-family:Times New Roman;"  >A20</span><span style="font-family:宋体;"  >的宏</span><span style="font-family:Times New Roman;"  >EnableA20</span><span style="font-family:宋体;"  >和关闭地址线</span><span style="font-family:Times New Roman;"  >A20</span><span style="font-family:宋体;"  >的宏</span><span style="font-family:Times New Roman;"  >DisableA20</span><span style="font-family:宋体;"  >，此两个宏指令在</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >一般的</span><span style="font-family:Times New Roman;"  >PC</span><span style="font-family:宋体;"  >兼容机上都是可行的。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:22pt;"  ><strong>&lt;二&gt;演示32位代码段和16位代码段切换的实例(实例二) </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >实例二的逻辑功能是，以十六进制数和</span><span style="font-family:Times New Roman;"  >ASCII</span><span style="font-family:宋体;"  >字符两种形式显示从内存地址</span><span style="font-family:Times New Roman;"  >100000H</span><span style="font-family:宋体;"  >开始的</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >个字</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >节的内容。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >从功能上看，本实例类似于实例一，但在实现方法上却有了改变，它更能反映出实模式和保护模</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >式切换的情况。具体实现步骤是：</span><span style="font-family:Times New Roman;"  >(1)</span><span style="font-family:宋体;"  >作切换到保护方式的准备；</span><span style="font-family:Times New Roman;"  >(2)</span><span style="font-family:宋体;"  >切换到保护方式的一个</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >代码段；</span><span style="font-family:Times New Roman;"  >(3)</span><span style="font-family:宋体;"  >把指定内存区域的内容以字节为单位，转换成对应的十六进制数的</span><span style="font-family:Times New Roman;"  >ASCII</span><span style="font-family:宋体;"  >码，并直接</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >填入显示缓冲区实现显示；</span><span style="font-family:Times New Roman;"  >(4)</span><span style="font-family:宋体;"  >再变换到保护方式下的一个</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位代码段；</span><span style="font-family:Times New Roman;"  >(5)</span><span style="font-family:宋体;"  >把指定内存区域的内</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >容直接作为</span><span style="font-family:Times New Roman;"  >ASCII</span><span style="font-family:宋体;"  >码填入显示缓冲区中实现显示；</span><span style="font-family:Times New Roman;"  >(6)</span><span style="font-family:宋体;"  >切换回实模式。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>1.实例二源程序 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >实例二的源程序如下所示：</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >名称</span></em><span style="font-family:Times New Roman;"  ><em>:ASM2.ASM</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-size:10pt;"  ><em><span style="font-family:Times New Roman;"  >;</span><span style="font-family:宋体;"  >功能</span><span style="font-family:Times New Roman;"  >:</span><span style="font-family:宋体;"  >演示实方式和保护方式切换</span><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >切换到</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位代码段</span></em><span style="font-family:Times New Roman;"  ><em>)</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:#009999; font-family:Times New Roman; font-size:10pt;"  >INCLUDE<span style="color:black;"  >     <span style="color:#000099;"  >386<span style="color:black;"  >SCD<span style="color:red;"  >.<span style="color:blue;"  >INC<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DSEG            <span style="color:#009999;"  >SEGMENT<span style="color:black;"  >       <span style="color:#009999;"  >USE16<span style="color:black;"  >         <span style="color:#999999;"  ><em>;16</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位数据段</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >GDT             <span style="color:#009999;"  >LABEL<span style="color:black;"  >       <span style="color:#009999;"  >BYTE<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>全局描述符表</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DUMMY           Desc    <span style="color:red;"  >&lt;&gt;<span style="color:black;"  >       <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>空描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Normal          Desc    <span style="color:red;"  >&lt;<span style="color:#000099;"  >0ffffh<span style="color:red;"  >,,,<span style="color:black;"  >ATDW<span style="color:red;"  >,,&gt;<span style="color:black;"  >           <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>规范段描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Code32          Desc    <span style="color:red;"  >&lt;<span style="color:black;"  >C32Len<span style="color:red;"  >-<span style="color:#000099;"  >1<span style="color:red;"  >,,,<span style="color:black;"  >ATCE<span style="color:red;"  >,<span style="color:black;"  >D32<span style="color:red;"  >,&gt;<span style="color:black;"  >               <span style="color:#999999;"  ><em>;32</em></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位代码段描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Code16          Desc    <span style="color:red;"  >&lt;<span style="color:#000099;"  >0ffffh<span style="color:red;"  >,,,<span style="color:black;"  >ATCE<span style="color:red;"  >,,&gt;<span style="color:black;"  >           <span style="color:#999999;"  ><em>;16</em></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位代码段描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DataS           Desc    <span style="color:red;"  >&lt;<span style="color:black;"  >DataLen<span style="color:red;"  >-<span style="color:#000099;"  >1<span style="color:red;"  >,<span style="color:#000099;"  >0<span style="color:red;"  >,<span style="color:#000099;"  >10h<span style="color:red;"  >,<span style="color:black;"  >ATDR<span style="color:red;"  >,,&gt;<span style="color:black;"  >                 <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>源数据段描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DataD           Desc    <span style="color:red;"  >&lt;<span style="color:#000099;"  >3999<span style="color:red;"  >,<span style="color:#000099;"  >8000h<span style="color:red;"  >,<span style="color:#000099;"  >0bh<span style="color:red;"  >,<span style="color:black;"  >ATDW<span style="color:red;"  >,,&gt;<span style="color:black;"  >               <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>显示缓冲区描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Stacks          Desc    <span style="color:red;"  >&lt;<span style="color:black;"  >StackLen<span style="color:red;"  >-<span style="color:#000099;"  >1<span style="color:red;"  >,,,<span style="color:black;"  >ATDW<span style="color:red;"  >,,&gt;<span style="color:black;"  >             <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>堆栈段描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >GDTLen          <span style="color:red;"  >=<span style="color:black;"  >       <span style="color:red;"  >$-<span style="color:black;"  >GDT                     <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>全局描述符表长度</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >VGDTR           PDesc   <span style="color:red;"  >&lt;<span style="color:black;"  >GDTLen<span style="color:red;"  >-<span style="color:#000099;"  >1<span style="color:red;"  >,&gt;<span style="color:black;"  >           <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>伪描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >SaveSP          <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:red;"  >?<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>用于保存</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >SP</span><span style="font-family:宋体;"  >寄存器</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >SaveSS          <span style="color:#009999;"  >DW<span style="color:black;"  >       <span style="color:red;"  >?<span style="color:black;"  >         <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>用于保存</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >SS</span><span style="font-family:宋体;"  >寄存器</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Normal_Sel      <span style="color:red;"  >=<span style="color:black;"  >       Normal<span style="color:red;"  >-<span style="color:black;"  >GDT                <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>规范段描述符选择子</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Code32_Sel      <span style="color:red;"  >=<span style="color:black;"  >       Code32<span style="color:red;"  >-<span style="color:black;"  >GDT                <span style="color:#999999;"  ><em>;32</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位代码段选择子</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Code16_Sel      <span style="color:red;"  >=<span style="color:black;"  >       Code16<span style="color:red;"  >-<span style="color:black;"  >GDT                <span style="color:#999999;"  ><em>;16</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位代码<span style="color:#999999;"  >段选择子</span></em></span><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DataS_Sel       <span style="color:red;"  >=<span style="color:black;"  >       Datas<span style="color:red;"  >-<span style="color:black;"  >GDT                 <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>源数据段选择子</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DataD_Sel       <span style="color:red;"  >=<span style="color:black;"  >       DataD<span style="color:red;"  >-<span style="color:black;"  >GDT                 <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>目标数据段选择子</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >Stacks_Sel      <span style="color:red;"  >=<span style="color:black;"  >       Stacks<span style="color:red;"  >-<span style="color:black;"  >GDT                <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>堆栈段描述符选择子</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >DataLen         <span style="color:red;"  >=<span style="color:black;"  >      <span style="color:#000099;"  >16<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >DSEG            <span style="color:#009999;"  >ENDS<span style="color:black;"  >       <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>数据段定义结束</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >StackSeg        <span style="color:#009999;"  >SEGMENT<span style="color:black;"  >      <span style="color:#009999;"  >PARA<span style="color:black;"  >        <span style="color:#009999;"  >STACK<span style="color:black;"  >          <span style="color:#009999;"  >USE16<span style="color:black;"  >           </span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >StackLen        <span style="color:red;"  >=<span style="color:black;"  >      <span style="color:#000099;"  >256<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >DB<span style="color:black;"  >      StackLen <span style="color:#009999;"  >DUP<span style="color:red;"  >(<span style="color:#000099;"  >0<span style="color:red;"  >)<span style="color:black;"  >          </span></span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >StackSeg        <span style="color:#009999;"  >ENDS<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >CSEG1           <span style="color:#009999;"  >SEGMENT<span style="color:black;"  >       <span style="color:#009999;"  >USE16<span style="color:black;"  >         <span style="color:#999900;"  >'REAL'<span style="color:black;"  >           <span style="color:#999999;"  ><em>;16</em></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>位代码段</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >ASSUME<span style="color:black;"  >      <span style="color:fuchsia;"  >CS<span style="color:black;"  >:CSEG1<span style="color:red;"  >,<span style="color:fuchsia;"  >DS<span style="color:black;"  >:DSEG </span></span></span></span></span></span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >Start           <span style="color:#009999;"  >PROC<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:black;"  >DSEG </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ds<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>准备要加载到</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >GDTR</span><span style="font-family:宋体;"  >的伪描述符</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >bx<span style="color:red;"  >,<span style="color:#000099;"  >16<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mul<span style="color:black;"  >      <span style="color:fuchsia;"  >bx<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >add<span style="color:black;"  >       <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:#009999;"  >OFFSET<span style="color:black;"  > GDT             <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>计算并设置基地址</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >adc<span style="color:black;"  >       <span style="color:fuchsia;"  >dx<span style="color:red;"  >,<span style="color:#000099;"  >0<span style="color:black;"  >           <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>界限已在定义时设置好</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >WORD<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > VGDTR<span style="color:red;"  >.<span style="color:black;"  >Base<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >              </span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >WORD<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > VGDTR<span style="color:red;"  >.<span style="color:black;"  >Base<span style="color:red;"  >+<span style="color:#000099;"  >2<span style="color:red;"  >,<span style="color:fuchsia;"  >dx<span style="color:black;"  >                </span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>设置</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位代码段描述符</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:black;"  >CSEG2 </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mul<span style="color:black;"  >      <span style="color:fuchsia;"  >bx<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >WORD<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > Code32<span style="color:red;"  >.<span style="color:black;"  >BaseL<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >              </span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >BYTE<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > Code32<span style="color:red;"  >.<span style="color:black;"  >BaseM<span style="color:red;"  >,<span style="color:fuchsia;"  >dl<span style="color:black;"  >              </span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >BYTE<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > Code32<span style="color:red;"  >.<span style="color:black;"  >BaseH<span style="color:red;"  >,<span style="color:fuchsia;"  >dh<span style="color:black;"  >              </span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>设置</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位代码段描述符</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:black;"  >CSEG3 </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mul<span style="color:black;"  >      <span style="color:fuchsia;"  >bx<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >mov<span style="color:black;"  >       <span style="color:#009999;"  >WORD<span style="color:black;"  >         <span style="color:#009999;"  >PTR<span style="color:black;"  > Code16<span style="color:red;"  >.<span style="color:black;"  >BaseL<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >                <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>代码段开始偏移为</em></span><span style="color:#999999; font-family:Times New Roman;"  ><em>0</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >mov<span style="color:black;"  >       <span style="color:#009999;"  >BYTE<span style="color:black;"  >         <span style="color:#009999;"  >PTR<span style="color:black;"  > Code16<span style="color:red;"  >.<span style="color:black;"  >BaseM<span style="color:red;"  >,<span style="color:fuchsia;"  >dl<span style="color:black;"  >                <span style="color:#999999;"  ><em>;</em></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:宋体;"  ><em>代码段界限已在定义时设置好</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >BYTE<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > Code16<span style="color:red;"  >.<span style="color:black;"  >BaseH<span style="color:red;"  >,<span style="color:fuchsia;"  >dh<span style="color:black;"  >              </span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>设置堆栈段描述符</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:fuchsia;"  >ss<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >WORD<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > SaveSS<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >            </span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >WORD<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > SaveSP<span style="color:red;"  >,<span style="color:fuchsia;"  >sp<span style="color:black;"  >            </span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:black;"  >StackSeg </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mul<span style="color:black;"  >      <span style="color:fuchsia;"  >bx<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >WORD<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > Stacks<span style="color:red;"  >.<span style="color:black;"  >BaseL<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >              </span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >BYTE<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > Stacks<span style="color:red;"  >.<span style="color:black;"  >BaseM<span style="color:red;"  >,<span style="color:fuchsia;"  >dl<span style="color:black;"  >              </span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:#009999;"  >BYTE<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > Stacks<span style="color:red;"  >.<span style="color:black;"  >BaseH<span style="color:red;"  >,<span style="color:fuchsia;"  >dh<span style="color:black;"  >              </span></span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>加载</em></span><span style="color:#999999; font-family:Times New Roman;"  ><em>GDTR</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >lgdt<span style="color:black;"  >      <span style="color:#009999;"  >QWORD<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > VGDTR </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:blue;"  >cli<span style="color:black;"  >       <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>关中断</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#009900;"  >EnableA20<span style="color:black;"  >       <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>打开地址线</em></span><span style="color:#999999; font-family:Times New Roman;"  ><em>A20</em><span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>切换到保护方式</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >eax<span style="color:red;"  >,<span style="color:fuchsia;"  >cr0<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >or<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >1<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >cr0<span style="color:red;"  >,<span style="color:fuchsia;"  >eax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >     <span style="color:#999999;"  ><em>;</em></span></span><span style="font-family:宋体;"  ><em>清指令预取队列</em></span><span style="color:#999999;"  ><em><span style="font-family:Times New Roman;"  >,</span><span style="font-family:宋体;"  >并真正进入保护方式</span></em><span style="color:black; font-family:Times New Roman;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009900;"  >JUMP16<span style="color:black;"  >  Code32_Sel<span style="color:red;"  >,&lt;<span style="color:#009999;"  >OFFSET<span style="color:black;"  > SPM32<span style="color:red;"  >&gt;<span style="color:black;"  >          </span></span></span></span></span></span></span></span></p><p><span style="color:#990000; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >ToReal:<span style="color:black;"  >      <span style="color:#999999;"  ><em>;</em></span></span></span><span style="font-family:宋体;"  ><em>现在又回到实方式</em></span><span style="color:black; font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:black;"  >DSEG </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ds<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >sp<span style="color:red;"  >,<span style="color:black;"  >SaveSP </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ss<span style="color:red;"  >,<span style="color:black;"  >SaveSS </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009900;"  >DisableA20<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >sti<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:#000099;"  >4c00h<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >int<span style="color:black;"  >      <span style="color:#000099;"  >21h<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >Start           <span style="color:#009999;"  >ENDP<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >CSEG1           <span style="color:#009999;"  >ENDS<span style="color:black;"  >       <span style="color:#999999;"  ><em>;</em></span></span></span></span><span style="font-family:宋体;"  ><em>代码段定义结束</em></span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >CSEG2           <span style="color:#009999;"  >SEGMENT<span style="color:black;"  >      <span style="color:#009999;"  >USE32<span style="color:black;"  >        <span style="color:#999900;"  >'PM32'<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >ASSUME<span style="color:black;"  >      <span style="color:fuchsia;"  >CS<span style="color:black;"  >:CSEG2 </span></span></span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >SPM32           <span style="color:#009999;"  >PROC<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:black;"  >Stacks_Sel </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ss<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >esp<span style="color:red;"  >,<span style="color:black;"  >StackLen </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:black;"  >DataS_Sel </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ds<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:black;"  >DataD_Sel </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >es<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >xor<span style="color:black;"  >      <span style="color:fuchsia;"  >esi<span style="color:red;"  >,<span style="color:fuchsia;"  >esi<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >xor<span style="color:black;"  >      <span style="color:fuchsia;"  >edi<span style="color:red;"  >,<span style="color:fuchsia;"  >edi<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ecx<span style="color:red;"  >,<span style="color:black;"  >DataLen </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >cld<span style="color:black;"  >     </span></span></span></p><p><span style="color:#990000; font-family:Times New Roman; font-size:10pt;"  >Next:<span style="color:black;"  >     <span style="color:blue;"  >lodsb<span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >push<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >CALL<span style="color:black;"  >    ToASCII </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ah<span style="color:red;"  >,<span style="color:#000099;"  >7<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >shl<span style="color:black;"  >      <span style="color:fuchsia;"  >eax<span style="color:red;"  >,<span style="color:#000099;"  >16<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >pop<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >shr<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >4<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >CALL<span style="color:black;"  >    ToASCII </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ah<span style="color:red;"  >,<span style="color:#000099;"  >7<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >stosd<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >20h<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >stosw<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >loop<span style="color:black;"  >    Next </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009900;"  >JUMP32<span style="color:black;"  >   Code16_Sel<span style="color:red;"  >,&lt;<span style="color:#009999;"  >OFFSET<span style="color:black;"  > SPM16<span style="color:red;"  >&gt;<span style="color:black;"  >          </span></span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >SPM32           <span style="color:#009999;"  >ENDP<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >ToASCII         <span style="color:#009999;"  >PROC<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >and<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >00001111b<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >add<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >30h<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >cmp<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >39h<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >jbe<span style="color:black;"  >     Isdig </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >add<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >7<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:#990000; font-family:Times New Roman; font-size:10pt;"  >IsDig:<span style="color:black;"  >     <span style="color:blue;"  >ret<span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >ToASCII         <span style="color:#009999;"  >ENDP<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >C32Len          <span style="color:red;"  >=<span style="color:black;"  >      <span style="color:red;"  >$<span style="color:black;"  >       </span></span></span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >CSEG2           <span style="color:#009999;"  >ENDS<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >CSEG3           <span style="color:#009999;"  >SEGMENT<span style="color:black;"  >      <span style="color:#009999;"  >USE16<span style="color:black;"  >        <span style="color:#999900;"  >'PM16'<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >ASSUME<span style="color:black;"  >      <span style="color:fuchsia;"  >CS<span style="color:black;"  >:CSEG3 </span></span></span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >SPM16           <span style="color:#009999;"  >PROC<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >xor<span style="color:black;"  >      <span style="color:fuchsia;"  >si<span style="color:red;"  >,<span style="color:fuchsia;"  >si<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >di<span style="color:red;"  >,<span style="color:black;"  >DataLen<span style="color:red;"  >*<span style="color:#000099;"  >3<span style="color:red;"  >*<span style="color:#000099;"  >2<span style="color:black;"  >             </span></span></span></span></span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ah<span style="color:red;"  >,<span style="color:#000099;"  >7<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >cx<span style="color:red;"  >,<span style="color:black;"  >DataLen </span></span></span></span></span></span></p><p><span style="color:#990000; font-family:Times New Roman; font-size:10pt;"  >AGain:<span style="color:black;"  >     <span style="color:blue;"  >lodsb<span style="color:black;"  >      </span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >stosw<span style="color:black;"  >     </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >loop<span style="color:black;"  >    AGain </span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ax<span style="color:red;"  >,<span style="color:black;"  >Normal_sel </span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ds<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >es<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >ss<span style="color:red;"  >,<span style="color:fuchsia;"  >ax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >eax<span style="color:red;"  >,<span style="color:fuchsia;"  >cr0<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >and<span style="color:black;"  >      <span style="color:fuchsia;"  >al<span style="color:red;"  >,<span style="color:#000099;"  >11111110b<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >mov<span style="color:black;"  >      <span style="color:fuchsia;"  >cr0<span style="color:red;"  >,<span style="color:fuchsia;"  >eax<span style="color:black;"  >         </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:blue;"  >jmp<span style="color:black;"  >      <span style="color:#009999;"  >FAR<span style="color:black;"  >        <span style="color:#009999;"  >PTR<span style="color:black;"  > ToReal </span></span></span></span></span></span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >SPM16           <span style="color:#009999;"  >ENDP<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >CSEG3           <span style="color:#009999;"  >ENDS<span style="color:black;"  >     </span></span></span></p><p><span style="color:#999999; font-family:Times New Roman; font-size:10pt;"  ><em>;----------------------------------------------------------------------------</em><span style="color:black;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    <span style="color:#009999;"  >END<span style="color:black;"  >     Start </span></span></span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>2.关于实现步骤的注释 </strong></span></p><p><span style="color:fuchsia; font-family:Batang; font-size:16pt;"  ><strong>(1)切换到保护模式的准备工作 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >建立全局描述符表，这里的全局描述符表含有两个</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位数据段的描述符、一个</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位代码段的描述符</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >和一个</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位的堆栈段描述符。此外，</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >中还有一个</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位的代码段描述符，描述</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位代码段，该描</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >述符的属性字段中的</span><span style="font-family:Times New Roman;"  >D</span><span style="font-family:宋体;"  >位为</span><span style="font-family:Times New Roman;"  >1</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:fuchsia; font-family:Batang; font-size:16pt;"  ><strong>(2)由实模式切换到保护模式 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >由实模式切换到保护模式</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位代码段的方法与切换到</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位代码段的方法相同。由保护模式</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位代码</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >段切换回实模式的方法与实例一相似。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >在保护模式下，通过如下直接段间转移指令从</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位代码段切换到</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位代码段：</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-family:Times New Roman; font-size:10pt;"  >    JUMP32   Code16_Sel<span style="color:red;"  >,&lt;<span style="color:#009999;"  >OFFSET<span style="color:black;"  > SPM16<span style="color:red;"  >&gt;<span style="color:black;"  >        </span></span></span></span></span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >从该宏指令的定义可知，该转移指令含</span><span style="font-family:Times New Roman;"  >48</span><span style="font-family:宋体;"  >位指针，其高</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位是</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位代码段的选择子，低</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位是</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >代码段的入口偏移。该指令在</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位方式下预取并执行。</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >由于在</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位方式下执行，所以要使用</span><span style="font-family:Times New Roman;"  >48</span><span style="font-family:宋体;"  >位指针。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:fuchsia; font-family:Batang; font-size:16pt;"  ><strong>(3)显示指定内存区域的内容 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >在本实例中，采用直接写显示缓冲区的方法实现显示。假设显示缓冲区的开始物理地址是</span><span style="font-family:Times New Roman;"  >0B8000H</span><span style="font-family:宋体;"  >，</span><span style="font-family:Times New Roman;"  >3</span><span style="font-family:宋体;"  >号文本显示模式，在屏幕的第一行进行显示。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>3.特别说明 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >本实例在保护方式下使用了涉及堆栈操作的指令，因此建立了一个</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位的保护模式下的堆栈段。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >本实例仍作了大量的简化处理。如：没有建立</span><span style="font-family:Times New Roman;"  >IDT</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >等，各特权级均是</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >。也没有采用分页管理机制。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >从本实例的</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >中可见，两个数据段的界限都是根据实际大小而设置的。从源程序代码段</span><span style="font-family:Times New Roman;"  >CSEG3</span><span style="font-family:宋体;"  >可见，在</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >切换到实模式之前，把一个指向似乎没有用的数据段的描述符</span><span style="font-family:Times New Roman;"  >Normal</span><span style="font-family:宋体;"  >的选择子装载到</span><span style="font-family:Times New Roman;"  >DS</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >ES</span><span style="font-family:宋体;"  >。这是</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >为什么呢</span><span style="font-family:Times New Roman;"  >? </span></span></p><p> &nbsp;</p><div style="text-align: center;"  ><table style="border-collapse:collapse; background: #0099cc;"  border="0"  ><colgroup><col style="width:26px;"  /><col style="width:45px;"  /><col style="width:62px;"  /><col style="width:79px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:27px;"  /><col style="width:44px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:35px;"  /><col style="width:44px;"  /><col style="width:44px;"  /><tbody valign="top"  ><tr><td rowspan="8"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:宋体;"  >实模</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >式下</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >段描</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >述符</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >高速</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >缓冲</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >寄存</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >器的</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >内容</span></span></p></td><td rowspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >段寄存器</span></p></td><td rowspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >段基地址</span></p></td><td rowspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:宋体;"  >段界限</span><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >固定</span><span style="font-family:Times New Roman;"  >)</span></span></p></td><td colspan="10"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:宋体;"  >段属性</span><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >固定</span><span style="font-family:Times New Roman;"  >)</span></span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >存在性</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >特权级</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >已存取</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >粒度</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >扩展方向</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >可读性</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >可写性</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >可执行</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >堆栈大小</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >一致特权</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >CS</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:宋体;"  >当前</span><span style="font-family:Times New Roman;"  >CS*16</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0000FFFFH</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >B</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >U</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >-</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >N</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >SS</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:宋体;"  >当前</span><span style="font-family:Times New Roman;"  >SS*16</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0000FFFFH</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >B</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >U</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >N</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >W</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >-</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >DS</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:宋体;"  >当前</span><span style="font-family:Times New Roman;"  >DS*16</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0000FFFFH</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >B</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >U</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >N</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >-</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >-</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >ES</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:宋体;"  >当前</span><span style="font-family:Times New Roman;"  >ES*16</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0000FFFFH</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >B</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >U</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >N</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >-</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >-</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >FS</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:宋体;"  >当前</span><span style="font-family:Times New Roman;"  >FS*16</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0000FFFFH</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >B</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >U</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >N</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >-</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >-</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >GS</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:宋体;"  >当前</span><span style="font-family:Times New Roman;"  >GS*16</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0000FFFFH</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >B</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >U</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >Y</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >N</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >-</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >-</span></p></td></tr></table></div><p> &nbsp;</p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >在分段管理机制一文中已介绍过，每个段寄存器都配有段描述符高速缓冲寄存器，这些高速缓冲寄存器</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >在实方式下仍发挥作用，只是内容上与保护模式下有所不同。如上表所示，其中</span><span style="font-family:Times New Roman;"  >"Y"</span><span style="font-family:宋体;"  >表示</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >是</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >；</span><span style="font-family:Times New Roman;"  >"N"</span><span style="font-family:宋体;"  >表示</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >否</span><span style="font-family:Times New Roman;"  >"</span><span style="font-family:宋体;"  >；</span><span style="font-family:Times New Roman;"  >"B"</span><span style="font-family:宋体;"  >表示字节；</span><span style="font-family:Times New Roman;"  >"U"</span><span style="font-family:宋体;"  >表示向上扩展，</span><span style="font-family:Times New Roman;"  >"W"</span><span style="font-family:宋体;"  >表示以字方式操作堆栈。段基地址仍是</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位，其值是相应段寄存器值</span><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >段值</span><span style="font-family:Times New Roman;"  >)</span><span style="font-family:宋体;"  >乘以</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >，在把段值装载到段寄存器时刷新。由于其值是</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位段值乘</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >上</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >，所以在实模式下基地址实际上有效位只有</span><span style="font-family:Times New Roman;"  >20</span><span style="font-family:宋体;"  >位。每个段的</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位段界限都固定为</span><span style="font-family:Times New Roman;"  >0FFFFH</span><span style="font-family:宋体;"  >，段属性的</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >许多位也是固定的。所谓固定是指在实方式下不可设置这些属性值，只能继续沿用保护方式下所设置的</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >值。因此，在准备结束保护模式回到实模式之前，要通过加载一个合适的描述符选择子到有关段寄存器</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >，以使得对应段描述符高速缓冲寄存器中含有合适的段界限和属性。本实例</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >中的描述符</span><span style="font-family:Times New Roman;"  >Normal</span><span style="font-family:宋体;"  >就是</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >这样一个描述符，在返回实模式之前把对应选择子</span><span style="font-family:Times New Roman;"  >Normal_Sel</span><span style="font-family:宋体;"  >加载到</span><span style="font-family:Times New Roman;"  >DS</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >ES</span><span style="font-family:宋体;"  >就是此目的。由于</span><span style="font-family:Times New Roman;"  >SS</span><span style="font-family:宋体;"  >段描述</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >符中的内容已符合实模式的需要，所以尽管也改变了</span><span style="font-family:Times New Roman;"  >SS</span><span style="font-family:宋体;"  >，但不需要重新加载</span><span style="font-family:Times New Roman;"  >SS(</span><span style="font-family:宋体;"  >本实例中重新加载</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >了</span><span style="font-family:Times New Roman;"  >SS</span><span style="font-family:宋体;"  >，这除了稍增加运行时间外，并没有什么坏处</span><span style="font-family:Times New Roman;"  >)</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位代码段描述符中的内容也符合实模式的需要，</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >所以在通过</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位代码段返回实模式时，</span><span style="font-family:Times New Roman;"  >CS</span><span style="font-family:宋体;"  >段描述符中的内容也符合实模式的要求。需要注意的是，不能</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >从</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位代码段返回实模式，这是因为无法实现从</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位代码段返回时</span><span style="font-family:Times New Roman;"  >CS</span><span style="font-family:宋体;"  >高速缓冲寄存器中的属性符合实模</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >式的要求</span><span style="font-family:Times New Roman;"  >(</span><span style="font-family:宋体;"  >实模式不能改变段属性</span><span style="font-family:Times New Roman;"  >)</span><span style="font-family:宋体;"  >。顺便说以下，实例一中的描述符都是符合实模式要求的。</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >段描述符高速缓冲寄存器中含有合适的段界限</span><span style="font-family:Times New Roman;"  >    </span></span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>4.关于32位代码段程序设计的说明 </strong></span></p><p><span style="color:black; font-size:10pt;"  ><span style="font-family:宋体;"  >在</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位代码段中，缺省的操作数大小是</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位，缺省的存储单元地址大小是</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位。由于串操作指令使用的</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >指针寄存器是</span><span style="font-family:Times New Roman;"  >ESI</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >EDI</span><span style="font-family:宋体;"  >，</span><span style="font-family:Times New Roman;"  >LOOP</span><span style="font-family:宋体;"  >指令使用的计数器是</span><span style="font-family:Times New Roman;"  >ECX</span><span style="font-family:宋体;"  >，所以，在代码段</span><span style="font-family:Times New Roman;"  >CSEG2</span><span style="font-family:宋体;"  >中，为了使用串操作指令</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >，对</span><span style="font-family:Times New Roman;"  >ESI</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >EDI</span><span style="font-family:宋体;"  >等寄存器赋初值。请比较代码段</span><span style="font-family:Times New Roman;"  >CSEG3</span><span style="font-family:宋体;"  >中的相关片段和实例一中的相关片段，它们是</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >代码段。</span></span></p>
</body></html>