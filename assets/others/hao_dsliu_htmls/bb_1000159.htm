<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf8"><title>163 blogs的博客：三.控制寄存器和系统地址寄存器</title>
<style type="text/css">
a{color: #000000;text-decoration : none;font-size: 10pt;}
a:hover {color: red;text-decoration : underline;}
.replyBox{padding:4px;border:1px solid #D8D8D8;}
</style></head><body><h2>三.控制寄存器和系统地址寄存器</h2>
<p align="right">发布时间：2012-5-20 16:51
<br>分类名称：80x86保护模式</p><br>
<p><span style="color:black; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >80386</span><span style="font-family:宋体;"  >控制寄存器和系统地址寄存器如下表所示。它们用于控制工作方式，控制分段管理机制及</span><span style="font-family:Times New Roman;"  >    </span><span style="font-family:宋体;"  >分页管理机制的实施。</span><span style="font-family:Times New Roman;"  >    </span></span></p><p> &nbsp;</p><div style="text-align: center;"  ><table style="border-collapse:collapse; background: #0099cc;"  border="0"  ><colgroup><col style="width:58px;"  /><col style="width:38px;"  /><col style="width:51px;"  /><col style="width:115px;"  /><col style="width:106px;"  /><col style="width:42px;"  /><col style="width:42px;"  /><col style="width:42px;"  /><col style="width:42px;"  /><col style="width:42px;"  /><tbody valign="top"  ><tr><td rowspan="5"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:宋体;"  >控</span><span style="font-family:Times New Roman;"  >         </span><span style="font-family:宋体;"  >制</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >寄存器</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >CRx</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >BIT31</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >BIT30—BIT12</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >BIT11—BIT5</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >BIT4</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >BIT3</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >BIT2</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >BIT1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >BIT0</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >CR0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >PG</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0000000000000000</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >ET</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >TS</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >EM</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >MP</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >PE</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >CR1</span></p></td><td colspan="8"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >保留</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >CR2</span></p></td><td colspan="8"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >页故障线性地址</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >CR3</span></p></td><td colspan="2"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >页目录表物理页码</span></p></td><td colspan="6"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >000000000000</span></p></td></tr></table></div><p><span style="color:black;"  ><span style="font-family:Times New Roman; font-size:10pt;"  ><br>     <div style="text-align: center;"  ><table style="border-collapse:collapse; background: #0099cc;"  border="0"  ><colgroup><col style="width:287px;"  /><col style="width:152px;"  /><col style="width:141px;"  /><tbody valign="top"  ><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  >&nbsp;</td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >BIT47—BIT16</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >BIT15—BIT0</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:宋体;"  >全局描述符表寄存器</span><span style="font-family:Times New Roman;"  >GDTR</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >基地址</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >界限</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:宋体;"  >中断描述符表寄存器</span><span style="font-family:Times New Roman;"  >IDTR</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >基地址</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >界限</span></p></td></tr></table></div><p> &nbsp;</p><table style="border-collapse:collapse;"  border="0"  ><colgroup><col style="width:283px;"  /><col style="width:12px;"  /><col style="width:283px;"  /><tbody valign="top"  ><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  none; border-right:  none;"  ><p><span style="font-size:10pt;"  >           <div style="text-align: center;"  ><table style="border-collapse:collapse; background: #0099cc;"  border="0"  ><colgroup><col style="width:187px;"  /><col style="width:93px;"  /><tbody valign="top"  ><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  >&nbsp;</td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >BIT15—BIT0</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:宋体;"  >局部描述符表寄存器</span><span style="font-family:Times New Roman;"  >LDTR</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >选择子</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:宋体;"  >任务状态段寄存器</span><span style="font-family:Times New Roman;"  >TR</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >选择子</span></p></td></tr></table></div></span>&nbsp;</p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  none; border-right:  none;"  >&nbsp;</td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  none; border-right:  none;"  ><div style="text-align: center;"  ><table style="border-collapse:collapse; background: #cc9933;"  border="0"  ><colgroup><col style="width:93px;"  /><col style="width:93px;"  /><col style="width:93px;"  /><tbody valign="top"  ><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #ffcc66 0.75pt; border-left:  solid #ffcc66 0.75pt; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman; font-size:10pt;"  >BIT31—BIT0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #ffcc66 0.75pt; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman; font-size:10pt;"  >BIT31—BIT0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #ffcc66 0.75pt; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:Times New Roman; font-size:10pt;"  >BIT11—BIT0</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #ffcc66 0.75pt; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:宋体; font-size:10pt;"  >基地址</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:宋体; font-size:10pt;"  >界限</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:宋体; font-size:10pt;"  >属性</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #ffcc66 0.75pt; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:宋体; font-size:10pt;"  >基地址</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:宋体; font-size:10pt;"  >界限</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #996600 0.75pt; border-right:  solid #996600 0.75pt;"  ><p style="text-align: center;"  ><span style="color:blue; font-family:宋体; font-size:10pt;"  >属性</span></p></td></tr></table></div></td></tr></table><p> &nbsp;</p></span><p><span style="color:red; font-family:Batang; font-size:22pt;"  ><strong>&lt;一&gt;控制寄存器 </strong></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >从上表可见，</span><span style="font-family:Times New Roman;"  >80386</span><span style="font-family:宋体;"  >有四个</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位的控制寄存器，分别命名位</span><span style="font-family:Times New Roman;"  >CR0</span><span style="font-family:宋体;"  >、</span><span style="font-family:Times New Roman;"  >CR1</span><span style="font-family:宋体;"  >、</span><span style="font-family:Times New Roman;"  >CR2</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >。但</span><span style="font-family:Times New Roman;"  >CR1</span><span style="font-family:宋体;"  >被保留，</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >供今后开发的处理器使用，在</span><span style="font-family:Times New Roman;"  >80386</span><span style="font-family:宋体;"  >中不能使用</span><span style="font-family:Times New Roman;"  >CR1</span><span style="font-family:宋体;"  >，否则会引起无效指令操作异常。</span><span style="font-family:Times New Roman;"  >CR0</span><span style="font-family:宋体;"  >包括指</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >示处理器工作方式的控制位，包含启用和禁止分页管理机制的控制位，包含控制浮点协处理器</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >操作的控制位。</span><span style="font-family:Times New Roman;"  >CR2</span><span style="font-family:宋体;"  >及</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >由分页管理机制使用。</span><span style="font-family:Times New Roman;"  >CR0</span><span style="font-family:宋体;"  >中的位</span><span style="font-family:Times New Roman;"  >5—</span><span style="font-family:宋体;"  >位</span><span style="font-family:Times New Roman;"  >30</span><span style="font-family:宋体;"  >及</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >中的位</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >至位</span><span style="font-family:Times New Roman;"  >11</span><span style="font-family:宋体;"  >是保留</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >位，这些位不能是随意值，必须为</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >控制寄存器</span><span style="font-family:Times New Roman;"  >CR0</span><span style="font-family:宋体;"  >的低</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位等同于</span><span style="font-family:Times New Roman;"  >80286</span><span style="font-family:宋体;"  >的机器状态字</span><span style="font-family:Times New Roman;"  >MSW</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>1.保护控制位 </strong></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >控制寄存器</span><span style="font-family:Times New Roman;"  >CR0</span><span style="font-family:宋体;"  >中的位</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >用</span><span style="font-family:Times New Roman;"  >PE</span><span style="font-family:宋体;"  >标记，位</span><span style="font-family:Times New Roman;"  >31</span><span style="font-family:宋体;"  >用</span><span style="font-family:Times New Roman;"  >PG</span><span style="font-family:宋体;"  >标记，这两个位控制分段和分页管理机制的操作，</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >所以把它们称为保护控制位。</span><span style="font-family:Times New Roman;"  >PE</span><span style="font-family:宋体;"  >控制分段管理机制。</span><span style="font-family:Times New Roman;"  >PE=0</span><span style="font-family:宋体;"  >，处理器运行于实模式；</span><span style="font-family:Times New Roman;"  >PE=1</span><span style="font-family:宋体;"  >，处理</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >器运行于保护方式。</span><span style="font-family:Times New Roman;"  >PG</span><span style="font-family:宋体;"  >控制分页管理机制。</span><span style="font-family:Times New Roman;"  >PG=0</span><span style="font-family:宋体;"  >，禁用分页管理机制，此时分段管理机制产生</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >的线性地址直接作为物理地址使用；</span><span style="font-family:Times New Roman;"  >PG=1</span><span style="font-family:宋体;"  >，启用分页管理机制，此时线性地址经分页管理机制</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >转换位物理地址。关于分页管理机制的具体介绍在后面的文章中进行。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >下表列出了通过使用</span><span style="font-family:Times New Roman;"  >PE</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >PG</span><span style="font-family:宋体;"  >位选择的处理器工作方式。由于只有在保护方式下才可启用分页机</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >制，所以尽管两个位分别为</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >1</span><span style="font-family:宋体;"  >共可以有四种组合，但只有三种组合方式有效。</span><span style="font-family:Times New Roman;"  >PE=0</span><span style="font-family:宋体;"  >且</span><span style="font-family:Times New Roman;"  >PG=1</span><span style="font-family:宋体;"  >是</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >无效组合，因此，用</span><span style="font-family:Times New Roman;"  >PG</span><span style="font-family:宋体;"  >为</span><span style="font-family:Times New Roman;"  >1</span><span style="font-family:宋体;"  >且</span><span style="font-family:Times New Roman;"  >PE</span><span style="font-family:宋体;"  >为</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >的值装入</span><span style="font-family:Times New Roman;"  >CR0</span><span style="font-family:宋体;"  >寄存器将引起通用保护异常。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >需要注意的是，</span><span style="font-family:Times New Roman;"  >PG</span><span style="font-family:宋体;"  >位的改变将使系统启用或禁用分页机制，因而只有当所执行的程序的</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >代码和至少有一部分数据在线性地址空间和物理地址空间具有相同的地址的情况下，才</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >能改变</span><span style="font-family:Times New Roman;"  >PG</span><span style="font-family:宋体;"  >位。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p> &nbsp;</p><div style="text-align: center;"  ><table style="border-collapse:collapse; background: #0099cc;"  border="0"  ><colgroup><col style="width:131px;"  /><col style="width:49px;"  /><col style="width:46px;"  /><col style="width:354px;"  /><tbody valign="top"  ><tr><td rowspan="5"  vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-size:10pt;"  ><span style="font-family:Times New Roman;"  >PG</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >PE<br></span><span style="font-family:宋体;"  >位与处</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >理器工</span><span style="font-family:Times New Roman;"  ><br></span><span style="font-family:宋体;"  >作模式</span></span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >PG</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >PE</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  solid #00ccff 0.75pt; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:宋体; font-size:10pt;"  >处理器工作方式</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white; font-family:宋体; font-size:10pt;"  >实模式</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white; font-family:宋体; font-size:10pt;"  >保护模式，禁用分页机制</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >0</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white; font-family:宋体; font-size:10pt;"  >非法组合</span></p></td></tr><tr><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  solid #00ccff 0.75pt; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p style="text-align: center;"  ><span style="color:white; font-family:Times New Roman; font-size:10pt;"  >1</span></p></td><td vAlign="middle"  style="padding-top: 1px; padding-left: 1px; padding-bottom: 1px; padding-right: 1px; border-top:  none; border-left:  none; border-bottom:  solid #006699 0.75pt; border-right:  solid #006699 0.75pt;"  ><p><span style="color:white; font-family:宋体; font-size:10pt;"  >保护方式，启用分页机制</span></p></td></tr></table></div><p> &nbsp;</p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>2.协处理器控制位 </strong></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >控制寄存器</span><span style="font-family:Times New Roman;"  >CR0</span><span style="font-family:宋体;"  >中的位</span><span style="font-family:Times New Roman;"  >1—</span><span style="font-family:宋体;"  >位</span><span style="font-family:Times New Roman;"  >4</span><span style="font-family:宋体;"  >分别标记为</span><span style="font-family:Times New Roman;"  >MP(</span><span style="font-family:宋体;"  >算术存在位</span><span style="font-family:Times New Roman;"  >)</span><span style="font-family:宋体;"  >、</span><span style="font-family:Times New Roman;"  >EM(</span><span style="font-family:宋体;"  >模拟位</span><span style="font-family:Times New Roman;"  >)</span><span style="font-family:宋体;"  >、</span><span style="font-family:Times New Roman;"  >TS(</span><span style="font-family:宋体;"  >任务切换位</span><span style="font-family:Times New Roman;"  >)</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >ET(</span><span style="font-family:宋体;"  >扩展类型位</span><span style="font-family:Times New Roman;"  >)</span><span style="font-family:宋体;"  >，它们控制浮点协处理器的操作。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >当处理器复位时，</span><span style="font-family:Times New Roman;"  >ET</span><span style="font-family:宋体;"  >位被初始化，以指示系统中数字协处理器的类型。如果系统中存在</span><span style="font-family:Times New Roman;"  >80387</span><span style="font-family:宋体;"  >协处理器，那么</span><span style="font-family:Times New Roman;"  >ET</span><span style="font-family:宋体;"  >位置</span><span style="font-family:Times New Roman;"  >1</span><span style="font-family:宋体;"  >；如果系统中存在</span><span style="font-family:Times New Roman;"  >80287</span><span style="font-family:宋体;"  >协处理器或者不存在协处理器，那</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >么</span><span style="font-family:Times New Roman;"  >ET</span><span style="font-family:宋体;"  >位清</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="font-size:10pt;"  ><span style="font-family:Times New Roman;"  >EM</span><span style="font-family:宋体;"  >位控制浮点指令的执行是用软件模拟，还是由硬件执行。</span><span style="font-family:Times New Roman;"  >EM=0</span><span style="font-family:宋体;"  >时，硬件控制浮点指令</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >传送到协处理器；</span><span style="font-family:Times New Roman;"  >EM=1</span><span style="font-family:宋体;"  >时，浮点指令由软件模拟。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="font-size:10pt;"  ><span style="font-family:Times New Roman;"  >TS</span><span style="font-family:宋体;"  >位用于加快任务的切换，通过在必要时才进行协处理器切换的方法实现这一目的。每</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >当进行任务切换时，处理器把</span><span style="font-family:Times New Roman;"  >TS</span><span style="font-family:宋体;"  >置</span><span style="font-family:Times New Roman;"  >1</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >TS=1</span><span style="font-family:宋体;"  >时，浮点指令将产生设备不可用</span><span style="font-family:Times New Roman;"  >(DNA)</span><span style="font-family:宋体;"  >异常。</span><span style="font-family:Times New Roman;"  >MP</span><span style="font-family:宋体;"  >位控制</span><span style="font-family:Times New Roman;"  >WAIT</span><span style="font-family:宋体;"  >指令在</span><span style="font-family:Times New Roman;"  >TS=1</span><span style="font-family:宋体;"  >时，是否产生</span><span style="font-family:Times New Roman;"  >DNA</span><span style="font-family:宋体;"  >异常。</span><span style="font-family:Times New Roman;"  >MP=1</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >TS=1</span><span style="font-family:宋体;"  >时，</span><span style="font-family:Times New Roman;"  >WAIT</span><span style="font-family:宋体;"  >产生异常；</span><span style="font-family:Times New Roman;"  >MP=0</span><span style="font-family:宋体;"  >时</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >，</span><span style="font-family:Times New Roman;"  >WAIT</span><span style="font-family:宋体;"  >指令忽略</span><span style="font-family:Times New Roman;"  >TS</span><span style="font-family:宋体;"  >条件，不产生异常。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>3.CR2和CR3 </strong></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >控制寄存器</span><span style="font-family:Times New Roman;"  >CR2</span><span style="font-family:宋体;"  >和</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >由分页管理机制使用。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="font-size:10pt;"  ><span style="font-family:Times New Roman;"  >CR2</span><span style="font-family:宋体;"  >用于发生页异常时报告出错信息。当发生页异常时，处理器把引起页异常的线性地址</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >保存在</span><span style="font-family:Times New Roman;"  >CR2</span><span style="font-family:宋体;"  >中。操作系统中的页异常处理程序可以检查</span><span style="font-family:Times New Roman;"  >CR2</span><span style="font-family:宋体;"  >的内容，从而查出线性地址空</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >间中的哪一页引起本次异常。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="font-size:10pt;"  ><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >用于保存页目录表的其始物理地址。由于目录是页对齐的，所以仅高</span><span style="font-family:Times New Roman;"  >20</span><span style="font-family:宋体;"  >位有效，低</span><span style="font-family:Times New Roman;"  >12</span><span style="font-family:宋体;"  >位保留未用。向</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >中装入一个新值时，低</span><span style="font-family:Times New Roman;"  >12</span><span style="font-family:宋体;"  >位必须为</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >；但从</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >中取值时，低</span><span style="font-family:Times New Roman;"  >12</span><span style="font-family:宋体;"  >位被忽</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >略。每当用</span><span style="font-family:Times New Roman;"  >MOV</span><span style="font-family:宋体;"  >指令重置</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >的值时，会导致分页机制高速缓冲区的内容无效，用此方法，</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >可以在启用分页机制之前，即把</span><span style="font-family:Times New Roman;"  >PG</span><span style="font-family:宋体;"  >位置</span><span style="font-family:Times New Roman;"  >1</span><span style="font-family:宋体;"  >之前，预先刷新分页机制的高速缓存。</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >寄存</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >器即使在</span><span style="font-family:Times New Roman;"  >CR0</span><span style="font-family:宋体;"  >寄存器的</span><span style="font-family:Times New Roman;"  >PG</span><span style="font-family:宋体;"  >位或</span><span style="font-family:Times New Roman;"  >PE</span><span style="font-family:宋体;"  >位为</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >时也可装入，如在实模式下也可设置</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >，以便进行</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >分页机制的初始化。在任务切换时，</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >要被改变，但是如果新任务中</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >的值与原任务</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >中</span><span style="font-family:Times New Roman;"  >CR3</span><span style="font-family:宋体;"  >的值相同，那么处理器不刷新分页高速缓存，以便当任务共享也表时有较快的执行</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >速度。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="color:red; font-family:Batang; font-size:22pt;"  ><strong>&lt;二&gt;系统地址寄存器 </strong></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >全局描述符表</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >、局部描述符表</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >和中断描述符表</span><span style="font-family:Times New Roman;"  >IDT</span><span style="font-family:宋体;"  >等都是保护方式下非常重要的特</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >殊段，它们包含有为段机制所用的重要表格。为了方便快速地定位这些段，处理器采用</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >一些特殊的寄存器保存这些段的基地址和段界限。我们把这些特殊的寄存器称为系统地</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >址寄存器。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>1.全局描述符表寄存器GDTR </strong></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >如本文开始处的表格所示，</span><span style="font-family:Times New Roman;"  >GDTR</span><span style="font-family:宋体;"  >长</span><span style="font-family:Times New Roman;"  >48</span><span style="font-family:宋体;"  >位，其中高</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位为基地址，低</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位为界限。由于</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >不能有</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >本身之内的描述符进行描述定义，所以处理器采用</span><span style="font-family:Times New Roman;"  >GDTR</span><span style="font-family:宋体;"  >为</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >这一特殊的系统</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >段提供一个伪描述符。</span><span style="font-family:Times New Roman;"  >GDTR</span><span style="font-family:宋体;"  >给定了</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >，如下图所示。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p style="text-align: center;"  ><img title="三.控制寄存器和系统地址寄存器 - Howie - Dspace"  src="pic/img3.ph.126.net__injqDyVZoVBqoVE-sPZPA==_1005991566781413713.jpg"  alt=""  /><span style="font-family:Times New Roman; font-size:10pt;"  >     </span></p><p><span style="font-size:10pt;"  ><span style="font-family:Times New Roman;"  >GDTR</span><span style="font-family:宋体;"  >中的段界限以字节为单位。由于段选择子中只有</span><span style="font-family:Times New Roman;"  >13</span><span style="font-family:宋体;"  >位作为描述符索引，而每个描述</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >符长</span><span style="font-family:Times New Roman;"  >8</span><span style="font-family:宋体;"  >个字节，所以用</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位的界限足够。通常，对于含有</span><span style="font-family:Times New Roman;"  >N</span><span style="font-family:宋体;"  >个描述符的描述符表的段界限</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >设为</span><span style="font-family:Times New Roman;"  >8*N-1</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >利用结构类型可定义伪描述符如下：</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="font-family:Times New Roman; font-size:10pt;"  >    PDESC STRUC </span></p><p><span style="font-family:Times New Roman; font-size:10pt;"  >    LIMIT DW 0 </span></p><p><span style="font-family:Times New Roman; font-size:10pt;"  >    BASE  DD 0 </span></p><p><span style="font-family:Times New Roman; font-size:10pt;"  >    PDESC ENDS </span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>2.局部描述符表寄存器LDTR </strong></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >局部描述符表寄存器</span><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >规定当前任务使用的局部描述符表</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >。如本文开始处的表格</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >所示，</span><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >类似于段寄存器，由程序员可见的</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位的寄存器和程序员不可见的高速缓冲</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >寄存器组成。实际上，每个任务的局部描述符表</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >作为系统的一个特殊段，由一个描</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >述符描述。而用于描述符</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >的描述符存放在</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >中。在初始化或任务切换过程中，把描</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >述符对应任务</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >的描述符的选择子装入</span><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >，处理器根据装入</span><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >可见部分的选择子</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >，从</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >中取出对应的描述符，并把</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >的基地址、界限和属性等信息保存到</span><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >的不可</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >见的高速缓冲寄存器中。随后对</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >的访问，就可根据保存在高速缓冲寄存器中的有关</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >信息进行合法性检查。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="font-size:10pt;"  ><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >寄存器包含当前任务的</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >的选择子。所以，装入到</span><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >的选择子必须确定一个位</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >于</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >中的类型为</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >的系统段描述符，也即选择子中的</span><span style="font-family:Times New Roman;"  >TI</span><span style="font-family:宋体;"  >位必须是</span><span style="font-family:Times New Roman;"  >0</span><span style="font-family:宋体;"  >，而且描述符中的</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >类型字段所表示的类型必须为</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >可以用一个空选择子装入</span><span style="font-family:Times New Roman;"  >LDTR</span><span style="font-family:宋体;"  >，这表示当前任务没有</span><span style="font-family:Times New Roman;"  >LDT</span><span style="font-family:宋体;"  >。在这种情况下，所有装入到</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >段寄存器的选择子都必须指示</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >中的描述符，也即当前任务涉及的段均由</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >中的描</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >述符来描述。如果再把一个</span><span style="font-family:Times New Roman;"  >TI</span><span style="font-family:宋体;"  >位为</span><span style="font-family:Times New Roman;"  >1</span><span style="font-family:宋体;"  >的选择子装入到段寄存器，将引起异常。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>3.中断描述符表寄存器IDTR </strong></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >中断描述符表寄存器</span><span style="font-family:Times New Roman;"  >IDTR</span><span style="font-family:宋体;"  >指向中断描述符表</span><span style="font-family:Times New Roman;"  >IDT</span><span style="font-family:宋体;"  >。如本文开始处的表格所示，</span><span style="font-family:Times New Roman;"  >IDTR</span><span style="font-family:宋体;"  >长</span><span style="font-family:Times New Roman;"  >48</span><span style="font-family:宋体;"  >位，其中</span><span style="font-family:Times New Roman;"  >32</span><span style="font-family:宋体;"  >位的基地址规定</span><span style="font-family:Times New Roman;"  >IDT</span><span style="font-family:宋体;"  >的基地址，</span><span style="font-family:Times New Roman;"  >16</span><span style="font-family:宋体;"  >位的界限规定</span><span style="font-family:Times New Roman;"  >IDT</span><span style="font-family:宋体;"  >的段界限。由于</span><span style="font-family:Times New Roman;"  >80386</span><span style="font-family:宋体;"  >只</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >支持</span><span style="font-family:Times New Roman;"  >256</span><span style="font-family:宋体;"  >个中断</span><span style="font-family:Times New Roman;"  >/</span><span style="font-family:宋体;"  >异常，所以</span><span style="font-family:Times New Roman;"  >IDT</span><span style="font-family:宋体;"  >表最大长度是</span><span style="font-family:Times New Roman;"  >2K</span><span style="font-family:宋体;"  >，以字节位单位的段界限为</span><span style="font-family:Times New Roman;"  >7FFH</span><span style="font-family:宋体;"  >。</span><span style="font-family:Times New Roman;"  >IDTR</span><span style="font-family:宋体;"  >指示</span><span style="font-family:Times New Roman;"  >IDT</span><span style="font-family:宋体;"  >的方式与</span><span style="font-family:Times New Roman;"  >GDTR</span><span style="font-family:宋体;"  >指示</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >的方式相同。</span><span style="font-family:Times New Roman;"  >      </span></span></p><p><span style="color:red; font-family:Batang; font-size:16pt;"  ><strong>4.任务状态段寄存器TR </strong></span></p><p><span style="font-size:10pt;"  ><span style="font-family:宋体;"  >任务状态段寄存器</span><span style="font-family:Times New Roman;"  >TR</span><span style="font-family:宋体;"  >包含指示描述当前任务的任务状态段的描述符选择子，从而规定</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >了当前任务的状态段。任务状态段的格式在后面的文章中介绍。如本文开始处的表格</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >所示，</span><span style="font-family:Times New Roman;"  >TR</span><span style="font-family:宋体;"  >也有程序员可见和不可见两部分。当把任务状态段的选择子装入到</span><span style="font-family:Times New Roman;"  >TR</span><span style="font-family:宋体;"  >可见部</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >分时，处理器自动把选择子所索引的描述符中的段基地址等信息保存到不可见的高速</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >缓冲寄存器中。在此之后，对当前任务状态段的访问可快速方便地进行。装入到</span><span style="font-family:Times New Roman;"  >TR</span><span style="font-family:宋体;"  >的</span><span style="font-family:Times New Roman;"  >      </span><span style="font-family:宋体;"  >选择子不能为空，必须索引位于</span><span style="font-family:Times New Roman;"  >GDT</span><span style="font-family:宋体;"  >中的描述符，且描述符的类型必须是</span><span style="font-family:Times New Roman;"  >TSS</span><span style="font-family:宋体;"  >。</span></span></p></span></p>
</body></html>