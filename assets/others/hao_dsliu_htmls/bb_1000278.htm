<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf8"><title>163 blogs的博客：设计模式心得</title>
<style type="text/css">
a{color: #000000;text-decoration : none;font-size: 10pt;}
a:hover {color: red;text-decoration : underline;}
.replyBox{padding:4px;border:1px solid #D8D8D8;}
</style></head><body><h2>设计模式心得</h2>
<p align="right">发布时间：2010-8-25 17:36
<br>分类名称：Design Pattern</p><br>
  <DIV style="TEXT-ALIGN: left;"><SPAN style="FONT-FAMILY: 宋体;">原则</SPAN></DIV>  <P><SPAN lang="EN-US"></SPAN></P>  <P><STRONG><SPAN style="FONT-FAMILY: 宋体;">单一职责原则</SPAN> <SPAN lang="EN-US">(SRP, Single Responsibility Principle)</SPAN></STRONG></P>  <P><SPAN lang="EN-US"></SPAN><SPAN style="FONT-FAMILY: 宋体;">就一个类而言，应该仅有一个引起它变化的原因。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN-TOP: 7.8pt;"><SPAN lang="EN-US">&nbsp;</SPAN></P>  <P><STRONG><SPAN style="FONT-FAMILY: 宋体;">开放－封闭原则</SPAN><SPAN lang="EN-US"> (OCP, Open-Closed Principle)</SPAN></STRONG></P>  <P style="MARGIN-TOP: 7.8pt; TEXT-INDENT: 21pt;"><SPAN style="FONT-FAMILY: 宋体;">一个软件实体应当对扩展开放</SPAN><SPAN lang="EN-US">(Open for extension)</SPAN><SPAN style="FONT-FAMILY: 宋体;">，对修改关闭</SPAN><SPAN lang="EN-US">(Close for modification)</SPAN><SPAN style="FONT-FAMILY: 宋体;">。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN-TOP: 7.8pt; TEXT-INDENT: 21pt;"><SPAN style="FONT-FAMILY: 宋体;">通过扩展已有软件系统，可以提供新的行为，以满足对软件的新的需求，使变化中的软件有一定的适应性和灵活性。已有软件模块，特别是最重要的抽象层模块不能再修改，这使变化中的软件系统有一定的稳定性和延续性。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN-TOP: 7.8pt;"><SPAN lang="EN-US">&nbsp;</SPAN></P>  <P><STRONG><SPAN style="FONT-FAMILY: 宋体;">依赖倒置原则</SPAN><SPAN lang="EN-US"> (DIP, Dependence Inversion Principle)</SPAN></STRONG></P>  <P><STRONG><SPAN lang="EN-US"></SPAN></STRONG><B><SPAN style="FONT-FAMILY: 宋体;">里氏替换原则</SPAN><SPAN lang="EN-US"> (LSP, Liskov Substitution Principle)</SPAN></B></P>  <P><B><SPAN lang="EN-US"></SPAN></B><SPAN style="FONT-FAMILY: 宋体;">子类型</SPAN><SPAN lang="EN-US">(subtype)</SPAN><SPAN style="FONT-FAMILY: 宋体;">必须能够替换它们的基类型。</SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体;"></SPAN><SPAN style="FONT-FAMILY: 宋体;">抽象不应该依赖细节，细节应该依赖抽象。</SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体;"></SPAN><SPAN style="FONT-FAMILY: 宋体;">或</SPAN> <SPAN style="FONT-FAMILY: 宋体;">要依赖于抽象，不要依赖于具体。</SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体;"></SPAN><SPAN style="FONT-FAMILY: 宋体;">或</SPAN> <SPAN style="FONT-FAMILY: 宋体;">要针对接口编程，不要针对实现编程。</SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体;"></SPAN><SPAN style="FONT-FAMILY: 宋体;">依赖倒置原则使细节和策略都依赖于抽象，抽象的稳定性决定了系统的稳定性。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P><SPAN lang="EN-US">&nbsp;</SPAN></P>  <P><B><SPAN style="FONT-FAMILY: 宋体; COLOR: red;">说明：</SPAN><SPAN style="COLOR: red;" lang="EN-US"></SPAN></B></P>  <P><SPAN style="COLOR: red;" lang="EN-US">SRP </SPAN><SPAN style="FONT-FAMILY: 宋体; COLOR: red;">增强了类的内聚性。</SPAN><SPAN style="COLOR: red;" lang="EN-US"></SPAN></P>  <P><SPAN style="COLOR: red;" lang="EN-US">OCP </SPAN><SPAN style="FONT-FAMILY: 宋体; COLOR: red;">增强了系统的可扩展性以及稳定性（在稳定的系统上进行扩展，要比修改系统稳定的多）。</SPAN><SPAN style="COLOR: red;" lang="EN-US"></SPAN></P>  <P><SPAN style="COLOR: red;" lang="EN-US">DIP </SPAN><SPAN style="FONT-FAMILY: 宋体; COLOR: red;">降低了系统各个部件之间的耦合性，使其能够独立变化，此原则也使得程序变得可扩展。</SPAN><SPAN style="COLOR: red;" lang="EN-US"></SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体; COLOR: red;">有了</SPAN><SPAN style="COLOR: red;" lang="EN-US">LSP</SPAN><SPAN style="FONT-FAMILY: 宋体; COLOR: red;">，才能够使得在不需要更改“父类”模块的前提下，来继承父类以及对其功能扩展。</SPAN><SPAN style="COLOR: red;" lang="EN-US"></SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体; COLOR: red;">所以</SPAN><SPAN style="COLOR: red;" lang="EN-US">LSP</SPAN><SPAN style="FONT-FAMILY: 宋体; COLOR: red;">和</SPAN><SPAN style="COLOR: red;" lang="EN-US">DIP</SPAN><SPAN style="FONT-FAMILY: 宋体; COLOR: red;">目的都是一样的。</SPAN><SPAN style="COLOR: red;" lang="EN-US"></SPAN></P>  <P><SPAN lang="EN-US">&nbsp;</SPAN></P>  <P><STRONG><SPAN style="FONT-FAMILY: 宋体;">对封装的认识</SPAN><SPAN lang="EN-US"></SPAN></STRONG></P>  <P><SPAN style="FONT-FAMILY: 宋体;">封装是任何数据的隐藏。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体;">数据的隐藏</SPAN><SPAN lang="EN-US"></SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体;">实现的隐藏</SPAN><SPAN lang="EN-US"></SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体;">类隐藏（抽象类或接口后）</SPAN><SPAN lang="EN-US"></SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体;">设计隐藏</SPAN><SPAN lang="EN-US"></SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体;">实例化隐藏</SPAN></P><SPAN lang="EN-US">  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">设计模式分为</SPAN><SPAN lang="EN-US"><FONT face="Calibri">3</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">大类，分类建立在模式的概念性的动机上。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><B style="mso-bidi-font-weight: normal;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">行为型</SPAN></B><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式用于封装行为的变化。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><B style="mso-bidi-font-weight: normal;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">结构性</SPAN></B><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式用于将已有的代码集成到新的面向对象中去。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><B style="mso-bidi-font-weight: normal;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">创建型</SPAN></B><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式用于管理对象创建。</SPAN></P></SPAN>  <P><STRONG><SPAN lang="EN-US">GoF 23</SPAN><SPAN style="FONT-FAMILY: 宋体;">种模式</SPAN></STRONG><SPAN lang="EN-US"></SPAN></P>  <P><SPAN lang="EN-US"><STRONG>Factory</STRONG></SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体;">没有</SPAN><SPAN lang="EN-US">Factory Pattern</SPAN><SPAN style="FONT-FAMILY: 宋体;">的时候：</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="TEXT-INDENT: -21pt; MARGIN-LEFT: 21pt;"><SPAN lang="EN-US"><SPAN>[1].<SPAN style="FONT: 7pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体;">诸如</SPAN><SPAN lang="EN-US">new Instance</SPAN><SPAN style="FONT-FAMILY: 宋体;">此类的代码“遍及各地”。而且在以后要扩展新的类实例的时候，必定好回头来修改原有代码。（虽然这种改动一般不会带来不良后果，但如果系统很庞大，庞大了上千个类，这种修改将是非常浪费时间，而且以后这种工作将会不停的重复）。显然增加了维护成本。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="TEXT-INDENT: -21pt; MARGIN-LEFT: 21pt;"><SPAN lang="EN-US"><SPAN>[2].<SPAN style="FONT: 7pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体;">第一种情况是在有源代码的情况下，如果目前面临的只是个导出的类头文件和对应的二进制动态库，修改程序是不可能的，将无法实现新增功能的“梦想”。也就是我以前编写的代码无法预知以后将会有什么样的类实例来运作，我顶多只能知道当时用的某个类实例。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P><SPAN lang="EN-US">&nbsp;</SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体;">使用</SPAN><SPAN lang="EN-US">Factory</SPAN><SPAN style="FONT-FAMILY: 宋体;">模式，可以解决上面的问题。当需要增加新的类来实现新功能的时候，只需要增加新的类，增加对应</SPAN><SPAN lang="EN-US">Factory</SPAN><SPAN style="FONT-FAMILY: 宋体;">子类，用</SPAN><SPAN lang="EN-US">Factory</SPAN><SPAN style="FONT-FAMILY: 宋体;">子类中的接口</SPAN><SPAN lang="EN-US">new</SPAN><SPAN style="FONT-FAMILY: 宋体;">出新增加的类的实例，以前的代码无需任何变动，程序继续正常运作。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P><SPAN lang="EN-US">&nbsp;</SPAN></P>  <P><B><SPAN style="FONT-FAMILY: 宋体;">作用：</SPAN><SPAN lang="EN-US"></SPAN></B></P>  <P style="TEXT-INDENT: -18pt; MARGIN-LEFT: 18pt;"><SPAN lang="EN-US"><SPAN>1．<SPAN style="FONT: 7pt 'Times New Roman';">&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体;">将实例化操作作为单独一种“职责”封装，将类的实现和类的实例化解耦。将实例化操作集中处理，将“分散各地”的代码统一管理。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="TEXT-INDENT: -18pt; MARGIN-LEFT: 18pt;"><SPAN lang="EN-US"><SPAN>2．<SPAN style="FONT: 7pt 'Times New Roman';">&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体;">将实例化操作延迟到子类进行（也就是可以在以后进行操作，可扩展）。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P><SPAN lang="EN-US">&nbsp;</SPAN></P>  <P><B><SPAN style="FONT-FAMILY: 宋体;">缺点：</SPAN><SPAN lang="EN-US"></SPAN></B></P>  <P><SPAN style="FONT-FAMILY: 宋体;">增加了代码量，一个新增的类，得对应一个</SPAN><SPAN lang="EN-US">Factory</SPAN><SPAN style="FONT-FAMILY: 宋体;">子类来进行实例化操作。当然，你可以将</SPAN><SPAN lang="EN-US">Factory</SPAN><SPAN style="FONT-FAMILY: 宋体;">中的接口内实现一个</SPAN><SPAN lang="EN-US">switch</SPAN><SPAN style="FONT-FAMILY: 宋体;">，根据不同的传入参数来实例化不同的类实例，这样就得修改以前的代码，但这种修改将是集中的（虽然违反了封闭开放原则，但原则不一定得遵守，根据不同的环境来灵活运用）。</SPAN><SPAN lang="EN-US"></SPAN></P><SPAN style="FONT-FAMILY: 'Calibri','sans-serif'; FONT-SIZE: 10.5pt;" lang="EN-US"><BR style="PAGE-BREAK-BEFORE: always;" clear="all"></SPAN>  <P style="TEXT-ALIGN: left;" align="left"><SPAN lang="EN-US"></SPAN></P>  <P><SPAN lang="EN-US">Factory</SPAN><SPAN style="FONT-FAMILY: 宋体;">有几种版本：</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="TEXT-INDENT: -21pt; MARGIN-LEFT: 21pt;"><SPAN style="FONT-FAMILY: Wingdings;" lang="EN-US"><SPAN><SPAN style="FONT: 7pt 'Times New Roman';"></SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体;">抽象工厂</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="TEXT-INDENT: 0cm; MARGIN-LEFT: 21pt;"><SPAN style="FONT-FAMILY: 宋体;">抽象工厂是建立在“抽象”的基础上，有“批量”生产的含义。创建一组相关或者相互依赖的对象。</SPAN><SPAN lang="EN-US"></SPAN></P>  <DIV><IMG style="MARGIN: 0pt 10px 0pt 0pt;" title="2010年08月25日 - Dsliu - Dspace" alt="2010年08月25日 - Dsliu - Dspace" src="pic/img314.ph.126.net_nMQ_47SLVlY52aOq9B6O-Q==_3872251254608755742.png"></DIV>  <P style="TEXT-INDENT: 0cm; MARGIN-LEFT: 21pt;"><SPAN lang="EN-US"></SPAN></P>  <P style="TEXT-INDENT: -21pt; MARGIN-LEFT: 21pt;"><SPAN style="FONT-FAMILY: Wingdings;" lang="EN-US"><SPAN><SPAN style="FONT: 7pt 'Times New Roman';"></SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体;">简单工厂</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="TEXT-INDENT: 0cm; MARGIN-LEFT: 21pt;"><SPAN style="FONT-FAMILY: 宋体;">简单工厂就是使用一个工厂类，此类对应某个抽象类所有的子类实例，工厂类内部使用</SPAN><SPAN lang="EN-US">switch</SPAN><SPAN style="FONT-FAMILY: 宋体;">语句来实例不同的子类。</SPAN><SPAN lang="EN-US"></SPAN></P>  <DIV><IMG style="MARGIN: 0pt 10px 0pt 0pt;" title="2010年08月25日 - Dsliu - Dspace" alt="2010年08月25日 - Dsliu - Dspace" src="pic/img767.ph.126.net_v7wl4vg2i-x9gOxlXgLXJg==_4916241943228340423.png"></DIV>  <P style="TEXT-INDENT: 0cm; MARGIN-LEFT: 21pt;"><SPAN lang="EN-US"></SPAN></P>  <P style="TEXT-INDENT: -21pt; MARGIN-LEFT: 21pt;"><SPAN style="FONT-FAMILY: Wingdings;" lang="EN-US"><SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体;">工厂方法</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="TEXT-INDENT: 0cm; MARGIN-LEFT: 21pt;"><SPAN style="FONT-FAMILY: 宋体;">工厂方法则是每一个要被实例化的子类，都对应一个相应的工厂类。</SPAN><SPAN lang="EN-US"></SPAN></P>  <DIV><IMG style="MARGIN: 0pt 10px 0pt 0pt;" title="2010年08月25日 - Dsliu - Dspace" alt="2010年08月25日 - Dsliu - Dspace" src="pic/img.ph.126.net_0uZcMJQ0YwgoEAli2y3P6w==_2330612807164714342.png"></DIV>  <P style="TEXT-INDENT: 0cm; MARGIN-LEFT: 21pt;"><SPAN lang="EN-US"></SPAN></P><SPAN lang="EN-US">  <P style="MARGIN: 6pt 0cm;"><SPAN lang="EN-US"><STRONG><FONT size="3"><FONT face="Calibri">Prototype</FONT></FONT></STRONG></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">定义</SPAN><SPAN lang="EN-US"><FONT face="Calibri">:</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">用原型实例指定创建对象的种类</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">并且通过拷贝这些原型创建新的对象</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><SPAN lang="EN-US"><FONT face="Calibri">Prototype </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式允许一个对象再创建另外一个可定制的对象，根本无需知道任何如何创建的细节</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">工作原理是</SPAN><SPAN lang="EN-US"><FONT face="Calibri">:</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">通过将一个原型对象传给那个要发动创建的对象，这个要发动创建的对象通过请求原型对象拷贝它们自己来实施创建。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 6pt 0cm;"><SPAN lang="EN-US"><STRONG><FONT size="3"><FONT face="Calibri">Builder</FONT></FONT></STRONG></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">没有</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Builder</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">的时候：</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="TEXT-INDENT: 21pt; MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd; mso-char-indent-count: 2.0;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">假如我要构造一辆汽车，汽车的部件很多，多到上千，那么我先干什么部件，再做什么部件，这属于建造步骤。我每一个部件如何制作，这是细节。如果按照过程设计，我肯定会在步骤中融合了各种细节。当我再次造一辆汽车的时候，步骤是稳定的，但是部件制作的细节不同。这样我就要在大量代码中进行大量的代码的查找和替换工作。而且随着汽车种类的增多，维护成本将线性增长。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="TEXT-INDENT: 21pt; MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd; mso-char-indent-count: 2.0;"><SPAN lang="EN-US"><FONT face="Calibri">Builder</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式是将一个复杂对象的构建和表示分离，使得同样的构建可以创建不同的表示。这里的构建就是车的构造流程（固定的），表示就是车部件的制造细节（这种表示并不是针对车的，但是部件的不同表示最终还是反应了车的表示，即细节的不同影响了全局的变化）。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><B style="mso-bidi-font-weight: normal;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">作用：</SPAN><SPAN lang="EN-US"></SPAN></B></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">是为了将构建复杂对象的过程和它的部件解耦</SPAN><SPAN lang="EN-US"><FONT face="Calibri">. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">注意</SPAN><SPAN lang="EN-US"><FONT face="Calibri">: </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">是解耦过程和部件</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">说明：</SPAN><SPAN lang="EN-US"></SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体; FONT-SIZE: 10.5pt; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">虽然过程和部件解耦了，但是俩着仍然有耦合，一旦部件增加，必然导致过程发生变化。但维护成本很低，远远小于不使用此模式的成本。</SPAN></P><SPAN style="FONT-FAMILY: 宋体; FONT-SIZE: 10.5pt; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">// </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">制造部件</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; TEXT-AUTOSPACE: ; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">class Builder {</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; TEXT-AUTOSPACE: ; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">public:</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 6pt 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-top: .5gd; mso-para-margin-right: 0cm; mso-para-margin-bottom: .0001pt; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">// </SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">创建部件<SPAN lang="EN-US">A </SPAN>比如创建汽车车轮<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">virtual void buildPartA() = 0;</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 6pt 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-top: .5gd; mso-para-margin-right: 0cm; mso-para-margin-bottom: .0001pt; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">// </SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">创建部件<SPAN lang="EN-US">B </SPAN>比如创建汽车方向盘<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">virtual void buildPartB() = 0;</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 6pt 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-top: .5gd; mso-para-margin-right: 0cm; mso-para-margin-bottom: .0001pt; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">// </SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">创建部件<SPAN lang="EN-US">C </SPAN>比如创建汽车发动机<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">virtual void buildPartC() = 0;</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 6pt 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-top: .5gd; mso-para-margin-right: 0cm; mso-para-margin-bottom: .0001pt; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">// </SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">返回最后组装成品结果<SPAN lang="EN-US"> (</SPAN>返回最后装配好的汽车<SPAN lang="EN-US">)</SPAN></SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">// </SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">成品的组装过程不在这里进行<SPAN lang="EN-US">,</SPAN>而是转移到下面的<SPAN lang="EN-US">Director </SPAN>类中<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">进行<SPAN lang="EN-US">.</SPAN></SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 6pt 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-top: .5gd; mso-para-margin-right: 0cm; mso-para-margin-bottom: .0001pt; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">// </SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">从而实现了解耦</SPAN><B style="mso-bidi-font-weight: normal;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">过程</SPAN></B><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">和</SPAN><B style="mso-bidi-font-weight: normal;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">部件</SPAN></B><B><I><SPAN style="FONT-FAMILY: 宋体,BoldItalic; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: '宋体,BoldItalic'; mso-font-kerning: 0pt;" lang="EN-US"></SPAN></I></B></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">virtual Product getResult() = 0;</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">};</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">&nbsp;</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">// </SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">制造过程<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; TEXT-AUTOSPACE: ; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">class Director {</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; TEXT-AUTOSPACE: ; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">protected:</SPAN></P>  <P style="TEXT-ALIGN: left; TEXT-INDENT: 21pt; MARGIN: 0cm 0cm 0pt; TEXT-AUTOSPACE: ; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">Builder builder;</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; TEXT-AUTOSPACE: ; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">&nbsp;</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">Director( Builder builder ) </SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">{</SPAN></P>  <P style="TEXT-ALIGN: left; TEXT-INDENT: 21pt; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">this.builder = builder;</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">}</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">&nbsp;</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">// </SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">将部件<SPAN lang="EN-US">partA partB partC </SPAN>最后组成复杂对象<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">// </SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">这里是将车轮 方向盘和发动机组装成汽车的过程<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">void construct() </SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">{</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 31.5pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 3.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">builder.buildPartA();</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 31.5pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 3.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">builder.buildPartB();</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 31.5pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 3.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">builder.buildPartC();</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">}</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">}</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">&nbsp;</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; TEXT-AUTOSPACE: ; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">class ConcreteBuilder : public Builder {</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt; TEXT-AUTOSPACE: ; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">protected:</SPAN></P>  <P style="TEXT-ALIGN: left; TEXT-INDENT: 21pt; MARGIN: 0cm 0cm 0pt; TEXT-AUTOSPACE: ; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">Part partA, partB, partC;</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">virtual void buildPartA() {</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">//</SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">这里是具体如何构建<SPAN lang="EN-US">partA </SPAN>的代码<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">};</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">&nbsp;</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">virtual void buildPartB() {</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">//</SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">这里是具体如何构建<SPAN lang="EN-US">partB </SPAN>的代码<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">};</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">&nbsp;</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">virtual void buildPartC() {</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">//</SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">这里是具体如何构建<SPAN lang="EN-US">partB </SPAN>的代码<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">};</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">virtual Product getResult() {</SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">//</SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">返回最后组装成品结果<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="TEXT-ALIGN: left; MARGIN: 0cm 0cm 0pt 21pt; TEXT-AUTOSPACE: ; mso-para-margin-left: 2.0gd; mso-layout-grid-align: none;" align="left"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">};</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">};</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">&nbsp;</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">// </SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">使用<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">Builder * pBuilder</SPAN><SPAN lang="EN-US"><FONT face="Calibri"> </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">= new ConcreteBuilder();</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">Director *pDirector = new Director(pBuilder);</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">pDirector-&gt;construct();</SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体; FONT-SIZE: 10.5pt; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US">Product product = pBuilder-&gt;GetResult();</SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体; FONT-SIZE: 10.5pt; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US"></SPAN></P></SPAN></SPAN>&nbsp;   <P><SPAN lang="EN-US"><STRONG>Singleton</STRONG></SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体;">创建一个唯一的全局变量（当然在</SPAN><SPAN lang="EN-US">C++</SPAN><SPAN style="FONT-FAMILY: 宋体;">中，可以直接可以定义全局变量）。此实现有几个关键点，见代码：</SPAN><SPAN lang="EN-US"></SPAN></P>class Singleton<BR>{<BR>public:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static Singleton* Instance()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (_instance == NULL)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 如果是多线程，不锁定的话有可能产生多个实例。<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 双重检测锁定（Double-Checked Locking）。<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EnterCriticalSection(&amp;cs);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (_instance == NULL)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _instance = new Singleton();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LeaveCriticalSection(&amp;cs);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return _instance;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR><BR>protected:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Singleton();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 将构造函数设置为protected，则此类不能被实例化（我们也这种目的）。<BR><BR>private:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static Singleton* _instance;<BR>};<BR>  <P><SPAN lang="EN-US">Singleton</SPAN><SPAN style="FONT-FAMILY: 宋体;">模式经常和</SPAN><SPAN lang="EN-US">Factory</SPAN><SPAN style="FONT-FAMILY: 宋体;">（</SPAN><SPAN lang="EN-US">AbstractFactory</SPAN><SPAN style="FONT-FAMILY: 宋体;">）模式在一起使用，因为系统中工厂对象一般来说只要一个</SPAN><SPAN lang="EN-US"></SPAN></P>  <P><SPAN lang="EN-US">&nbsp;</SPAN></P><SPAN lang="EN-US">  <P style="MARGIN: 6pt 0cm;"><SPAN lang="EN-US"><STRONG><FONT size="3"><FONT face="Calibri">Facade</FONT></FONT></STRONG></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">为子系统中的一组接口提供一个一致的界面</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P><SPAN style="FONT-FAMILY: 'Calibri','sans-serif'; FONT-SIZE: 10.5pt; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US">Facade </SPAN><SPAN style="FONT-FAMILY: 宋体; FONT-SIZE: 10.5pt; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">实际上是个理顺系统间关系</SPAN><SPAN style="FONT-FAMILY: 'Calibri','sans-serif'; FONT-SIZE: 10.5pt; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US">,</SPAN><SPAN style="FONT-FAMILY: 宋体; FONT-SIZE: 10.5pt; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">降低系统间耦合度的一个常用的办法</SPAN></P>  <P><SPAN style="FONT-FAMILY: 宋体; FONT-SIZE: 10.5pt; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;"></SPAN>&nbsp;</P>  <DIV><IMG style="MARGIN: 0px 10px 0px 0px;" title="设计模式心得 - Dsliu - Dspace" alt="设计模式心得 - Dsliu - Dspace" src="pic/img234.ph.126.net_oGE6xwww0-xPz9Y462c6KQ==_2120913949516392056.png"></DIV>  <DIV>  <P style="MARGIN: 6pt 0cm;"><SPAN lang="EN-US"><STRONG><FONT size="3"><FONT face="Calibri">Proxy</FONT></FONT></STRONG></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">为其他对象提供一种代理以控制对这个对象的访问</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><B style="mso-bidi-font-weight: normal;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">为什么要使用</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Proxy</FONT></SPAN></B></P>  <P style="TEXT-INDENT: -21pt; MARGIN: 0cm 0cm 0pt 21pt; mso-char-indent-count: 0; mso-list: l2 level1 lfo3;"><SPAN style="mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin;" lang="EN-US"><SPAN style="mso-list: Ignore;"><FONT face="Calibri">1.</FONT><SPAN style="FONT: 7pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">授权机制</SPAN><FONT face="Calibri"> </FONT><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">不同级别的用户对同一对象拥有不同的访问权利</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">如</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Jive </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">论坛系统中</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">就使用</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Proxy </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">进行授权机制控制</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">访问论坛有两种人</SPAN><SPAN lang="EN-US"><FONT face="Calibri">:</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">注册用户和游客</SPAN><SPAN lang="EN-US"><FONT face="Calibri">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">未注册用户</SPAN><SPAN lang="EN-US"><FONT face="Calibri">),Jive </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">中就通过类似</SPAN><SPAN lang="EN-US"><FONT face="Calibri">ForumProxy </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">这样的代理来控制这两种用户对论坛的访问权限</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="TEXT-INDENT: -21pt; MARGIN: 6pt 0cm 0pt 21pt; mso-para-margin-top: .5gd; mso-para-margin-right: 0cm; mso-para-margin-bottom: .0001pt; mso-para-margin-left: 21.0pt; mso-char-indent-count: -2.0; mso-list: l2 level1 lfo3;"><SPAN style="mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin;" lang="EN-US"><SPAN style="mso-list: Ignore;"><FONT face="Calibri">2.</FONT><SPAN style="FONT: 7pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">某个客户端不能直接操作到某个对象</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">但又必须和那个对象有所互动</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt 21pt; mso-para-margin-left: 2.0gd;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">举例两个具体情况</SPAN><SPAN lang="EN-US"><FONT face="Calibri">:</FONT></SPAN></P>  <P style="TEXT-INDENT: -21pt; MARGIN: 0cm 0cm 0pt 42pt; mso-para-margin-left: 2.0gd; mso-char-indent-count: 0; mso-list: l1 level1 lfo4;"><SPAN style="mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin;" lang="EN-US"><SPAN style="mso-list: Ignore;"><FONT face="Calibri">[1].</FONT><SPAN style="FONT: 7pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">如果那个对象是一个是很大的图片</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">需要花费很长时间才能显示出来</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">那么当这个图片包含在文档中时</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">使用编辑器或浏览器打开这个文档</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">打开文档必须很迅速</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">不能等待大图片处理完成</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">这时需要做个图片</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Proxy </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">来代替真正的图片</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="TEXT-INDENT: -21pt; MARGIN: 0cm 0cm 0pt 42pt; mso-para-margin-left: 2.0gd; mso-char-indent-count: 0; mso-list: l1 level1 lfo4;"><SPAN style="mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin;" lang="EN-US"><SPAN style="mso-list: Ignore;"><FONT face="Calibri">[2].</FONT><SPAN style="FONT: 7pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">如果那个对象在</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Internet </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">的某个远端服务器上</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">直接操作这个对象因为网络速度原因可能比较慢</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">那我们可以先用</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Proxy </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">来代替那个对象</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">总之原则是</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">对于开销很大的对象</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">只有在使用它时才创建</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">这个原则可以为我们节省很多宝贵的</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Java </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">内存</SPAN><SPAN lang="EN-US"><FONT face="Calibri">. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">所以</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">有些人认为</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Java </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">耗费资源内存</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">我以为这和程序编制思路也有一定的关系</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">以</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Jive </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">论坛系统为例</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">访问论坛系统的用户有多种类型</SPAN><SPAN lang="EN-US"><FONT face="Calibri">:</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">注册普通用户</SPAN><FONT face="Calibri"> </FONT><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">论坛管理者</SPAN><FONT face="Calibri"> </FONT><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">系统管</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">理者</SPAN><FONT face="Calibri"> </FONT><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">游客</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">注册普通用户才能发言</SPAN><SPAN lang="EN-US"><FONT face="Calibri">;</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">论坛管理者可以管理他被授权的论坛</SPAN><SPAN lang="EN-US"><FONT face="Calibri">;</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">系统管理者可以</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">管理所有事务等</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">这些权限划分和管理是使用</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Proxy </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">完成的</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm;"><SPAN lang="EN-US"><STRONG><FONT size="3"><FONT face="Calibri">Adapter</FONT></FONT></STRONG></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><STRONG><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">常见环境：</SPAN><SPAN lang="EN-US"></SPAN></STRONG></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">实际上在软件系统设计和开发中，这种问题也会经常遇到：我们为了完成某项工作购买了一个第三方的库来加快开发。这就带来了一个问题：我们在应用程序中已经设计好了接口，与这个第三方提供的接口不一致，为了使得这些接口不兼容的类（不能在一起工作）可以在一起工作了，</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Adapter</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式提供了将一个类（第三方库）的接口转化为客户（购买使用者）希望的接口。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">将两个不兼容的类纠合在一起使用，属于结构型模式</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">需要有</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Adaptee(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">被适配者</SPAN><SPAN lang="EN-US"><FONT face="Calibri">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">和</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">Adaptor(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">适配器</SPAN><SPAN lang="EN-US"><FONT face="Calibri">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">两个身份</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><B style="mso-bidi-font-weight: normal;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">使用方式</SPAN><SPAN lang="EN-US"></SPAN></B></P>  <P style="TEXT-INDENT: -18pt; MARGIN: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo2;"><SPAN style="mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin;" lang="EN-US"><SPAN style="mso-list: Ignore;"><FONT face="Calibri">1.</FONT><SPAN style="FONT: 7pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">组合（</SPAN><SPAN lang="EN-US"><FONT face="Calibri">composition</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">）</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="TEXT-INDENT: -18pt; MARGIN: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo2;"><SPAN style="mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin;" lang="EN-US"><SPAN style="mso-list: Ignore;"><FONT face="Calibri">2.</FONT><SPAN style="FONT: 7pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">继承（</SPAN><SPAN lang="EN-US"><FONT face="Calibri">inheritance</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">）</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm;"><SPAN lang="EN-US"><STRONG><FONT size="3"><FONT face="Calibri">Composite</FONT></FONT></STRONG></SPAN></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">将对象以树形结构组织起来</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">以达成“部分－整体”</SPAN><FONT face="Calibri"> </FONT><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">的层次结构，使得客户端对单个对象和组合对象的使用具有一致性</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><SPAN lang="EN-US"><FONT face="Calibri">Composite </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">比较容易理解，想到</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Composite </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">就应该想到树形结构图。组合体内这些对象都有共同接口</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">当组合体一个对象的方法被调用执行时，</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Composite </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">将遍历</SPAN><SPAN lang="EN-US"><FONT face="Calibri">(Iterator)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">整个树形结构</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">寻找同样包含这个方法的对象并实现调用执行。可以用牵一动百来形容。所以</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Composite </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式使用到</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Iterator </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式，和</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Chain of Responsibility </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式类似。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><B style="mso-bidi-font-weight: normal;"><SPAN lang="EN-US"><FONT face="Calibri">&nbsp;</FONT></SPAN></B></P>  <P style="MARGIN: 0cm 0cm 0pt;"><B style="mso-bidi-font-weight: normal;"><SPAN lang="EN-US"><FONT face="Calibri">Composite </FONT></SPAN></B><B style="mso-bidi-font-weight: normal;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">好处</SPAN><SPAN lang="EN-US"><FONT face="Calibri">:</FONT></SPAN></B></P>  <P style="TEXT-INDENT: -21pt; MARGIN: 0cm 0cm 0pt 21pt; mso-char-indent-count: 0; mso-list: l3 level1 lfo5;"><SPAN style="mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin;" lang="EN-US"><SPAN style="mso-list: Ignore;"><FONT face="Calibri">1.</FONT><SPAN style="FONT: 7pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">使客户端调用简单，客户端可以一致的使用组合结构或其中单个对象，用户就不必关系自己处理的是单个对象还是整个组合结构，这就简化了客户端代码。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="TEXT-INDENT: -21pt; MARGIN: 0cm 0cm 0pt 21pt; mso-char-indent-count: 0; mso-list: l3 level1 lfo5;"><SPAN style="mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-bidi-font-family: Calibri; mso-bidi-theme-font: minor-latin;" lang="EN-US"><SPAN style="mso-list: Ignore;"><FONT face="Calibri">2.</FONT><SPAN style="FONT: 7pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">更容易在组合体内加入对象部件</SPAN><SPAN lang="EN-US"><FONT face="Calibri">. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">客户端不必因为加入了新的对象部件而更改代码。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm;"><SPAN lang="EN-US"><STRONG><FONT size="3"><FONT face="Calibri">Decorator</FONT></FONT></STRONG></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">动态给一个对象添加一些额外的职责</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">就象在墙上刷油漆</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">使用</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Decorator </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式相比用生成</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">子类方式达到功能的扩充显得更为灵活</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">（使用组合而不是继承）</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><B style="mso-bidi-font-weight: normal;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">为什么使用</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Decorator?</FONT></SPAN></B></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">我们通常可以使用继承来实现功能的拓展</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">如果这些需要拓展的功能的种类很繁多</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">那么势必生成很多子类</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">增加系统的复杂性</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">同时</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">使用继承实现功能拓展</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">我们必须可预见这些拓展功能</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">这些功能是编译时就确定了</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">是静态的</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">使用</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Decorator </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">的理由是</SPAN><SPAN lang="EN-US"><FONT face="Calibri">:</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">这些功能需要由用户动态决定加入的方式和时机</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.Decorator </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">提供了</SPAN><SPAN lang="EN-US"><FONT face="Calibri">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">即插即用</SPAN><SPAN lang="EN-US"><FONT face="Calibri">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">的方法</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">在运行期间决定何时增加何种功能</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm;"><SPAN lang="EN-US"><STRONG><FONT size="3"><FONT face="Calibri">Bridge</FONT></FONT></STRONG></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">没有<SPAN lang="EN-US">Bridge</SPAN>的时候：<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="TEXT-INDENT: -21pt; MARGIN: 6pt 0cm 0pt 21pt; mso-para-margin-top: .5gd; mso-para-margin-right: 0cm; mso-para-margin-bottom: .0001pt; mso-para-margin-left: 21.0pt; mso-char-indent-count: 0; mso-list: l4 level1 lfo1;"><SPAN style="FONT-FAMILY: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: Wingdings; mso-font-kerning: 0pt;" lang="EN-US"><SPAN style="mso-list: Ignore;">n<SPAN style="FONT: 7pt 'Times New Roman';">&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">代码有冗余（每次都要重新实现）<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="TEXT-INDENT: -21pt; MARGIN: 0cm 0cm 0pt 21pt; mso-char-indent-count: 0; mso-list: l4 level1 lfo1;"><SPAN style="FONT-FAMILY: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: Wingdings; mso-font-kerning: 0pt;" lang="EN-US"><SPAN style="mso-list: Ignore;">n<SPAN style="FONT: 7pt 'Times New Roman';">&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">紧耦合（抽象和实现）<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="TEXT-INDENT: -21pt; MARGIN: 0cm 0cm 0pt 21pt; mso-char-indent-count: 0; mso-list: l4 level1 lfo1;"><SPAN style="FONT-FAMILY: Wingdings; mso-fareast-font-family: Wingdings; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: Wingdings; mso-font-kerning: 0pt;" lang="EN-US"><SPAN style="mso-list: Ignore;">n<SPAN style="FONT: 7pt 'Times New Roman';">&nbsp; </SPAN></SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">类的成倍递增（类爆炸）<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">&nbsp;</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><B style="mso-bidi-font-weight: normal;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">作用：<SPAN lang="EN-US"></SPAN></SPAN></B></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">将抽象与其实现解耦，使他们都可以独立地变化。<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;" lang="EN-US">&nbsp;</SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">缺点：<SPAN lang="EN-US"></SPAN></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 10.5pt; mso-bidi-font-family: 宋体; mso-font-kerning: 0pt;">如果抽象有一个新的具体变化，就要修改其对应的实现。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm;"><SPAN lang="EN-US"><STRONG><FONT size="3"><FONT face="Calibri">Flyweight</FONT></FONT></STRONG></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">避免大量拥有相同内容的小类的开销</SPAN><SPAN lang="EN-US"><FONT face="Calibri">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">如耗费内存</SPAN><SPAN lang="EN-US"><FONT face="Calibri">),</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">使大家共享一个类</SPAN><SPAN lang="EN-US"><FONT face="Calibri">(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">元类</SPAN><SPAN lang="EN-US"><FONT face="Calibri">).</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">面向对象语言的原则就是一切都是对象</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">但是如果真正使用起来</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">有时对象数可能显得很庞大</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">比如</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">字处理软件</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">如果以每个文字都作为一个对象</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">几千个字</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">对象数就是几千</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">无疑耗费内存</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">那么我们还是要</SPAN><SPAN lang="EN-US"><FONT face="Calibri">"</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">求同存异</SPAN><SPAN lang="EN-US"><FONT face="Calibri">",</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">找出这些对象群的共同点</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">设计一个元类</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">封装可以被共享的类</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">另外</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">还有一些特性是取决于应用</SPAN><SPAN lang="EN-US"><FONT face="Calibri">(context),</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">是不可共享的</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">这也</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Flyweight </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">中两个重要概念内部状态</SPAN><SPAN lang="EN-US"><FONT face="Calibri">intrinsic </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">和外部状态</SPAN><SPAN lang="EN-US"><FONT face="Calibri">extrinsic </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">之分</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">说白点</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">就是先捏一个的原始模型</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">然后随着不同场合和环境</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">再产生各具特征的具体模型</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">很显然</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">在这里需要产生不同的新对象</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">所以</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Flyweight </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式中常出现</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Factory </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.Flyweight </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">的内部状态是用来共享的</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,Flyweight factory </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">负责维护一个</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Flyweightpool(</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式池</SPAN><SPAN lang="EN-US"><FONT face="Calibri">)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">来存放内部状态的对象</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><SPAN lang="EN-US"><FONT face="Calibri">Flyweight </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式是一个提高程序效率和性能的模式</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">会大大加快程序的运行速度</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">应用场合很多</SPAN><SPAN lang="EN-US"><FONT face="Calibri">:</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">比如你要从一个数据库中读取一系列字符串</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">这些字符串中有许多是重复的</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">那么我们可以将这些字符串储存在</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Flyweight </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">池</SPAN><SPAN lang="EN-US"><FONT face="Calibri">(pool)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">中</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm;"><SPAN lang="EN-US"><STRONG><FONT size="3"><FONT face="Calibri">Template</FONT></FONT></STRONG></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">定义一个操作中算法的骨架</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">将一些步骤的执行延迟到其子类中</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">例如，微软的</SPAN><SPAN lang="EN-US"><FONT face="Calibri">MFC</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">，里面就是用了大量的</SPAN><SPAN lang="EN-US"><FONT face="Calibri">Template</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式，在</SPAN><SPAN lang="EN-US"><FONT face="Calibri">MFC</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">框架中大量的虚函数，将许多步骤可以延迟到以后进行。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm;"><SPAN lang="EN-US"><STRONG><FONT size="3"><FONT face="Calibri">Memento</FONT></FONT></STRONG></SPAN></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><SPAN lang="EN-US"><FONT face="Calibri">memento </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">是一个保存另外一个对象内部状态拷贝的对象</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">这样以后就可以将该对象恢复到原先保存的状态</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><SPAN lang="EN-US"><FONT face="Calibri">Memento </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">模式的缺点是耗费大</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">如果内部状态很多</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">再保存一份</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">无意要浪费大量内存</SPAN><SPAN lang="EN-US"><FONT face="Calibri">.</FONT></SPAN></P>  <P style="MARGIN: 0cm 0cm 0pt;"><SPAN lang="EN-US"><FONT face="Calibri">&nbsp;</FONT></SPAN></P>  <P style="MARGIN: 6pt 0cm;"><SPAN lang="EN-US"><STRONG><FONT size="3"><FONT face="Calibri">Obeserve</FONT></FONT></STRONG></SPAN></P><SPAN style="FONT-FAMILY: 宋体; FONT-SIZE: 10.5pt; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">又称发布</SPAN><SPAN style="FONT-FAMILY: 'Calibri','sans-serif'; FONT-SIZE: 10.5pt; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US">-</SPAN><SPAN style="FONT-FAMILY: 宋体; FONT-SIZE: 10.5pt; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">订阅（</SPAN><SPAN style="FONT-FAMILY: 'Calibri','sans-serif'; FONT-SIZE: 10.5pt; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;" lang="EN-US">Publish/Subscribe</SPAN><SPAN style="FONT-FAMILY: 宋体; FONT-SIZE: 10.5pt; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin; mso-bidi-font-size: 11.0pt; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">）模式。定义了一种一对多的依赖关系，让多个观察者对象同时监听一个主题对象。这个主题对象在状态变化时，会通知所有的观察者对象，使它们能够自动更新自己。</SPAN></DIV>  <DIV><IMG title="设计模式心得 - Dsliu - Dspace" alt="设计模式心得 - Dsliu - Dspace" style="MARGIN: 0px 10px 0px 0px;" src="pic/img548.ph.126.net_5gIbbuNo7FkfV2GL5R6mMg==_1361494462350097006.png">\</DIV>  <P>&nbsp;</P>  <P style="MARGIN: 6pt 0cm;"><SPAN lang="EN-US"><STRONG><FONT size="3"><FONT face="Calibri">Chain of responsibility</FONT></FONT></STRONG></SPAN></P>  <P style="MARGIN: 6pt 0cm 0pt; mso-para-margin-top: .5gd;"><SPAN lang="EN-US"><FONT face="Calibri">Chain of Responsibility(CoR) </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">是用一系列类</SPAN><SPAN lang="EN-US"><FONT face="Calibri">(classes)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">试图处理一个请求</SPAN><SPAN lang="EN-US"><FONT face="Calibri">request,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">这些类之间是一个松散的耦合</SPAN><SPAN lang="EN-US"><FONT face="Calibri">,</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">唯一共同点是在他们之间传递</SPAN><SPAN lang="EN-US"><FONT face="Calibri">request. </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">也就是说，来了一个请求，</SPAN><SPAN lang="EN-US"><FONT face="Calibri">A </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">类先处理，如果没有处理，就传递到</SPAN><SPAN lang="EN-US"><FONT face="Calibri">B </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">类处理，如果没有处理，就传递到</SPAN><SPAN lang="EN-US"><FONT face="Calibri">C </FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">类处理，就这样象一个链条</SPAN><SPAN lang="EN-US"><FONT face="Calibri">(chain)</FONT></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: minor-latin;">一样传递下去。</SPAN><SPAN lang="EN-US"></SPAN></P>  <P>&nbsp;</P></SPAN>
</body></html>